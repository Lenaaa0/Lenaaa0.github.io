<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="lena">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    
    <!--- Seo Part-->
    
    <link rel="canonical" href="http://example.com/2025/03/9dcfeb082e77.html"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="基础概念 网络空间安全主要围绕网络空间中所存在的安全问题开展研究  电磁设备 电子信息系统 网络 运行数据 系统应用   软件安全范围：操作系统、数据库、应用软件等  软件安全关注计算机程序或程序中所包含信息的完整性、机密性和可用性等  软件安全缺陷  软件漏洞是基本形态，恶意代码则是延伸的形态   软件安全风险  输入验证与表示 安全问题往往都是由于对输入的信息过度信任造成的 主要问题包括 缓冲">
<meta property="og:type" content="article">
<meta property="og:title" content="软件安全笔记">
<meta property="og:url" content="http://example.com/2025/03/9dcfeb082e77.html">
<meta property="og:site_name" content="Lena&#39;s Blog">
<meta property="og:description" content="基础概念 网络空间安全主要围绕网络空间中所存在的安全问题开展研究  电磁设备 电子信息系统 网络 运行数据 系统应用   软件安全范围：操作系统、数据库、应用软件等  软件安全关注计算机程序或程序中所包含信息的完整性、机密性和可用性等  软件安全缺陷  软件漏洞是基本形态，恶意代码则是延伸的形态   软件安全风险  输入验证与表示 安全问题往往都是由于对输入的信息过度信任造成的 主要问题包括 缓冲">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020240924215124.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241112223417.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241024102451.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241024102726.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241024103442.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241024104336.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241114101925.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241114100625.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241114110136.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202104137.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241114115410.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241115141301.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241115141315.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241115141356.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202114329.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202101303.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206111224.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202152223.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202161257.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202161106.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202163220.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202164038.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202164201.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202171627.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202171707.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202171536.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202172404.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202184020.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202212433.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202213241.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202213312.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202215426.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202215805.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202220221.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202221552.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202225239.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202225940.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241202230022.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206110801.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206110932.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206111008.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206112148.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206112154.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206112204.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206112651.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206113127.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206114120.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206114445.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206133922.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206143435.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206134914.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206144724.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206150239.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206152635.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206152703.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206152648.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206160958.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206161728.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206164159.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206164249.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206165902.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206165327.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206165811.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206170143.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206170201.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206170707.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206171042.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207143302.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207143340.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207143432.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207144638.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207152249.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207154202.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207154247.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206174323.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206225851.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241206230141.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207102823.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207103022.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207103543.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207104039.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207132003.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207132013.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207132103.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207132233.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207132319.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207133401.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207133422.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207133532.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207140311.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207142719.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207155907.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207161405.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207160507.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207160802.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207160551.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207161551.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207161557.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207161618.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207183322.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207183337.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207183356.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207183429.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207183911.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207183925.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207185645.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207185727.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207185811.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207190017.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207190150.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207190308.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207194114.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241207194435.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241213192938.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241213194748.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241213201833.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241213210405.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241213211249.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217151846.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217152303.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217154041.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217161416.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217161408.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217163735.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217165536.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217181549.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217181607.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217181623.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217182626.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217182730.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217182744.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241219205103.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241219205546.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241219212203.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241225150117.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241225155509.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241225155554.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241225160752.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217195747.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217195819.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217195914.png">
<meta property="og:image" content="http://example.com/images/Pasted%20image%2020241217200044.png">
<meta property="article:published_time" content="2025-03-08T14:18:05.626Z">
<meta property="article:modified_time" content="2025-03-08T14:18:25.534Z">
<meta property="article:author" content="Lena">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/Pasted%20image%2020240924215124.png">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="https://pic.imgdb.cn/item/64af57ba1ddac507ccaf35c4.jpg" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="https://pic.imgdb.cn/item/64af57ba1ddac507ccaf35c4.jpg">
    <meta name="theme-color" content="#C0A98D">
    <link rel="shortcut icon" href="https://pic.imgdb.cn/item/64af57ba1ddac507ccaf35c4.jpg">
    <!--- Page Info-->
    
    <title>
        
            软件安全笔记 -
        
        Lena&#39;s Blog
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
<link rel="stylesheet" href="/fonts/fonts.css">

    
<link rel="stylesheet" href="/fonts/Satoshi/satoshi.css">

    
<link rel="stylesheet" href="/fonts/Chillax/chillax.css">

    <!--- Font Part-->
    
    
    
    

    <!--- Inject Part-->
    
    <script id="hexo-configurations">
    let Global = window.Global || {};
    Global.hexo_config = {"hostname":"example.com","root":"/","language":"zh-CN","path":"search.xml"};
    Global.theme_config = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":["dahuaidan"]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":6,"number":true,"expand":true,"init_open":true},"copyright":true,"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#C0A98D","secondary":null},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"busuanzi_counter":{"enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"pjax":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/images/wallhaven-wym187.webp","dark":"/images/shuimu.webp"},"title":"Eadem mutata resurgo.","subtitle":{"text":["做自己的太阳"],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#FFDFDF","dark":"#FFDFDF"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":false,"links":{"github":null,"instagram":null,"zhihu":null,"twitter":null,"email":"lena@bupt.edu.cn"}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null}]},"mermaid":{"enable":false,"version":"9.3.0"},"Aplayer":{"enable":false,"type":"fixed","audios":{"name":null,"artist":null,"url":null,"cover":null}}},"version":"2.2.1","navbar":{"auto_hide":true,"color":{"left":"#d299c2","right":"#fef9d7","transparency":15},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Categories":{"path":"/categories","icon":"fa-solid fa-folder"},"Tags":{"path":"/tags","icon":"fa-solid fa-tags"},"Music":{"path":"/music","icon":"fas fa-music"},"About":{"icon":"fa-regular fa-user","submenus":{"Me":"/about","Github":"https://github.com/Lenaaa0","Blog":"https://lenaaa0.github.io","Friends":"/friends"}},"Links":{"icon":"fa-regular fa-link","submenus":{"主题使用文档":"https://redefine-docs.ohevan.com/getting-started","Link2":"/link2","Link3":"/link3"}}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":null,"links":{"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"Categories":{"path":"/categories","icon":"fa-regular fa-folder"}}},"article_date_format":"YYYY-MM-DD HH:mm:ss","categories":{"enable":true,"limit":6},"tags":{"enable":true,"limit":6}},"footerStart":"2023/7/11 11:45:14"};
    Global.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    Global.data_config = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Lena's Blog" type="application/atom+xml">

<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="main-content-container">

        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
                <a class="logo-image" href="/">
                    <img src="https://pic.imgdb.cn/item/64af57b61ddac507ccaf2d7b.jpg">
                </a>
            
            <a class="logo-title" href="/">
                
                Lena&#39;s Blog
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        首页
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/archives"  >
                                    
                                        
                                            <i class="fa-regular fa-archive"></i>
                                        
                                        归档
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/categories"  >
                                    
                                        
                                            <i class="fa-solid fa-folder"></i>
                                        
                                        分类
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/tags"  >
                                    
                                        
                                            <i class="fa-solid fa-tags"></i>
                                        
                                        标签
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/music"  >
                                    
                                        
                                            <i class="fas fa-music"></i>
                                        
                                        MUSIC
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown" 
                                    href="#" onClick="return false;">
                                    
                                        
                                            <i class="fa-regular fa-user"></i>
                                        
                                        关于&nbsp;<i class="fa-solid fa-chevron-down"></i>
                                    
                                </a>
                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                    
                                        <li>
                                        <a href="/about">ME
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://github.com/Lenaaa0">GITHUB
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://lenaaa0.github.io">BLOG
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a href="/friends">友情链接
                                        </a>
                                        </li>
                                    
                                    </ul>
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="has-dropdown" 
                                    href="#" onClick="return false;">
                                    
                                        
                                            <i class="fa-regular fa-link"></i>
                                        
                                        链接&nbsp;<i class="fa-solid fa-chevron-down"></i>
                                    
                                </a>
                                <!-- Submenu -->
                                
                                    <ul class="sub-menu">
                                    
                                        <li>
                                        <a target="_blank" rel="noopener" href="https://redefine-docs.ohevan.com/getting-started">主题使用文档
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a href="/link2">LINK2
                                        </a>
                                        </li>
                                    
                                        <li>
                                        <a href="/link3">LINK3
                                        </a>
                                        </li>
                                    
                                    </ul>
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer">
        <ul class="drawer-navbar-list">
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                首页
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/archives"  >
                             
                                
                                    <i class="fa-regular fa-archive"></i>
                                
                                归档
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/categories"  >
                             
                                
                                    <i class="fa-solid fa-folder"></i>
                                
                                分类
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/tags"  >
                             
                                
                                    <i class="fa-solid fa-tags"></i>
                                
                                标签
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="" 
                        href="/music"  >
                             
                                
                                    <i class="fas fa-music"></i>
                                
                                MUSIC
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="has-dropdown" 
                        href="#" onClick="return false;">
                            
                                
                                    <i class="fa-regular fa-user"></i>
                                
                                关于&nbsp;<i class="fa-solid fa-chevron-down"></i>
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                              
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="/about">ME</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://github.com/Lenaaa0">GITHUB</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://lenaaa0.github.io">BLOG</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="/friends">友情链接</a>
                            </li>
                        
                    
            
                
                    <li class="drawer-navbar-item flex-center">
                        <a class="has-dropdown" 
                        href="#" onClick="return false;">
                            
                                
                                    <i class="fa-regular fa-link"></i>
                                
                                链接&nbsp;<i class="fa-solid fa-chevron-down"></i>
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                              
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" target="_blank" rel="noopener" href="https://redefine-docs.ohevan.com/getting-started">主题使用文档</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="/link2">LINK2</a>
                            </li>
                        
                            <li class="dropdown-item flex-center">
                                <a class="dropdown-item" href="/link3">LINK3</a>
                            </li>
                        
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            
            
                <div class="article-title">
                    <h1 class="article-title-regular">软件安全笔记</h1>
                </div>
            
                
            

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="https://pic.imgdb.cn/item/64af57b61ddac507ccaf2d7b.jpg">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">lena</span>
                            
                                <span class="author-label">dahuaidan</span>
                            
                        </div>
                        <div class="meta-info">
                            <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2025-03-08 22:18:05</span>
        <span class="mobile">2025-03-08 22:18</span>
        <span class="hover-info">创建</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2025-03-08 22:18:25</span>
            <span class="mobile">2025-03-08 22:18</span>
            <span class="hover-info">更新</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>7.2k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>25 分钟</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content markdown-body">
                <h4 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h4><ul>
<li><p>网络空间安全主要围绕网络空间中所存在的安全问题开展研究</p>
<ul>
<li>电磁设备</li>
<li>电子信息系统</li>
<li>网络</li>
<li>运行数据</li>
<li>系统应用</li>
</ul>
</li>
<li><p>软件安全范围：操作系统、数据库、应用软件等</p>
</li>
<li><p>软件安全关注计算机程序或程序中所包含信息的完整性、机密性和可用性等</p>
</li>
<li><p>软件安全缺陷</p>
<ul>
<li>软件<strong>漏洞</strong>是基本形态，<strong>恶意代码</strong>则是延伸的形态</li>
</ul>
</li>
<li><p>软件安全风险</p>
<ul>
<li>输入验证与表示<ul>
<li>安全问题往往都是由于对输入的信息过度信任造成的</li>
<li>主要问题包括<ul>
<li><p>缓冲区溢出</p>
<ul>
<li>格式化字符串（Format String），允许攻击者控制一个函数的格式化字符串，可能会引起缓冲区溢出；</li>
<li>非法指针值</li>
<li>整数溢出</li>
<li>字符串结束错误，依赖于字符串终止符有可能造成缓冲区溢出；</li>
</ul>
</li>
<li><h2 id="命令注入-目录游历（Path-Traversal）允许用户通过输入来控制文件系统操作使用的路径，会使攻击者有机会访问或修改被保护的系统资源；-资源注入：允许用户输入控制资源ID可能会使攻击者访问或修改系统保护的资源；-配置操控，允许外部控制系统设置有可能会导致服务崩溃或应用程序进行非法操作-SQL注入，允许用户输入来构造一个动态的SQL请求，将有可能让攻击者控制SQL语句的意思，执行任意的SQL指令"><a href="#命令注入-目录游历（Path-Traversal）允许用户通过输入来控制文件系统操作使用的路径，会使攻击者有机会访问或修改被保护的系统资源；-资源注入：允许用户输入控制资源ID可能会使攻击者访问或修改系统保护的资源；-配置操控，允许外部控制系统设置有可能会导致服务崩溃或应用程序进行非法操作-SQL注入，允许用户输入来构造一个动态的SQL请求，将有可能让攻击者控制SQL语句的意思，执行任意的SQL指令" class="headerlink" title="命令注入  - 目录游历（Path Traversal）允许用户通过输入来控制文件系统操作使用的路径，会使攻击者有机会访问或修改被保护的系统资源；  - 资源注入：允许用户输入控制资源ID可能会使攻击者访问或修改系统保护的资源；  - 配置操控，允许外部控制系统设置有可能会导致服务崩溃或应用程序进行非法操作  - SQL注入，允许用户输入来构造一个动态的SQL请求，将有可能让攻击者控制SQL语句的意思，执行任意的SQL指令"></a>命令注入<br>  - 目录游历（Path Traversal）允许用户通过输入来控制文件系统操作使用的路径，会使攻击者有机会访问或修改被保护的系统资源；<br>  - 资源注入：允许用户输入控制资源ID可能会使攻击者访问或修改系统保护的资源；<br>  - 配置操控，允许外部控制系统设置有可能会导致服务崩溃或应用程序进行非法操作<br>  - SQL注入，允许用户输入来构造一个动态的SQL请求，将有可能让攻击者控制SQL语句的意思，执行任意的SQL指令</h2></li>
<li><p>跨站脚本</p>
<ul>
<li>HTTP应答截断（HTTP Response Splitting）在在HTTP响应头中包含未经验证的数据将可能导致缓存中毒、跨站脚本、跨用户攻击或者页面劫持攻击</li>
</ul>
</li>
<li><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020240924215124.png"></p>
</li>
</ul>
</li>
</ul>
</li>
<li>API误用<ul>
<li>API是调用者与被调用者之间的一个约定，大多数的API误用是由于调用者没有理解约定的目的所造成的。</li>
</ul>
</li>
<li>安全特征</li>
<li>时间与状态</li>
<li>错误处理</li>
<li>代码质量</li>
<li>封装</li>
<li>环境</li>
</ul>
</li>
<li><p>软件漏洞的危害</p>
<ul>
<li>无法正常使用</li>
<li>引发恶性事件</li>
<li>关键数据丢失</li>
<li>秘密信息泄漏</li>
<li>被安装木马病毒</li>
</ul>
</li>
<li><p>软件漏洞出现的原因</p>
<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241112223417.png"></li>
</ul>
</li>
</ul>
<p>修改全局偏移表<br>Ω</p>
<p>.dotors区<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241024102451.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241024102726.png"><br>对于攻击者而言，覆写.dtors区的好处在于：</p>
<p>• 该区总是存在并且会映射到内存中</p>
<p>然而：</p>
<p>• .dtors仅存在于用GCC编译和链接的程序中</p>
<h5 id="虚函数"><a href="#虚函数" class="headerlink" title="虚函数"></a>虚函数</h5><p>此方法在window中也可使用</p>
<p>没虚函数就没VRTR<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241024103442.png"></p>
<p>可以有两种方法：</p>
<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241024104336.png"></li>
</ul>
<h5 id="4-atexit-on-exit"><a href="#4-atexit-on-exit" class="headerlink" title="4. atexit() on_exit()"></a>4. atexit() on_exit()</h5><h5 id="5-longjmp"><a href="#5-longjmp" class="headerlink" title="5. longjmp()"></a>5. longjmp()</h5><h3 id="缓冲区溢出基础"><a href="#缓冲区溢出基础" class="headerlink" title="缓冲区溢出基础"></a>缓冲区溢出基础</h3><h4 id="2-1-缓冲区溢出原理"><a href="#2-1-缓冲区溢出原理" class="headerlink" title="2.1 缓冲区溢出原理"></a>2.1 缓冲区溢出原理</h4><h4 id="2-2-进程内存空间分区"><a href="#2-2-进程内存空间分区" class="headerlink" title="2.2 进程内存空间分区"></a>2.2 进程内存空间分区</h4><h5 id="PE文件与虚拟内存之间的映射"><a href="#PE文件与虚拟内存之间的映射" class="headerlink" title="PE文件与虚拟内存之间的映射"></a>PE文件与虚拟内存之间的映射</h5><ul>
<li>文件偏移地址(File Offset)<ul>
<li>数据在PE文件中的地址</li>
<li>文件在磁盘上存放时相对于文件开头的偏移</li>
<li>文件偏移地址=RVA-节偏移</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241114101925.png"></li>
</ul>
</li>
<li>装载基址Image Base<ul>
<li>PE装入内存时的基地址</li>
<li>默认下XE文件在内存中的基地址是0x00400000</li>
<li>DLL文件是0x10000000。</li>
<li>这些位置可以通过修改编译选项更改。</li>
</ul>
</li>
<li>虚拟内存地址Virtual Address,VA<ul>
<li>PE文件中的指令被装入内存后的地址</li>
</ul>
</li>
<li>相对虚拟地址(Relative Virtual Address,RVA<ul>
<li>内存地址相对于映射基址的偏移量</li>
<li>VA=Image Base +RVA</li>
</ul>
</li>
<li>文件偏移地址在计算时要考虑存放方式的不同<ul>
<li>按照磁盘数据标准存放时：PE数据节的大小永远是0x200的整数倍<ul>
<li>以0x200字节为基本单位进行组织。当一个数据节不足0x200字节时，不足的地方将被0x00填充；</li>
</ul>
</li>
<li>装入内存时：将按照内存数据标准存放，并以0X1000字节为基本单位进行组织</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241114100625.png"></li>
<li>这种由存储单位引起的节基址差叫做节偏移</li>
</ul>
</li>
</ul>
<h5 id="进程空间功能分区"><a href="#进程空间功能分区" class="headerlink" title="进程空间功能分区"></a>进程空间功能分区</h5><ul>
<li>代码区<ul>
<li>存储着被装入执行的二进制机器代码</li>
</ul>
</li>
<li>数据区<ul>
<li>存储全局变量等</li>
</ul>
</li>
<li>堆区<ul>
<li>在堆区动态地请求一定大小的内存，并在用完之后归还给堆区</li>
<li>动态分配和回收是堆区的特点</li>
</ul>
</li>
<li>栈区<ul>
<li>动态地存储函数之间的调用关系</li>
<li>保证被调用函数在返回时恢复到父函数中继续执行</li>
</ul>
</li>
</ul>
<h4 id="2-3-系统栈的工作原理—内存的不同用途"><a href="#2-3-系统栈的工作原理—内存的不同用途" class="headerlink" title="2.3 系统栈的工作原理—内存的不同用途"></a>2.3 系统栈的工作原理—内存的不同用途</h4><p>程序中所使用的缓冲区可以是堆区、栈区和存放静态变量的数据区。缓冲区溢出的利用方法和缓冲区到底属于上面哪个内存区域密不可分，本课主要介绍在系统栈发生溢出的情形。</p>
<ul>
<li>内存的栈区实际上指的就是系统栈<ul>
<li>对于类似 C语言这样的高级语言，系统栈的PUSH/POP等堆栈平衡细节是透明的</li>
<li>用汇编语言才需要直接和栈打交道</li>
</ul>
</li>
<li>栈存储的内容<ul>
<li>调用函数的返回地址</li>
<li>函数参数</li>
<li>局部（临时）变量</li>
</ul>
</li>
<li>栈被修改的情况<ul>
<li>函数调用期间</li>
<li>函数初始化期间</li>
<li>从子例程返回时</li>
</ul>
</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241114110136.png">从内存高地址向低地址</li>
</ul>
<h4 id="2-4-函数栈帧、函数调用原理"><a href="#2-4-函数栈帧、函数调用原理" class="headerlink" title="2.4  函数栈帧、函数调用原理"></a>2.4  函数栈帧、函数调用原理</h4><p>帧的地址被存储到帧或者基址寄存器中<br>帧指针在栈中是一个定点的引用<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202104137.png"><br>子程序调用<br>执行前<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241114115410.png"><br>返回地址即EIP</p>
<ul>
<li><p>进入函数时会发生的：（接下来的都是该函数的栈帧）</p>
<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241115141301.png"></li>
<li>push ebp是old ebp，将old ebp存在栈里</li>
<li>move ebp,esp，即现在的ebp是old esp</li>
<li>再为新的函数分配临时空间<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241115141315.png"></li>
</ul>
</li>
<li><p>函数return()时会发生的</p>
<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241115141356.png"></li>
<li>move esp, ebp: 恢复esp栈顶指针为之前保存的old esp，同时回收栈上的局部变量</li>
<li>因为之前push ebp了，pop ebp即恢复栈底指针（pop这个值到EBP寄存器）</li>
<li>ret 从栈中取出返回地址（即返回地址弹给寄存器），并jump到该地址即返回之前的位置</li>
</ul>
</li>
</ul>
<p>函数栈帧(从高地址到低地址，从先在栈里的到后在)</p>
<ul>
<li>函数返回地址</li>
<li>栈帧状态值（old ebp）<ul>
<li>old esp可以通过堆栈平衡计算的到</li>
<li>用于在本帧被弹出后恢复上一个栈帧</li>
</ul>
</li>
<li>局部变量<ul>
<li>通过sub esp为函数局部变量开辟的内存空间</li>
</ul>
</li>
</ul>
<h6 id="函数调用的步骤"><a href="#函数调用的步骤" class="headerlink" title="函数调用的步骤"></a>函数调用的步骤</h6><ul>
<li>参数入栈（参数从右向左一次压入系统栈）</li>
<li>返回地址入栈（call指令）<ul>
<li>将下一跳指令地址入栈</li>
</ul>
</li>
<li>代码区跳转（修改EIP，call指令）<ul>
<li>处理器从当前代码区跳转到被调用函数的入口</li>
</ul>
</li>
<li>栈帧调整<ul>
<li>EBP入栈（保存当前栈帧状态值，以备后面恢复本栈帧）</li>
<li>更新EBP（move ebp,esp将当前栈帧切换到新栈帧</li>
<li>给新栈帧分配空间（sub esp）<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202114329.png"></li>
</ul>
</li>
</ul>
<h6 id="函数返回步骤"><a href="#函数返回步骤" class="headerlink" title="函数返回步骤"></a>函数返回步骤</h6><ul>
<li>保存返回值<ul>
<li>通常保存在寄存器EAX</li>
</ul>
</li>
<li>弹出当前栈帧，恢复上一个栈帧<ul>
<li>堆栈平衡的基础上，给ESP加上栈帧的大小，降低栈顶，回收当前栈帧的空间</li>
<li>pop ebp：old ebp弹出到EBP寄存器，恢复上一个栈帧</li>
<li>ret :函数返回地址弹给EIP<ul>
<li>并按返回地址jump回母函数</li>
</ul>
</li>
</ul>
</li>
<li>继续执行</li>
</ul>
<h6 id="缓冲区溢出"><a href="#缓冲区溢出" class="headerlink" title="缓冲区溢出"></a>缓冲区溢出</h6><p>这是因为在初始化、拷贝或移动数据时，C语言并不自动地支持内在的数组边界检查。虽然这提高了语言的执行效率，但其带来的影响及后果却是深远和严重的</p>
<ul>
<li>缓冲区溢出的预防<ul>
<li>静态保护<ul>
<li>不执行代码</li>
<li>编译时加入限制条件、返回地址保护、二进制改写技术、基于源码的代码审计</li>
</ul>
</li>
<li>动态保护<ul>
<li>执行代码测试是否有漏洞</li>
<li>保护主机上运行的程序防止来自外部的缓冲区溢出攻击</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202101303.png"></p>
<h2 id="字符串安全"><a href="#字符串安全" class="headerlink" title="字符串安全"></a>字符串安全</h2><p>使用C风格的字符串编程是很容易产生错误的<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206111224.png"></p>
<h3 id="3-1-常见字符串操作错误"><a href="#3-1-常见字符串操作错误" class="headerlink" title="3.1 常见字符串操作错误"></a>3.1 常见字符串操作错误</h3><ul>
<li>无界字符串复制<ul>
<li>从一个无界数据源复制数据到定长字符数组</li>
<li>strcpy()和strcat（）函数复制和连接字符也容易出现错误<ul>
<li>因为执行的是无界复制</li>
</ul>
</li>
<li>解决方法：<ul>
<li>动态分配内存</li>
<li>设置域宽<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202152223.png"></li>
</ul>
</li>
</ul>
</li>
<li>空结尾错误<ul>
<li>数字把空间占满了，没位置写\0了</li>
</ul>
</li>
<li>截断<ul>
<li>目标字符数组长度不足以容纳一个字符串的内容</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202161257.png"></li>
</ul>
</li>
<li>差一错误<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202161106.png"></li>
</ul>
</li>
<li>数组写入越界</li>
</ul>
<h3 id="字符串漏洞"><a href="#字符串漏洞" class="headerlink" title="字符串漏洞"></a>字符串漏洞</h3><h4 id="缓冲区溢出-1"><a href="#缓冲区溢出-1" class="headerlink" title="缓冲区溢出"></a>缓冲区溢出</h4><p>当<strong>向</strong>为某特定数据结构分配的<strong>内存空间边界之外</strong>写入数据时，就会发生缓冲区溢出<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202163220.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202164038.png"></p>
<h4 id="栈粉碎"><a href="#栈粉碎" class="headerlink" title="栈粉碎"></a>栈粉碎</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202164201.png"></p>
<h4 id="代码注入"><a href="#代码注入" class="headerlink" title="代码注入"></a>代码注入</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202171627.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202171707.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202171536.png"></p>
<h4 id="弧注入"><a href="#弧注入" class="headerlink" title="弧注入"></a>弧注入</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202172404.png"><br>漏洞利用</p>
<ul>
<li>用存在的函数地址覆写返回地址</li>
<li>创建栈帧来链接函数调用</li>
<li>再现原始帧返回的程序，不进行检测并恢复执行</li>
</ul>
<p>弧注入优点</p>
<ul>
<li>攻击者可以将多个函数参数链在一起</li>
<li>代码是预先写入代码段的<ul>
<li>没有代码是被注入的</li>
<li>所以基于内存模式的保护不能阻止弧注入</li>
<li>不需要更大的缓冲区溢出</li>
</ul>
</li>
<li>原帧能被恢复，这样可以抵抗</li>
</ul>
<h3 id="缓解措施"><a href="#缓解措施" class="headerlink" title="缓解措施"></a>缓解措施</h3><ul>
<li>缓解措施包括<ul>
<li>预防</li>
<li>侦测，并安全地恢复，使漏洞利用的企图无法得逞</li>
</ul>
</li>
<li>防范策略<ul>
<li>静态</li>
<li>动态</li>
</ul>
</li>
</ul>
<h4 id="静态方法"><a href="#静态方法" class="headerlink" title="静态方法"></a>静态方法</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202184020.png"></p>
<h5 id="输入验证"><a href="#输入验证" class="headerlink" title="输入验证"></a>输入验证</h5><p>确保输入数据的大小不超过其存储的最小缓冲区<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202212433.png"></p>
<h5 id="strlcpy-and-strlcat"><a href="#strlcpy-and-strlcat" class="headerlink" title="strlcpy() and strlcat()"></a><strong>strlcpy()</strong> and strlcat()</h5><p>更不容易出错的方式来复制和链接<br>两个函数都<strong>确保</strong>目标字符串对所有非零长度的缓冲区来说都是<strong>非空结尾</strong>的。?<br>    保证都是\0结尾</p>
<ul>
<li><p>strlcpy</p>
<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202213241.png"></li>
<li>&nbsp;从<strong>src</strong>复制空结尾的字符串到<strong>dst</strong> (直到<strong>size</strong> 大小的字符)。</li>
</ul>
</li>
<li><p>strlcat</p>
<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202213312.png"></li>
<li>把非空结尾的字符串<strong>src</strong> 连接到<strong>dst</strong>末尾 (不超过<strong>size</strong> 的字符都能够连接到dst末尾)</li>
</ul>
</li>
<li><p>该方法存在的问题：</p>
<ul>
<li>可能发生字符串截断<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202215426.png"></li>
<li>仍然可能会导致缓冲区溢出<ul>
<li>指定的缓冲区大小比实际的缓冲区长度长</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="ISO-x2F-IEC-“Security”-TR-24731"><a href="#ISO-x2F-IEC-“Security”-TR-24731" class="headerlink" title="ISO/IEC “Security” TR 24731"></a>ISO/IEC “Security” TR 24731</h5><p>ISO/IEC TR 24731 定义更少出错的C标准函数版本<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202215805.png"></p>
<ul>
<li>该方法优点<ul>
<li>不产生无结尾的字符串</li>
<li>不意外截断字符串</li>
<li>支持编译时检查</li>
<li>失败显现</li>
<li>统一的函数参数和返回类型模式</li>
</ul>
</li>
<li>以strcpy_s()为例<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202220221.png"></li>
<li>中间的参数&nbsp;rsize_t用来确定目标缓冲区（即s1）的最大长度</li>
<li>如果源字符串不能完全复制到目标缓冲区，或者目标缓冲区发生溢出，都返回失败</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202221552.png"></li>
</ul>
</li>
<li>该方法缺点<ul>
<li>仍能发生缓冲区溢出<ul>
<li>如标缓冲区的最大长度是不被正确指定</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="动态方法"><a href="#动态方法" class="headerlink" title="动态方法"></a>动态方法</h4><p>动态分配的缓冲区需要动态调整额外的内存<br>动态方法更好，而且不丢弃多余的数据。<br>主要缺点是,如果输入被限制，则可能</p>
<ul>
<li>耗尽机器内存</li>
<li>结果导致拒绝服务攻击</li>
</ul>
<h5 id="SafeStr"><a href="#SafeStr" class="headerlink" title="SafeStr"></a>SafeStr</h5><p>在需要精加字符串大小的操作中，重新分配内存并移动字符串内容<br>因此, 在使用这个库的时候，不会发生缓冲区溢出<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202225239.png"><br>例子：<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202225940.png"><br>有错误处理<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202230022.png"></p>
<h5 id="管理字符串"><a href="#管理字符串" class="headerlink" title="管理字符串"></a>管理字符串</h5><ul>
<li>分配缓冲区</li>
<li>如果需要额外的内存，则重新调整内存大小</li>
<li>缺点<ul>
<li>无限制地消耗内存，可能导致拒绝服务攻击</li>
<li>性能开销</li>
</ul>
</li>
<li>举例：<ul>
<li>不透明数据类型<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206110801.png"></li>
<li>黑名单<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206110932.png"></li>
<li>白名单<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206111008.png"></li>
</ul>
</li>
</ul>
<h5 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206112148.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206112154.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206112204.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206112651.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206113127.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206114120.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206114445.png"></p>
<h2 id="指针安全"><a href="#指针安全" class="headerlink" title="指针安全"></a>指针安全</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p>指针安全是通过修改指针值来利用程序漏洞的方法的统称</p>
<ul>
<li>通过<strong>覆盖函数指针</strong>将程序的<strong>控制权转移</strong>到攻击者提供的外壳代码<ul>
<li>缓冲区覆写指针条件：<ul>
<li>缓冲区与目标指针必须分配在<strong>同一个段内</strong><ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206133922.png"></li>
</ul>
</li>
<li>&nbsp;<strong>缓冲区必须位于比目标指针更低的内存地址处</strong><ul>
<li>因为是从低地址往高地址写入的</li>
</ul>
</li>
<li>该缓冲区必须是界限不充分的，因此容易被缓冲区溢出利用</li>
</ul>
</li>
</ul>
</li>
<li>对象指针也可以被修改，从而执行任意代码<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206143435.png">即<br>缓冲区的定义在两个对象的前面，发生</li>
</ul>
<h5 id="覆盖函数指针举例"><a href="#覆盖函数指针举例" class="headerlink" title="覆盖函数指针举例"></a>覆盖函数指针举例</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206134914.png"></p>
<h5 id="覆盖对象指针举例"><a href="#覆盖对象指针举例" class="headerlink" title="覆盖对象指针举例"></a>覆盖对象指针举例</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206144724.png"></p>
<h3 id="修改指令指针"><a href="#修改指令指针" class="headerlink" title="修改指令指针"></a>修改指令指针</h3><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206150239.png"></p>
<p>举例，什么样的能够被利用：（什么情况下能恶意改变IC）<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206152635.png"></p>
<ul>
<li>静态调用（直接调用）是不能的<ul>
<li>因为静态调用是指令中地址被编码，再计算地址，再放入IC中</li>
<li>因此要改变IC，只能改变其指令</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206152703.png"></li>
</ul>
</li>
<li>通过函数指针调用函数可以<ul>
<li>因为通过函数指针的调用是<strong>间接引用</strong></li>
<li>IC的下一个值是存储在内存中的（指针地址处的内存的内容作为函数的地址）如果可以任意写的话，很容易被改变</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206152648.png"><ul>
<li>如这个例子中，可以改变478400h处的内容，即将函数地址改变</li>
</ul>
</li>
<li><strong>间接的函数引用</strong>与<strong>无法在编译期间决定的</strong>函数调用可以被利用，从而使程序的控制权转移到任意代码</li>
</ul>
</li>
</ul>
<h4 id="修改指令指针的目标"><a href="#修改指令指针的目标" class="headerlink" title="修改指令指针的目标"></a>修改指令指针的目标</h4><h5 id="全局偏移表"><a href="#全局偏移表" class="headerlink" title="全局偏移表"></a>全局偏移表</h5><p>在<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206160958.png">中的文件格式ELF，默认二进制格式</p>
<h6 id="GOT特点"><a href="#GOT特点" class="headerlink" title="GOT特点"></a>GOT特点</h6><p>其中ELF二进制文件的进程空间中有GOT，Global Offset Table，要使得动态链接的进程能够工作，其必不可少<br>GOT存放绝对地址<br><strong>GOT工作流程</strong></p>
<ul>
<li>GOT入口项包含运行时连接器RTL（runtime linker）的地址</li>
<li>程序首次调用一个函数，程序的控制权被转移到RTL</li>
<li>RTL解析出函数地址，RTL将地址写入GOT</li>
<li>接下来就可以通过GOT中的入口项直接调用函数<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206161728.png"></li>
</ul>
<p><strong>GOT特点</strong></p>
<ul>
<li>ELF可执行文件中的GOT入口项的地址是固定的<ul>
<li>对任何可执行进程映像而言GOT入口项都位于相同的地址<br>所以可以利用objdump命令查看某一个函数的GOT入口项位置</li>
</ul>
</li>
<li>记录的是偏移量<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206164159.png"></li>
</ul>
</li>
</ul>
<h6 id="如何利用GOT"><a href="#如何利用GOT" class="headerlink" title="如何利用GOT"></a>如何利用GOT</h6><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206164249.png"></p>
<h5 id="dtors区"><a href="#dtors区" class="headerlink" title="dtors区"></a>dtors区</h5><h6 id="什么是dtors区"><a href="#什么是dtors区" class="headerlink" title="什么是dtors区"></a>什么是dtors区</h6><p>.dtors</p>
<ul>
<li>仅存在于用GCC编译和链接的程序中</li>
<li>该区总是存在并且会映射到内存中，默认属性为可写，<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206165902.png"></li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206165327.png"></li>
<li>析构函数存储于ELF的.dtors区</li>
<li>析构函数在main执行完后调用，而构造函数在main之前调用<ul>
<li>因而构造函数没法被漏洞程序利用</li>
<li>举例<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206165811.png"></li>
</ul>
</li>
</ul>
<h6 id="如何利用"><a href="#如何利用" class="headerlink" title="如何利用"></a>如何利用</h6><p>优点：<br>对于攻击者而言，覆写.dtors区的好处在于： 该区总是存在并且会映射到内存中，并且是可写的</p>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206170143.png"><br>缺点：<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206170201.png"></p>
<h5 id="虚函数-1"><a href="#虚函数-1" class="headerlink" title="虚函数***"></a>虚函数***</h5><h6 id="什么是虚函数"><a href="#什么是虚函数" class="headerlink" title="什么是虚函数"></a>什么是虚函数</h6><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206170707.png"></p>
<ul>
<li><p>运行时解析即函数调用的动态绑定</p>
<ul>
<li>虚函数只有通过对象指针的引用才能显示出其动态调用的特性</li>
</ul>
</li>
<li><p>虚函数实现</p>
<ul>
<li>每一个对象头部有虚指针VPTR，Virtual Pointer</li>
<li>虚指针指向虚函数表VTBL，Virtual Function Table</li>
<li>虚函数表中有函数指针，指向每个函数实现<ul>
<li>VTBL是一个函数指针数组</li>
</ul>
</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206171042.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207143302.png"></li>
</ul>
</li>
</ul>
<h6 id="如何利用虚函数"><a href="#如何利用虚函数" class="headerlink" title="如何利用虚函数"></a>如何利用虚函数</h6><ol>
<li>覆写虚指针，使指向其他虚函数表</li>
<li>覆写虚函数表中的函数指针<br>攻击者可以通过任意内存写或者利用缓冲区溢出直接写入对象实现这一操作</li>
</ol>
<h6 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h6><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207143340.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207143432.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207144638.png"></p>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207152249.png"></p>
<h6 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h6><p>由于虚表指针在对象头部，位于成员变量之前，而对象中，地址是从低地址向高地址增长的（与栈相反），所以虚表指针在低地址处，成员变量在高地址处</p>
<p>而溢出又只能是从低地址往高地址写，因此需要目标在可写处的高地址才行<br>所以没法使用栈溢出来修改虚表指针<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207154202.png"><br>但是可以使用溢出方法来覆盖邻接对象的虚表<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207154247.png"></p>
<h5 id="atexit-on-exit"><a href="#atexit-on-exit" class="headerlink" title="atexit() on_exit"></a>atexit() on_exit</h5><p>atexit，被称为登记函数<br>在程序正常结束后调用<br>⼀个进程可以登记若⼲个个函数，这些函数由exit<strong>⾃动调⽤</strong>，这些函数被称为<strong>终⽌处理函数</strong>， atexit函数可以登记这些函数。 exit调⽤终⽌处理函数的顺序和atexit登记的顺序相反<br>登记的这些在_exit_funcs里···<br>atexit()注册的这些函数会显示在__exit_funcs 位置处的内存<br>每个函数保存在四个双字构成的结构中，其中最后一个双字是函数的实际地址</p>
<h6 id="利用例子"><a href="#利用例子" class="headerlink" title="利用例子"></a>利用例子</h6><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206174323.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206225851.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206230141.png"></p>
<h5 id="longjmp"><a href="#longjmp" class="headerlink" title="longjmp()"></a>longjmp()</h5><h6 id="什么是longjmp"><a href="#什么是longjmp" class="headerlink" title="什么是longjmp"></a>什么是longjmp</h6><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207102823.png">即调用longjmp的时候，会跳到setjmp的调用处，并给setjmp一个返回值，即val<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207103022.png"></p>
<p>深究是如何跳到setjmp的：setjmp将局部环境保存在jmp_buf中，longjmp可以根据其恢复环境</p>
<p>则引出攻击点：如何让longjmp跳到错误的地方</p>
<h6 id="如何利用-1"><a href="#如何利用-1" class="headerlink" title="如何利用"></a>如何利用</h6><ul>
<li>jmp_buf的实现：<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207103543.png"></li>
<li>longjmp具体如何恢复环境<ul>
<li>先将返回值存在eax</li>
<li>再恢复ebp与esp</li>
<li>再恢复PC，即将程序控制权转移</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207104039.png"></li>
</ul>
</li>
<li>因此可以通过缓冲区溢出，覆写 JB_PC字段，则可以使程序跳转到shellcode处执行</li>
</ul>
<h5 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理***"></a>异常处理***</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207132003.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207132013.png"></p>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207132103.png"></p>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207132233.png"><br>即SEH链，每个是EXECPTION_REGISTRATION结构，<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207132319.png"><br>其中handler指向异常处理函数<br>而prev指向下一个EXECPTION_REGISTRATION结构</p>
<p>而异常处理程序地址在栈的高地址处，局部变量在栈的较之低地址处，即如果<strong>栈变量发生缓冲区溢出</strong>，那么<strong>异常处理程序地址就可以被覆写</strong><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207133401.png"></p>
<h6 id="如何利用-2"><a href="#如何利用-2" class="headerlink" title="如何利用"></a>如何利用</h6><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207133422.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207133532.png"></p>
<h3 id="内存任意写技术"><a href="#内存任意写技术" class="headerlink" title="内存任意写技术"></a>内存任意写技术</h3><h3 id="缓解措施-1"><a href="#缓解措施-1" class="headerlink" title="缓解措施"></a>缓解措施</h3><p><strong>防止指针诡计的最佳方式就是消除<strong><strong>”</strong></strong>允许内存被不正确地覆写”****的漏洞</strong></p>
<ul>
<li>消除“允许内存被不正确地覆写”漏洞<ul>
<li>覆写对象指针</li>
<li>常见的动态内存管理错误</li>
<li>字符串格式化漏洞</li>
</ul>
</li>
<li>减少目标暴露<ul>
<li>写或者执行，只允许一个<ul>
<li>但不能防止atexit这样的</li>
</ul>
</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207140311.png"></li>
</ul>
</li>
<li>栈探测仪<ul>
<li>能保护<ul>
<li>仅对那些预通过溢出栈缓冲区来覆写栈指针或者其它受保护区域的漏洞利用有效。</li>
</ul>
</li>
<li>不能保护<ul>
<li>栈探测仪并不能防止<strong>对变量、对象指针或者函数指针</strong>进行修改的漏洞利用。</li>
<li>栈探测仪<strong>不能阻止包括栈段在内的任何位置发生缓冲区溢出</strong>。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>栈溢出攻击被用于覆写返回地址</strong>一样，<strong>缓冲区溢出可被用于覆写对象指针或函数指针</strong>。覆写函数指针或对象指针的能力取决于缓冲区溢出发生的地址和目标指针之间距离的远近，不过一般而言，同一个内存段内都存在这样的</p>
<p>Windows内存安全机制：GS编译、DEP、Heap cookie、Safe Unlink、ASLR？</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207142719.png"></p>
<h2 id="动态内存管理"><a href="#动态内存管理" class="headerlink" title="动态内存管理"></a>动态内存管理</h2><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207155907.png"></p>
<h3 id="动态内存管理函数"><a href="#动态内存管理函数" class="headerlink" title="动态内存管理函数"></a>动态内存管理函数</h3><h4 id="C标准定义的内存分配函数（？alloc和free）"><a href="#C标准定义的内存分配函数（？alloc和free）" class="headerlink" title="C标准定义的内存分配函数（？alloc和free）"></a>C标准定义的内存分配函数（？alloc和free）</h4><h5 id="calloc"><a href="#calloc" class="headerlink" title="calloc()"></a>calloc()</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207161405.png"><br>新分配的内容有初始化，初始化为0</p>
<h5 id="malloc"><a href="#malloc" class="headerlink" title="malloc()"></a>malloc()</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207160507.png"></p>
<p>新分配的内存未做初始化</p>
<h5 id="realloc"><a href="#realloc" class="headerlink" title="realloc()"></a>realloc()</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207160802.png"><br>即旧的不变，扩大的内存（即新分配的内存）未初始化</p>
<ul>
<li>若p为空指针，则等价为malloc<ul>
<li>若p不是空指针，则p必须是alloc返回的指向内存的指针</li>
</ul>
</li>
<li>若size=0，则等价于调用free(p)</li>
</ul>
<h5 id="free-释放内存"><a href="#free-释放内存" class="headerlink" title="free()释放内存"></a>free()释放内存</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207160551.png"><br>p必须是alloc的返回指针<br>不能释放两遍<br>p为空指针则不执行任何操作</p>
<h4 id="Cpp标准的（new和delete）"><a href="#Cpp标准的（new和delete）" class="headerlink" title="Cpp标准的（new和delete）"></a>Cpp标准的（new和delete）</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207161551.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207161557.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207161618.png"></p>
<ul>
<li>new关键字与malloc函数区别<ul>
<li>内存分配单位不同<ul>
<li>new以具体类型为单位进行内存分配</li>
<li>malloc以字节为单位进行内存分配</li>
</ul>
</li>
<li>是否初始化不同<ul>
<li>new在申请单个类型变量的时候可以进行初始化</li>
<li>而malloc没有对内存初始化</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="内存分配算法"><a href="#内存分配算法" class="headerlink" title="内存分配算法"></a>内存分配算法</h3><ul>
<li>连续匹配<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207183322.png"></li>
</ul>
</li>
<li>最先匹配<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207183337.png"></li>
</ul>
</li>
<li>最佳匹配<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207183356.png"></li>
</ul>
</li>
<li>最优匹配<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207183429.png"></li>
</ul>
</li>
<li>最差匹配<ul>
<li>挑最大的空闲块</li>
</ul>
</li>
<li>伙伴系统方法<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207183911.png"></li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207183925.png"></li>
</ul>
</li>
<li>隔离<ul>
<li>保持单独的大小一致的块的列表</li>
</ul>
</li>
</ul>
<h3 id="常见内存管理错误"><a href="#常见内存管理错误" class="headerlink" title="常见内存管理错误"></a>常见内存管理错误</h3><h4 id="初始化错误"><a href="#初始化错误" class="headerlink" title="初始化错误"></a>初始化错误</h4><ul>
<li>程序员<strong>假设</strong>malloc()把分配的内存的所有位初始化为零<ul>
<li>实际上malloc不会进行初始化</li>
</ul>
</li>
<li></li>
</ul>
<h4 id="未检查返回值"><a href="#未检查返回值" class="headerlink" title="未检查返回值"></a>未检查返回值</h4><p>内存是有限的资源，它可能会被耗尽<br>内存分配可能失败<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207185645.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207185727.png"></p>
<ul>
<li><p>malloc分配的</p>
<ul>
<li>若分配失败，会返回NULL指针</li>
<li>可以这样检查<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207185811.png"></li>
</ul>
</li>
<li><p>new分配的</p>
<ul>
<li>若分配失败，会抛出异常<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207190017.png"></li>
<li>检查：<ul>
<li>不能直接用if，因为有抛出异常，if的判断永远是真值，例子：<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207190150.png"></li>
<li>可以使用new(nothrow)检查，这样如果分配失败会返回NULL指针<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207190308.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="引用已释放的内存"><a href="#引用已释放的内存" class="headerlink" title="引用已释放的内存"></a>引用已释放的内存</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207194114.png"></p>
<h4 id="4-多次释放内存"><a href="#4-多次释放内存" class="headerlink" title="4. 多次释放内存"></a>4. 多次释放内存</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207194435.png"></p>
<h4 id="5-不正确配对内存管理函数"><a href="#5-不正确配对内存管理函数" class="headerlink" title="5. 不正确配对内存管理函数"></a>5. 不正确配对内存管理函数</h4><p>应该正确配对<br>new 配对 delete<br>malloc 配对 free<br>不恰当的配对是不可移植的</p>
<h4 id="6-未能区分标量和数组"><a href="#6-未能区分标量和数组" class="headerlink" title="6. 未能区分标量和数组"></a>6. 未能区分标量和数组</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241213192938.png"><br>如使用了new[] 分配就要用对应的delete[] 释放<br>否则可能导致内存泄漏，或者未定义的行为导致崩溃</p>
<h4 id="7-分配函数的不当使用"><a href="#7-分配函数的不当使用" class="headerlink" title="7. 分配函数的不当使用"></a>7. 分配函数的不当使用</h4><ul>
<li>malloc(0)<ul>
<li>C运行时库能返回空指针或者伪地址</li>
<li>空指针即没分配内存，伪地址即给分配了指针，但该指针是无效的，分配的内存不能用于存储数据</li>
<li>最安全和便捷的解决方案是确保没有零长度分配</li>
</ul>
</li>
<li>alloca()<ul>
<li>定义<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241213194748.png"></li>
</ul>
</li>
<li>功能<ul>
<li>在调用者的栈中分配内存。<ul>
<li>即使用这个函数分配的内存是在栈空间的</li>
<li>分配的内存的生命周期与函数调用的生命周期是相同的</li>
</ul>
</li>
<li>在 “调用alloca()的函数“ 返回时， alloca()分配的内存会自动释放<ul>
<li>因为是在栈中的</li>
<li>所以无需手动调用free()释放</li>
</ul>
</li>
</ul>
</li>
<li>潜在的问题<ul>
<li>通常实现为内联函数，直接将代码插入调用点，通过栈指针调整来分配内存，且内存分配过程非常简单，内联化能够更好地适应这种低级别、快速的操作<ul>
<li>不会返回空指针<ul>
<li>即使分配错误了，只是会导致栈溢出或程序崩溃，程序员无法通过简单的返回值检查来判断是否成功分配了内存</li>
</ul>
</li>
</ul>
</li>
<li>分配空间时候可能导致栈溢出（超出栈边界）<ul>
<li>栈空间的大小通常是有限制的，这个是在栈空间分配的</li>
</ul>
</li>
<li>程序员误以为该函数要配上free（）释放内存<ul>
<li>导致双重释放</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="dlmalloc"><a href="#dlmalloc" class="headerlink" title="dlmalloc"></a>dlmalloc</h3><h4 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h4><h5 id="块结构"><a href="#块结构" class="headerlink" title="块结构"></a>块结构</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241213201833.png"></p>
<ul>
<li>块开始的4字节：<ul>
<li>若该块前一个块为空闲块，则该块开始的四字节包含前一块的大小，prev,previous</li>
<li>若该块前一个块为已分配块，则包含前一内存块用户数据的最后四个字节</li>
</ul>
</li>
<li>PREV_INUSE<ul>
<li>PREV_INUSE位被存储于块大小的低位中</li>
<li>标志位，若当前内存块<strong>前一块已分配，则为1</strong></li>
</ul>
</li>
<li>这里的fd to next是前向指针，指向下一个内存块，bd to prev是后向指针，指向的是前一个内存块</li>
</ul>
<h5 id="空闲块组织方式"><a href="#空闲块组织方式" class="headerlink" title="空闲块组织方式"></a>空闲块组织方式</h5><ul>
<li>空闲块被组织成筐<ul>
<li>每个“筐”里存放的是<strong>差不多大小</strong>的空闲块</li>
<li>每个筐都有一个“头索引” head element，指向每个“筐”的位置。它帮助 dlmalloc 快速找到合适的内存块，避免浪费时间遍历所有内存块。</li>
<li>缓存框<ul>
<li>用于存放最近刚刚释放的空闲块。</li>
<li>利用局部性原理，最近释放的块很可能会很快被重复使用。所以，dlmalloc 会把这些块放在缓存筐里，方便快速分配。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241213210405.png"></p>
<h4 id="解链操作unlink"><a href="#解链操作unlink" class="headerlink" title="解链操作unlink"></a>解链操作unlink</h4><h6 id="基础知识-1"><a href="#基础知识-1" class="headerlink" title="基础知识"></a>基础知识</h6><p><strong>解链（unlink）</strong> 就是指从这个链表中移除某个内存块，以便合并或重新分配。<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241213211249.png"><br>使用场合</p>
<ul>
<li>free<ul>
<li>释放内存块时，可能需要检查并合并空闲块</li>
<li>如果释放的<strong>内存块前后相邻的块也是空闲</strong>的，那么释放操作会将这些相邻的空闲块<strong>合并</strong><ul>
<li>这个时候就需要解链技术，把那个空闲块解链，合并后再插回去</li>
</ul>
</li>
</ul>
</li>
<li>malloc<ul>
<li>要从空闲链表中分配一个内存块时，<strong>dlmalloc</strong> 会使用解链操作将该空闲块从链表中取出。</li>
</ul>
</li>
</ul>
<h6 id="如何利用-3"><a href="#如何利用-3" class="headerlink" title="如何利用"></a>如何利用</h6><p>要让dlmalloc误以为第二块内存是未分配的，free()才会unlink()宏来合并自己和下一个内存块（目的是合并first,second）？</p>
<ul>
<li><p>可以让free()找错第三块的地址：</p>
<ul>
<li>将第二块内存的起始位置加上其大小，得到第三块的地址</li>
<li>因此可以通过覆盖第二块内存中<ul>
<li>上一块内存大小，四字节<ul>
<li>例如，第二块内存大小被修改为-4</li>
<li>因此会去那找第三块，会使dlmalloc所找到的PREV_INUSE标志位为空，所以以为second为未分配的，导致free（first）调用unlink宏来合并first和second</li>
</ul>
</li>
<li>size（自己这块）四字节</li>
<li>前向、后向指针</li>
</ul>
</li>
</ul>
</li>
<li><p>找错第三块的目的是让free（first）以为second未分配，从而使free（）调用unlink宏，从而实现<strong>任意地址处写入4字节数据</strong></p>
<ul>
<li>调用unlink宏的目的是要实现任意写入</li>
<li>即，因为覆写了第二块的fd和bk指针，可以实现向这俩的地址写入<ul>
<li>unlink()宏将攻击者提供的4个字节的数据写到同样是由攻击者指定的4个字节的地址处</li>
</ul>
</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217151846.png">攻击者可能会提供栈中指令指针的地址，将其覆写为恶意代码的地址</li>
</ul>
</li>
<li><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217152303.png"></p>
</li>
<li><p>该利用方式困难之处在于精确确定第一块内存的大小</p>
<ul>
<li>攻击者可以从dlmalloc中复制request2size(req, nb)宏的代码到其利用代码中<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217154041.png"></li>
</ul>
</li>
</ul>
<h4 id="Frontlink技术"><a href="#Frontlink技术" class="headerlink" title="Frontlink技术"></a>Frontlink技术</h4><p>当一块内存被释放时，它必须被正确地链接进双链表中，在dlmalloc的某些版本中，此项操作是由frontlink ()代码段完成的</p>
<h6 id="基础知识-2"><a href="#基础知识-2" class="headerlink" title="基础知识"></a>基础知识</h6><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217161416.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217161408.png"></p>
<h6 id="如何利用-4"><a href="#如何利用-4" class="headerlink" title="如何利用"></a>如何利用</h6><ul>
<li><p>shellcode的最后4个字节就是跳转到shellcode其他部分的跳转指令</p>
<ul>
<li>这4个字节要是first块的最后4个字节，在second开头</li>
</ul>
</li>
<li><p>为确保该条件能满足，被攻击的内存块的字节长度必须是<strong>8的整数倍-4</strong>‘？</p>
</li>
<li><p>通过对fourth内存块溢出到fifth块，并覆写其中的前向（fd to next）指针<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217163735.png"></p>
<ul>
<li>使其指向一个假内存块</li>
<li>这个假内存块的后向（bk to prev假内存块地址addr+12）指针包含一个函数指针地址<ul>
<li>一个合适的函数指针：存储于程序.dtors区中的第一个析构函数的地址<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217165536.png">以通过检查可执行映像而获得这个地址</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217181549.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217181607.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217181623.png">所以前面先利用了first块的无界复制，导致second块被改变，即可以实现任意的信息覆写进函数指针（此处用second来覆盖.dtors地址 ，而second为first覆盖，指向的是first中的shellcode）<br>程序正常结束的时候，会去调用析构函数，而被shellcode覆盖了，即程序结束后会调用shellcode</p>
<h4 id="双重释放"><a href="#双重释放" class="headerlink" title="双重释放"></a>双重释放</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217182626.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217182730.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217182744.png"></p>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241219205103.png">二次释放first内存后，再分配，并向first里写入strcpy的GOT地址和seecode地址<br>再次malloc的时候，还是相同的first，而unlink宏会将shellcoded的地址复制到全局偏移表中的strcpy的地址处<br>当程序调用strcpy时，即在调用shellcode</p>
<p>shellcode需要填充前面的12字节，因为这部分被unlink宏所覆写<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241219205546.png"></p>
<p>写入到已释放内存也是安全缺陷<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241219212203.png"></p>
<h3 id="RTL-Heap-x2F-堆"><a href="#RTL-Heap-x2F-堆" class="headerlink" title="RTL Heap/堆"></a>RTL Heap/堆</h3><p>RTL，runtime library使用了<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241225150117.png"></p>
<ol>
<li>虚拟内存API<ol>
<li>32位地址</li>
<li>4KB页</li>
</ol>
</li>
<li>堆内存API<ol>
<li>每一个进程都有一个默认堆</li>
<li>允许用户建立多个动态堆</li>
</ol>
</li>
<li>局部内存和全局内存API</li>
<li>CRT内存函数</li>
<li>内存映射API<ol>
<li>内存映射文件允许一个应用程序将其虚拟地址空间之间映射到磁盘上的一个文件</li>
</ol>
</li>
</ol>
<h5 id="使用的数据结构"><a href="#使用的数据结构" class="headerlink" title="使用的数据结构"></a>使用的数据结构</h5><h6 id="进程环境块PEB"><a href="#进程环境块PEB" class="headerlink" title="进程环境块PEB"></a>进程环境块PEB</h6><p>位置：<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241225155509.png"><br>PEB给出堆数据结构的信息<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241225155554.png"></p>
<h6 id="空闲链表"><a href="#空闲链表" class="headerlink" title="空闲链表"></a>空闲链表</h6><p>有128个双向链表的数组，链表被RTL堆用来跟踪空闲内存块</p>
<ul>
<li>Freelist[]是个LIST_ENTRY结构的数组<ul>
<li>每－个LIST_ENTRY表示一个双链表的头部，由一个前向链接（ flink ）和一个后向链接（ blink ）组成</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241225160752.png"></li>
<li>每个链表中从小到大开始排，</li>
<li>创建一个新堆时，空闲链表被初始化为空，即前向和后向链接都指向链表头</li>
</ul>
</li>
<li><h2 id="后备缓存链表"><a href="#后备缓存链表" class="headerlink" title="后备缓存链表"></a>后备缓存链表</h2></li>
</ul>
<h2 id="整数安全"><a href="#整数安全" class="headerlink" title="整数安全"></a>整数安全</h2><h3 id="整数数据类型"><a href="#整数数据类型" class="headerlink" title="整数数据类型"></a>整数数据类型</h3><ul>
<li>原码表示方法<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217195747.png"></li>
<li>反码表示方法<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217195819.png"></li>
<li>补码表示方法<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217195914.png"></li>
<li>带符号和无符号<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217200044.png"></li>
</ul>
</li>
</ul>
<h3 id="整数的转换"><a href="#整数的转换" class="headerlink" title="整数的转换"></a>整数的转换</h3><h3 id="整数的操作"><a href="#整数的操作" class="headerlink" title="整数的操作"></a>整数的操作</h3><h3 id="整数的漏洞"><a href="#整数的漏洞" class="headerlink" title="整数的漏洞"></a>整数的漏洞</h3>
            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul>
        <li><strong>标题:</strong> 软件安全笔记</li>
        <li><strong>作者:</strong> lena</li>
        <li><strong>创建于:</strong> 2025-03-08 22:18:05</li>
        
            <li>
                <strong>更新于:</strong> 2025-03-08 22:18:25
            </li>
        
        <li>
            <strong>链接:</strong> https://lenaaa0.github.io/2025/03/9dcfeb082e77.html
        </li>
        <li>
            <strong>版权声明:</strong> 本文章采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a> 进行许可。
        </li>
    </ul>
</div>

                </div>
            

            

            

            
                <div class="article-nav">
                    
                    
                        <div class="article-next">
                            <a class="next"
                            rel="next"
                            href="/2025/03/a1a6e95e6be5.html"
                            >
                                <span class="title flex-center">
                                    <span class="post-nav-title-item"></span>
                                    <span class="post-nav-item">下一篇</span>
                                </span>
                                <span class="right arrow-icon flex-center">
                                    <i class="fa-solid fa-chevron-right"></i>
                                </span>
                            </a>
                        </div>
                    
                </div>
            


            
                <div class="comment-container">
                    <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
        <i class="fa-solid fa-comments"></i>&nbsp;评论
    </div>
    

        
            
 
    <div id="waline"></div>
    <script type="module"  data-pjax>
        import { init } from 'https://evan.beee.top/js/waline.mjs';

        function loadWaline() {
            init({
                el: '#waline',
                serverURL: 'https://example.example.com',
                lang: 'zh-CN',
                dark: 'body[class~="dark-mode"]',
                requiredMeta: ['nick','mail'], // cannot customize by theme config, change it yourself
            });
        }

        if ('true') {
            const loadWalineTimeout = setTimeout(() => {
                loadWaline();
                clearTimeout(loadWalineTimeout);
            }, 1000);
        } else {
            window.addEventListener('DOMContentLoaded', loadWaline);
        }
        
    </script>



        
    
</div>

                </div>
            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">此页目录</div>
        <div class="page-title">软件安全笔记</div>
        <ol class="nav"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="nav-number">1.</span> <span class="nav-text">基础概念</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%B3%A8%E5%85%A5-%E7%9B%AE%E5%BD%95%E6%B8%B8%E5%8E%86%EF%BC%88Path-Traversal%EF%BC%89%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E9%80%9A%E8%BF%87%E8%BE%93%E5%85%A5%E6%9D%A5%E6%8E%A7%E5%88%B6%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%93%8D%E4%BD%9C%E4%BD%BF%E7%94%A8%E7%9A%84%E8%B7%AF%E5%BE%84%EF%BC%8C%E4%BC%9A%E4%BD%BF%E6%94%BB%E5%87%BB%E8%80%85%E6%9C%89%E6%9C%BA%E4%BC%9A%E8%AE%BF%E9%97%AE%E6%88%96%E4%BF%AE%E6%94%B9%E8%A2%AB%E4%BF%9D%E6%8A%A4%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90%EF%BC%9B-%E8%B5%84%E6%BA%90%E6%B3%A8%E5%85%A5%EF%BC%9A%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%E6%8E%A7%E5%88%B6%E8%B5%84%E6%BA%90ID%E5%8F%AF%E8%83%BD%E4%BC%9A%E4%BD%BF%E6%94%BB%E5%87%BB%E8%80%85%E8%AE%BF%E9%97%AE%E6%88%96%E4%BF%AE%E6%94%B9%E7%B3%BB%E7%BB%9F%E4%BF%9D%E6%8A%A4%E7%9A%84%E8%B5%84%E6%BA%90%EF%BC%9B-%E9%85%8D%E7%BD%AE%E6%93%8D%E6%8E%A7%EF%BC%8C%E5%85%81%E8%AE%B8%E5%A4%96%E9%83%A8%E6%8E%A7%E5%88%B6%E7%B3%BB%E7%BB%9F%E8%AE%BE%E7%BD%AE%E6%9C%89%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%AF%BC%E8%87%B4%E6%9C%8D%E5%8A%A1%E5%B4%A9%E6%BA%83%E6%88%96%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E8%BF%9B%E8%A1%8C%E9%9D%9E%E6%B3%95%E6%93%8D%E4%BD%9C-SQL%E6%B3%A8%E5%85%A5%EF%BC%8C%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5%E6%9D%A5%E6%9E%84%E9%80%A0%E4%B8%80%E4%B8%AA%E5%8A%A8%E6%80%81%E7%9A%84SQL%E8%AF%B7%E6%B1%82%EF%BC%8C%E5%B0%86%E6%9C%89%E5%8F%AF%E8%83%BD%E8%AE%A9%E6%94%BB%E5%87%BB%E8%80%85%E6%8E%A7%E5%88%B6SQL%E8%AF%AD%E5%8F%A5%E7%9A%84%E6%84%8F%E6%80%9D%EF%BC%8C%E6%89%A7%E8%A1%8C%E4%BB%BB%E6%84%8F%E7%9A%84SQL%E6%8C%87%E4%BB%A4"><span class="nav-number"></span> <span class="nav-text">命令注入  - 目录游历（Path Traversal）允许用户通过输入来控制文件系统操作使用的路径，会使攻击者有机会访问或修改被保护的系统资源；  - 资源注入：允许用户输入控制资源ID可能会使攻击者访问或修改系统保护的资源；  - 配置操控，允许外部控制系统设置有可能会导致服务崩溃或应用程序进行非法操作  - SQL注入，允许用户输入来构造一个动态的SQL请求，将有可能让攻击者控制SQL语句的意思，执行任意的SQL指令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%99%9A%E5%87%BD%E6%95%B0"><span class="nav-number">0.1.</span> <span class="nav-text">虚函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-atexit-on-exit"><span class="nav-number">0.2.</span> <span class="nav-text">4. atexit() on_exit()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-longjmp"><span class="nav-number">0.3.</span> <span class="nav-text">5. longjmp()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA%E5%9F%BA%E7%A1%80"><span class="nav-number"></span> <span class="nav-text">缓冲区溢出基础</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA%E5%8E%9F%E7%90%86"><span class="nav-number">1.</span> <span class="nav-text">2.1 缓冲区溢出原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-%E8%BF%9B%E7%A8%8B%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%E5%88%86%E5%8C%BA"><span class="nav-number">2.</span> <span class="nav-text">2.2 进程内存空间分区</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#PE%E6%96%87%E4%BB%B6%E4%B8%8E%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E4%B9%8B%E9%97%B4%E7%9A%84%E6%98%A0%E5%B0%84"><span class="nav-number">2.1.</span> <span class="nav-text">PE文件与虚拟内存之间的映射</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B%E7%A9%BA%E9%97%B4%E5%8A%9F%E8%83%BD%E5%88%86%E5%8C%BA"><span class="nav-number">2.2.</span> <span class="nav-text">进程空间功能分区</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-%E7%B3%BB%E7%BB%9F%E6%A0%88%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E2%80%94%E5%86%85%E5%AD%98%E7%9A%84%E4%B8%8D%E5%90%8C%E7%94%A8%E9%80%94"><span class="nav-number">3.</span> <span class="nav-text">2.3 系统栈的工作原理—内存的不同用途</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-%E5%87%BD%E6%95%B0%E6%A0%88%E5%B8%A7%E3%80%81%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%8E%9F%E7%90%86"><span class="nav-number">4.</span> <span class="nav-text">2.4  函数栈帧、函数调用原理</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E7%9A%84%E6%AD%A5%E9%AA%A4"><span class="nav-number">4.0.1.</span> <span class="nav-text">函数调用的步骤</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E6%AD%A5%E9%AA%A4"><span class="nav-number">4.0.2.</span> <span class="nav-text">函数返回步骤</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA"><span class="nav-number">4.0.3.</span> <span class="nav-text">缓冲区溢出</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%AE%89%E5%85%A8"><span class="nav-number"></span> <span class="nav-text">字符串安全</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E5%B8%B8%E8%A7%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C%E9%94%99%E8%AF%AF"><span class="nav-number"></span> <span class="nav-text">3.1 常见字符串操作错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%BC%8F%E6%B4%9E"><span class="nav-number"></span> <span class="nav-text">字符串漏洞</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA-1"><span class="nav-number">1.</span> <span class="nav-text">缓冲区溢出</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%88%E7%B2%89%E7%A2%8E"><span class="nav-number">2.</span> <span class="nav-text">栈粉碎</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E6%B3%A8%E5%85%A5"><span class="nav-number">3.</span> <span class="nav-text">代码注入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%A7%E6%B3%A8%E5%85%A5"><span class="nav-number">4.</span> <span class="nav-text">弧注入</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%93%E8%A7%A3%E6%8E%AA%E6%96%BD"><span class="nav-number"></span> <span class="nav-text">缓解措施</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="nav-number">1.</span> <span class="nav-text">静态方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E9%AA%8C%E8%AF%81"><span class="nav-number">1.1.</span> <span class="nav-text">输入验证</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#strlcpy-and-strlcat"><span class="nav-number">1.2.</span> <span class="nav-text">strlcpy() and strlcat()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ISO-x2F-IEC-%E2%80%9CSecurity%E2%80%9D-TR-24731"><span class="nav-number">1.3.</span> <span class="nav-text">ISO&#x2F;IEC “Security” TR 24731</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E6%96%B9%E6%B3%95"><span class="nav-number">2.</span> <span class="nav-text">动态方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#SafeStr"><span class="nav-number">2.1.</span> <span class="nav-text">SafeStr</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AE%A1%E7%90%86%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">2.2.</span> <span class="nav-text">管理字符串</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E9%AA%8C"><span class="nav-number">2.3.</span> <span class="nav-text">实验</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%87%E9%92%88%E5%AE%89%E5%85%A8"><span class="nav-number"></span> <span class="nav-text">指针安全</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-number"></span> <span class="nav-text">基本概念</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A6%86%E7%9B%96%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E4%B8%BE%E4%BE%8B"><span class="nav-number">0.1.</span> <span class="nav-text">覆盖函数指针举例</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A6%86%E7%9B%96%E5%AF%B9%E8%B1%A1%E6%8C%87%E9%92%88%E4%B8%BE%E4%BE%8B"><span class="nav-number">0.2.</span> <span class="nav-text">覆盖对象指针举例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%8C%87%E4%BB%A4%E6%8C%87%E9%92%88"><span class="nav-number"></span> <span class="nav-text">修改指令指针</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%8C%87%E4%BB%A4%E6%8C%87%E9%92%88%E7%9A%84%E7%9B%AE%E6%A0%87"><span class="nav-number">1.</span> <span class="nav-text">修改指令指针的目标</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%81%8F%E7%A7%BB%E8%A1%A8"><span class="nav-number">1.1.</span> <span class="nav-text">全局偏移表</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#GOT%E7%89%B9%E7%82%B9"><span class="nav-number">1.1.1.</span> <span class="nav-text">GOT特点</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8GOT"><span class="nav-number">1.1.2.</span> <span class="nav-text">如何利用GOT</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#dtors%E5%8C%BA"><span class="nav-number">1.2.</span> <span class="nav-text">dtors区</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFdtors%E5%8C%BA"><span class="nav-number">1.2.1.</span> <span class="nav-text">什么是dtors区</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8"><span class="nav-number">1.2.2.</span> <span class="nav-text">如何利用</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%99%9A%E5%87%BD%E6%95%B0-1"><span class="nav-number">1.3.</span> <span class="nav-text">虚函数***</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%99%9A%E5%87%BD%E6%95%B0"><span class="nav-number">1.3.1.</span> <span class="nav-text">什么是虚函数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8%E8%99%9A%E5%87%BD%E6%95%B0"><span class="nav-number">1.3.2.</span> <span class="nav-text">如何利用虚函数</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BE%8B%E5%AD%90"><span class="nav-number">1.3.3.</span> <span class="nav-text">例子</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E7%BC%BA%E7%82%B9"><span class="nav-number">1.3.4.</span> <span class="nav-text">缺点</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#atexit-on-exit"><span class="nav-number">1.4.</span> <span class="nav-text">atexit() on_exit</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%88%A9%E7%94%A8%E4%BE%8B%E5%AD%90"><span class="nav-number">1.4.1.</span> <span class="nav-text">利用例子</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#longjmp"><span class="nav-number">1.5.</span> <span class="nav-text">longjmp()</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFlongjmp"><span class="nav-number">1.5.1.</span> <span class="nav-text">什么是longjmp</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8-1"><span class="nav-number">1.5.2.</span> <span class="nav-text">如何利用</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="nav-number">1.6.</span> <span class="nav-text">异常处理***</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8-2"><span class="nav-number">1.6.1.</span> <span class="nav-text">如何利用</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E5%AD%98%E4%BB%BB%E6%84%8F%E5%86%99%E6%8A%80%E6%9C%AF"><span class="nav-number"></span> <span class="nav-text">内存任意写技术</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%93%E8%A7%A3%E6%8E%AA%E6%96%BD-1"><span class="nav-number"></span> <span class="nav-text">缓解措施</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number"></span> <span class="nav-text">总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86"><span class="nav-number"></span> <span class="nav-text">动态内存管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%87%BD%E6%95%B0"><span class="nav-number"></span> <span class="nav-text">动态内存管理函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#C%E6%A0%87%E5%87%86%E5%AE%9A%E4%B9%89%E7%9A%84%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E5%87%BD%E6%95%B0%EF%BC%88%EF%BC%9Falloc%E5%92%8Cfree%EF%BC%89"><span class="nav-number">1.</span> <span class="nav-text">C标准定义的内存分配函数（？alloc和free）</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#calloc"><span class="nav-number">1.1.</span> <span class="nav-text">calloc()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#malloc"><span class="nav-number">1.2.</span> <span class="nav-text">malloc()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#realloc"><span class="nav-number">1.3.</span> <span class="nav-text">realloc()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#free-%E9%87%8A%E6%94%BE%E5%86%85%E5%AD%98"><span class="nav-number">1.4.</span> <span class="nav-text">free()释放内存</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cpp%E6%A0%87%E5%87%86%E7%9A%84%EF%BC%88new%E5%92%8Cdelete%EF%BC%89"><span class="nav-number">2.</span> <span class="nav-text">Cpp标准的（new和delete）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E7%AE%97%E6%B3%95"><span class="nav-number"></span> <span class="nav-text">内存分配算法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E9%94%99%E8%AF%AF"><span class="nav-number"></span> <span class="nav-text">常见内存管理错误</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%94%99%E8%AF%AF"><span class="nav-number">1.</span> <span class="nav-text">初始化错误</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%AA%E6%A3%80%E6%9F%A5%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">2.</span> <span class="nav-text">未检查返回值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%95%E7%94%A8%E5%B7%B2%E9%87%8A%E6%94%BE%E7%9A%84%E5%86%85%E5%AD%98"><span class="nav-number">3.</span> <span class="nav-text">引用已释放的内存</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E5%A4%9A%E6%AC%A1%E9%87%8A%E6%94%BE%E5%86%85%E5%AD%98"><span class="nav-number">4.</span> <span class="nav-text">4. 多次释放内存</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E4%B8%8D%E6%AD%A3%E7%A1%AE%E9%85%8D%E5%AF%B9%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%87%BD%E6%95%B0"><span class="nav-number">5.</span> <span class="nav-text">5. 不正确配对内存管理函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-%E6%9C%AA%E8%83%BD%E5%8C%BA%E5%88%86%E6%A0%87%E9%87%8F%E5%92%8C%E6%95%B0%E7%BB%84"><span class="nav-number">6.</span> <span class="nav-text">6. 未能区分标量和数组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-%E5%88%86%E9%85%8D%E5%87%BD%E6%95%B0%E7%9A%84%E4%B8%8D%E5%BD%93%E4%BD%BF%E7%94%A8"><span class="nav-number">7.</span> <span class="nav-text">7. 分配函数的不当使用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dlmalloc"><span class="nav-number"></span> <span class="nav-text">dlmalloc</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="nav-number">1.</span> <span class="nav-text">基础知识</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9D%97%E7%BB%93%E6%9E%84"><span class="nav-number">1.1.</span> <span class="nav-text">块结构</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%A9%BA%E9%97%B2%E5%9D%97%E7%BB%84%E7%BB%87%E6%96%B9%E5%BC%8F"><span class="nav-number">1.2.</span> <span class="nav-text">空闲块组织方式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A7%A3%E9%93%BE%E6%93%8D%E4%BD%9Cunlink"><span class="nav-number">2.</span> <span class="nav-text">解链操作unlink</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-1"><span class="nav-number">2.0.1.</span> <span class="nav-text">基础知识</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8-3"><span class="nav-number">2.0.2.</span> <span class="nav-text">如何利用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Frontlink%E6%8A%80%E6%9C%AF"><span class="nav-number">3.</span> <span class="nav-text">Frontlink技术</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-2"><span class="nav-number">3.0.1.</span> <span class="nav-text">基础知识</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8-4"><span class="nav-number">3.0.2.</span> <span class="nav-text">如何利用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%8C%E9%87%8D%E9%87%8A%E6%94%BE"><span class="nav-number">4.</span> <span class="nav-text">双重释放</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RTL-Heap-x2F-%E5%A0%86"><span class="nav-number"></span> <span class="nav-text">RTL Heap&#x2F;堆</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84"><span class="nav-number">0.1.</span> <span class="nav-text">使用的数据结构</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%BF%9B%E7%A8%8B%E7%8E%AF%E5%A2%83%E5%9D%97PEB"><span class="nav-number">0.1.1.</span> <span class="nav-text">进程环境块PEB</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E7%A9%BA%E9%97%B2%E9%93%BE%E8%A1%A8"><span class="nav-number">0.1.2.</span> <span class="nav-text">空闲链表</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%8E%E5%A4%87%E7%BC%93%E5%AD%98%E9%93%BE%E8%A1%A8"><span class="nav-number"></span> <span class="nav-text">后备缓存链表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B4%E6%95%B0%E5%AE%89%E5%85%A8"><span class="nav-number"></span> <span class="nav-text">整数安全</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B4%E6%95%B0%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number"></span> <span class="nav-text">整数数据类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B4%E6%95%B0%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="nav-number"></span> <span class="nav-text">整数的转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B4%E6%95%B0%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-number"></span> <span class="nav-text">整数的操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B4%E6%95%B0%E7%9A%84%E6%BC%8F%E6%B4%9E"><span class="nav-number"></span> <span class="nav-text">整数的漏洞</span></a>

    </div>
</div>
            </div>
        
    </div>
</div>


                

            </div>
            
            

        </div>

        <div class="main-content-footer">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info">
            &copy;
            
              <span>2023</span>
              -
            
            2025&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/">lena</a>
        </div>
        
            <script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                    <span id="busuanzi_container_site_uv" class="busuanzi_container_site_uv">
                        访问人数&nbsp;<span id="busuanzi_value_site_uv" class="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="busuanzi_container_site_pv">
                        总访问量&nbsp;<span id="busuanzi_value_site_pv" class="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="theme-info info-item">
            <span class="powered-by-container">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" href="https://hexo.io">Hexo</a> 驱动</span>
                <br>
            <span class="theme-version-container">主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.2.1</a>
        </div>
        
        
        
            <div>
                博客已运行 <span class="odometer" id="runtime_days" ></span> 天 <span class="odometer" id="runtime_hours"></span> 小时 <span class="odometer" id="runtime_minutes"></span> 分钟 <span class="odometer" id="runtime_seconds"></span> 秒
            </div>
        
        
        
            <script async data-pjax>
                try {
                    function odometer_init() {
                    const elements = document.querySelectorAll('.odometer');
                    elements.forEach(el => {
                        new Odometer({
                            el,
                            format: '( ddd).dd',
                            duration: 200
                        });
                    });
                    }
                    odometer_init();
                } catch (error) {}
            </script>
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
            <li class="go-comment">
                <i class="fa-regular fa-comments"></i>
            </li>
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-expand-width flex-center">
            <i class="fa-regular fa-expand"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    


</main>




<script src="/js/utils.js"></script>

<script src="/js/main.js"></script>

<script src="/js/layouts/navbarShrink.js"></script>

<script src="/js/tools/scrollTopBottom.js"></script>

<script src="/js/tools/lightDarkSwitch.js"></script>



    
<script src="/js/tools/localSearch.js"></script>




    
<script src="/js/tools/codeBlock.js"></script>




    
<script src="/js/layouts/lazyload.js"></script>




    
<script src="/js/tools/runtime.js"></script>

    
<script src="/js/libs/odometer.min.js"></script>

    
<link rel="stylesheet" href="/assets/odometer-theme-minimal.css">




  
<script src="/js/libs/Typed.min.js"></script>

  
<script src="/js/plugins/typed.js"></script>







<div class="post-scripts pjax">
    
        
<script src="/js/tools/tocToggle.js"></script>

<script src="/js/libs/anime.min.js"></script>

<script src="/js/layouts/toc.js"></script>

<script src="/js/plugins/tabs.js"></script>

    
</div>


    
<script src="/js/libs/pjax.min.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax',
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            Global.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            Global.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            Global.refresh();
        });
    });
</script>




</body>
</html>
