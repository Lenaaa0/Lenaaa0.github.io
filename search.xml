<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hello World</title>
    <url>/2023/07/075388a72a39.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><p>Welcome to <a class="link" href="https://hexo.io/">Hexo <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>! This is your very first post. Check <a class="link" href="https://hexo.io/docs/">documentation <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> for more info. If you get any problems when using Hexo, you can find the answer in <a class="link" href="https://hexo.io/docs/troubleshooting.html">troubleshooting <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a> or you can ask me on <a class="link" href="https://github.com/hexojs/hexo/issues">GitHub <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></tbody></table></figure></div>

<p>More info: <a class="link" href="https://hexo.io/docs/writing.html">Writing <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></tbody></table></figure></div>

<p>More info: <a class="link" href="https://hexo.io/docs/server.html">Server <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></tbody></table></figure></div>

<p>More info: <a class="link" href="https://hexo.io/docs/generating.html">Generating <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><div class="highlight-container" data-rel="Bash"><figure class="iseeu highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></tbody></table></figure></div>

<p>More info: <a class="link" href="https://hexo.io/docs/one-command-deployment.html">Deployment <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
]]></content>
      <categories>
        <category>å˜¿å˜¿</category>
      </categories>
  </entry>
  <entry>
    <title>build my blog</title>
    <url>/2023/07/122701f1f353.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h3 id="åŸºæœ¬é…ç½®"><a href="#åŸºæœ¬é…ç½®" class="headerlink" title="åŸºæœ¬é…ç½®"></a>åŸºæœ¬é…ç½®</h3><p>æ•™ç¨‹ï¼Œå€Ÿç”¨llqçš„åšå®¢<a class="link" href="https://xmnsatay.github.io/2023/02/26/%E8%AE%B0%E5%BD%95%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">https://xmnsatay.github.io/2023/02/26/%E8%AE%B0%E5%BD%95%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/ <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h3 id="è¸©å‘"><a href="#è¸©å‘" class="headerlink" title="è¸©å‘"></a>è¸©å‘</h3><ul>
<li>hexo-då‡ºé”™<ul>
<li>è§£å†³ï¼šllqè¯´æ²¡ä¸‹è½½hexo-deployer-git<ul>
<li>npm install hexo-deployer-git â€“save</li>
</ul>
</li>
</ul>
</li>
<li>å›¾ç‰‡åªèƒ½åœ¨æœ¬åœ°æŸ¥çœ‹ï¼Œè¿˜ä¸ä¼šæ·»åŠ å›¾åºŠ<ul>
<li>è§£å†³ï¼šç”¨äº†èšåˆå›¾åºŠï¼Œåç»­å¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨é˜¿é‡Œäº‘oss</li>
<li>æ”¾ä¸ªç½‘å€<a class="link" href="https://cursorhu.github.io/2022/02/28/%E6%90%AD%E5%BB%BA%E9%AB%98%E5%8F%AF%E7%A7%BB%E6%A4%8D%E7%9A%84Markdown%E5%86%99%E4%BD%9C%E5%92%8C%E5%8D%9A%E5%AE%A2%E7%8E%AF%E5%A2%83%EF%BC%9AObsidian+PicGo+Hexo+Github/">æ­å»ºé«˜å¯ç§»æ¤çš„Markdownå†™ä½œå’Œåšå®¢ç¯å¢ƒï¼šObsidian+PicGo+Hexo+Github | ThinkNotes (cursorhu.github.io) <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></li>
<li><a class="link" href="https://zhuanlan.zhihu.com/p/104152479">é˜¿é‡Œäº‘OSS PicGo é…ç½®å›¾åºŠæ•™ç¨‹ è¶…è¯¦ç»† - çŸ¥ä¹ (zhihu.com) <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></li>
</ul>
</li>
<li>å­˜æ”¾è¿™ä¸ªåšå®¢çš„ä»“åº“åå­—ä¸€å¼€å§‹è·Ÿgithubç”¨æˆ·åä¸åŒ<ul>
<li>è§£å†³ï¼šä»“åº“åå­—æ”¹æˆäº†ç”¨æˆ·å</li>
<li>ç–‘é—®ï¼šä»“åº“åå­—è®¾ç½®ä¸ºç”¨æˆ·åä¸€å®šå¯ä»¥ä¿è¯åç»­åšå®¢åŸŸåçš„å”¯ä¸€æ€§å—ï¼ŸåŸŸåä¸åŒºåˆ†å¤§å°å†™ï¼Œç„¶ååé¢ä¸€æœå‘ç°githubçš„ç”¨æˆ·åä¹Ÿä¸åŒºåˆ†å¤§å°å†™å“ˆå“ˆå“ˆğŸ¤£</li>
</ul>
</li>
<li>æˆåŠŸé€šè¿‡åŸŸåè®¿é—®åˆ°åšå®¢åï¼Œæ˜¾ç¤ºçš„ç•Œé¢åªæœ‰æˆ‘çš„ä»“åº“åç§°<ul>
<li>è§£å†³ï¼šhexo cleanåå†é‡æ–°æ“ä½œï¼Œä¸çŸ¥é“ä¸ºå•¥ï¼Ÿ</li>
</ul>
</li>
<li>vscodeå†™markdownä¸ä¸æ»‘ï¼Œå‡†å¤‡æ¢æˆobsidian<ul>
<li>æ”¾ä¸ªæ•™ç¨‹<a class="link" href="https://blog.esunr.xyz/2022/07/e9b42b453d9f.html#3-2-%E4%BD%BF%E7%94%A8-Obsidian-%E6%A8%A1%E6%9D%BF%E5%BF%AB%E9%80%9F%E5%88%9B%E5%BB%BA%E6%96%87%E7%AB%A0">Hexo + Obsidian + Git å®Œç¾çš„åšå®¢éƒ¨ç½²ä¸ç¼–è¾‘æ–¹æ¡ˆ | EsunR-Blog <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></li>
<li>å­˜åœ¨çš„é—®é¢˜ï¼šæŒ‰ç…§ä¸Šè¿°æ–¹æ¡ˆä¼˜åŒ–ï¼Œåœ¨obé‡Œåˆ›å»ºæ–‡ä»¶å¤¹ååœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºæ–‡ä»¶ï¼Œå¯è‡ªåŠ¨åˆ†ç±»è¡¥å…¨categoriesï¼Œä½†æ˜¯åç»­æƒ³è¦ä¿®æ”¹åˆ†ç±»çš„æ—¶å€™ä¼šè‡ªåŠ¨å˜å›åŸæ¥çš„categoriesï¼Œå³ä¿®æ”¹ä¸äº†ï¼ŒçŒœæƒ³å¯èƒ½æ˜¯å› ä¸ºè‡ªåŠ¨åˆ†ç±»æ’ä»¶ï¼Œç›®å‰è¿˜æœªè§£å†³</li>
</ul>
</li>
<li>é…ç½®ymlæ–‡ä»¶ç»å¸¸å‡ºé”™<ul>
<li>å¤šæ³¨æ„ç¼©è¿›</li>
</ul>
</li>
</ul>
<h3 id="é…ç½®ä¸»é¢˜"><a href="#é…ç½®ä¸»é¢˜" class="headerlink" title="é…ç½®ä¸»é¢˜"></a>é…ç½®ä¸»é¢˜</h3><p>æ”¾ä¸ªredefineçš„å®˜æ–¹æ–‡æ¡£ <a class="link" href="https://redefine-docs.ohevan.com/">Theme Redefine Docs - Redefine Docs (ohevan.com) <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<h3 id="é¼“åŠ±è‡ªå·±"><a href="#é¼“åŠ±è‡ªå·±" class="headerlink" title="é¼“åŠ±è‡ªå·±"></a>é¼“åŠ±è‡ªå·±</h3><p>æ­åšå®¢æœ‰ç‚¹éº»çƒ¦ï¼Œå¸Œæœ›æˆ‘èƒ½å¥½å¥½è®°å½•ä¸‹å»ï¼Œæˆ–è€…è¯´åœ¨è¿™é‡Œå‚¨å­˜å‚¨å­˜æˆ‘çš„ç¬”è®°å“ˆå“ˆå“ˆå“ˆğŸ˜€</p>
<pre><code>&lt;!--more--&gt;
</code></pre>
]]></content>
      <categories>
        <category>å®æ“è®°å½•</category>
      </categories>
      <tags>
        <tag>æ­åšå®¢</tag>
        <tag>è¸©å‘</tag>
      </tags>
  </entry>
  <entry>
    <title>12.2æ‚è°ˆ</title>
    <url>/2023/12/3d52ef79bb83.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>å‘ƒå‘ƒå‘ƒæˆ‘å†™åšå®¢çš„å°±è·Ÿå†™æ—¥è®°ä¸€æ ·ä¸‰åˆ†é’Ÿçƒ­åº¦</p>
]]></content>
      <categories>
        <category>Ñ‚Ñâ•ªĞ³</category>
      </categories>
      <tags>
        <tag>æ—¥è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>7.13æ‚è°ˆ</title>
    <url>/2023/07/f38d710a42eb.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>å‰å¤©æ˜¨å¤©ç®€å•åœ°å»ºèµ·äº†åšå®¢ï¼Œè™½ç„¶ç¢°åˆ°äº†å¾ˆå¤šå¥‡æ€ªçš„é—®é¢˜ğŸ˜¢<br>è€Œä¸”è™½ç„¶åˆ©ç”¨obåŠ å›¾åºŠå¯ä»¥å¾ˆå¥½åœ°ç¼–è¾‘äº†ï¼ˆæ’é™¤äº†hexo-renderer-markedæ–¹æ¡ˆï¼Œå› ä¸ºæˆ‘ä¸ç”¨hexo newæŒ‡ä»¤ï¼Œç›´æ¥åœ¨obé‡Œåˆ›å»ºæ–‡ä»¶ï¼‰ä½†æ˜¯åœ¨ç¼–è¾‘åœ°æ—¶å€™ï¼Œä¸èƒ½ç›´æ¥é¢„è§ˆå›¾ç‰‡ï¼ŒæŠ“è€³æŒ è…®.jpgï¼Œå¸Œæœ›åç»­å¯ä»¥è§£å†³<br>æ˜¨å¤©è¿˜æ·»åŠ äº†æˆ‘çš„ç½‘æ˜“äº‘æ­Œå•ï¼Œè¯è¯´è¿™æ ·å²‚ä¸æ˜¯å¯ä»¥ä¸ä»˜è´¹å¬ä»˜è´¹åœ°æ­Œäº†ï¼ˆå› ä¸ºç”¨çš„æ˜¯æˆ‘çš„idï¼‰å¥½åƒæœ‰ç‚¹å±é™©</p>
]]></content>
      <categories>
        <category>Ñ‚Ñâ•ªĞ³</category>
      </categories>
      <tags>
        <tag>æ—¥è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿ç§»åšå®¢ï¼ŒobsidianåŠå›¾ç‰‡è·¯å¾„ç›¸å…³é—®é¢˜</title>
    <url>/2025/03/3ab441bd3ff9.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><div class="highlight-container" data-rel="Plaintext"><figure class="iseeu highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">å‘ç°æŠ¥é”™ï¼š</span><br><span class="line"></span><br><span class="line">```text</span><br><span class="line">ERROR Deployer not found: git</span><br></pre></td></tr></tbody></table></figure></div>

<p>åªéœ€è¦å®‰è£…ï¼š</p>
<div class="highlight-container" data-rel="Text"><figure class="iseeu highlight text"><table><tbody><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></tbody></table></figure></div>

<p>å¦å¤–ä¿©æŠ¥é”™</p>
<p> sshè¿æ¥æ–¹å¼åŠConnection closed by 198.xx.xx.xx port 22é”™è¯¯è§£å†³<br><a class="link" href="https://blog.csdn.net/m0_60340438/article/details/141273109">https://blog.csdn.net/m0_60340438/article/details/141273109 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a><br>Nunjucks Error: è§£å†³æ–¹æ¡ˆ<br><a class="link" href="https://blog.csdn.net/weixin_45333934/article/details/108274320">https://blog.csdn.net/weixin_45333934/article/details/108274320 <i class="fa-regular fa-arrow-up-right-from-square fa-sm"></i></a></p>
<p>éœ€æ±‚ï¼š</p>
<ol>
<li>å›¾ç‰‡æ˜¾ç¤º<ul>
<li>æ¯”è¾ƒç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„</li>
<li>å›¾ç‰‡å¿…é¡»åœ¨source/imagesä¸‹æ‰èƒ½æ˜¾ç¤ºï¼Œå¦åˆ™ä¸ç®¡ä»€ä¹ˆç›¸å¯¹è·¯å¾„éƒ½ä¸ç®¡ç”¨ï¼ˆæ˜¯ä¸æ˜¯ä¸»é¢˜çš„é—®é¢˜ï¼Ÿçƒ¦æ­»å•¦å“ˆå“ˆï¼‰</li>
</ul>
</li>
<li>æ‰€æœ‰çš„ç¬”è®°éƒ½åœ¨å­¦ä¹ ä»“åº“é‡Œï¼Œä¸å¯èƒ½å•ç‹¬åœ¨åšå®¢ä»“åº“ä¸‹ç¼–è¾‘ï¼Œæ‰€ä»¥éœ€è¦ä»å­¦ä¹ ä»“åº“é‡ŒæŠŠç¬”è®°å’Œå›¾ç‰‡éƒ½ä¼ åˆ°åšå®¢ä»“åº“<ul>
<li>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨obsidianæ’ä»¶envelopeï¼Œå°†å­¦ä¹ ä»“åº“ä¸­çš„ç¬”è®°ä¸Šä¼ å†pullï¼Œç„¶åå†æ‰§è¡Œhexo d -gï¼ˆåç»­è¦è€ƒè™‘è‡ªåŠ¨åŒ–ï¼‰</li>
<li>é—®é¢˜ï¼šè¯¥æ’ä»¶æ‰€æœ‰çš„æ–‡ç« éƒ½è¢«ä¼ åˆ°åŒä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå³ä¸èƒ½å›¾ç‰‡å•ç‹¬ä¼ åˆ°source/imagesä¸‹ï¼Œå°±ç®—pullåæ‰‹åŠ¨å°†å›¾ç‰‡ç§»åˆ°imagesä¸‹ï¼Œæ–‡ç« çš„å›¾ç‰‡è·¯å¾„ï¼ˆå­¦ä¹ ä»“åº“é‡Œçš„ç›¸å¯¹è·¯å¾„ï¼‰æ²¡æ³•æ”¹æˆåšå®¢ä»“åº“çš„ç›¸å¯¹è·¯å¾„ã€‚ã€‚ã€‚</li>
</ul>
</li>
</ol>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020250306201923.png"><br><img lazyload="" src="/images/loading.svg" data-src="/Pasted%20image%2020250308170256.png"></p>
]]></content>
      <categories>
        <category>å˜¿å˜¿</category>
      </categories>
  </entry>
  <entry>
    <title></title>
    <url>/2025/03/a1a6e95e6be5.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>lalalla<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020250308210432.png"></p>
]]></content>
  </entry>
  <entry>
    <title>Lab4-3åŒæ€åŠ å¯†å®éªŒ</title>
    <url>/2025/03/0449522b56bb.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>è¿™ä¸€ç¯‡æµ‹è¯•ä¸€ä¸‹ç§»åŠ¨å›¾ç‰‡+æ‰¹é‡æ”¹å›¾ç‰‡å†…é“¾è„šæœ¬</p>
<h1 id="Lab4-3åŒæ€åŠ å¯†å®éªŒ"><a href="#Lab4-3åŒæ€åŠ å¯†å®éªŒ" class="headerlink" title="Lab4-3åŒæ€åŠ å¯†å®éªŒ"></a>Lab4-3åŒæ€åŠ å¯†å®éªŒ</h1><ul>
<li><p>è¯¾ç¨‹ï¼šå¤§æ•°æ®å®‰å…¨</p>
</li>
<li><p>ç»„å·ï¼šç¬¬9ç»„</p>
</li>
<li><p>æˆå‘˜ï¼šç‹é›¨è¾° 2022211650    æå­œç‚ 2022211651    è‚–å£¹å¤« 2022211655    å¾åŒä¸€ 2022211657    å¼ ä¸½å¨œ 2022211673</p>
</li>
</ul>
<p>	</p>
<p><strong>å®éªŒå†…å®¹ï¼š</strong><br>åŒæ€åŠ å¯†æ¨¡å—æ˜¯æ•°æ®å®‰å…¨æ•™å­¦å®éªŒä¸­çš„ä¸€ä¸ªé‡è¦æ¨¡å—ï¼Œå…·ä½“åŠŸèƒ½åŒ…æ‹¬PaillieråŠ æ³•åŒæ€åŠ å¯†ç®—æ³•çš„<strong>å®ç°</strong>ã€åŠ æ³•åŒæ€åŠ å¯†ç®—æ³•ä¸å…¸å‹çš„å…¨åŒæ€åŠ å¯†ç®—æ³•ä¹‹é—´<strong>æ€§èƒ½æ¯”è¾ƒåˆ†æ</strong>ã€åŸºäºå®‰å…¨ç­‰çº§çš„<strong>å¯†é’¥é•¿åº¦é€‰å–æ–¹æ³•</strong>ã€ç»å…¸é—®é¢˜ï¼ˆå¹³å‡å·¥èµ„é—®é¢˜ï¼‰çš„<strong>ç¼–ç¨‹å®ç°</strong></p>
<h2 id="1-PaillieråŠ æ³•åŒæ€åŠ å¯†ç®—æ³•çš„å®ç°"><a href="#1-PaillieråŠ æ³•åŒæ€åŠ å¯†ç®—æ³•çš„å®ç°" class="headerlink" title="1. PaillieråŠ æ³•åŒæ€åŠ å¯†ç®—æ³•çš„å®ç°"></a>1. PaillieråŠ æ³•åŒæ€åŠ å¯†ç®—æ³•çš„å®ç°</h2><h6 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h6><ul>
<li><strong>ç”Ÿæˆå¯†é’¥å¯¹</strong>ï¼šPaillieråŠ å¯†ç®—æ³•éœ€è¦ç”Ÿæˆå…¬é’¥å’Œç§é’¥ã€‚é¦–å…ˆéœ€è¦é€‰æ‹©ä¸¤ä¸ªå¤§ç´ æ•°på’Œ qï¼Œè®¡ç®— n=pÃ—qï¼Œç„¶åè®¡ç®— Î»=lcm(pâˆ’1,qâˆ’1)ï¼Œç”Ÿæˆå…¬é’¥ (n,g)å’Œç§é’¥ Î»ã€‚</li>
<li><strong>åŠ å¯†</strong>ï¼šé€‰æ‹©ä¸€ä¸ªæ˜æ–‡ mï¼Œç„¶åè®¡ç®—åŠ å¯†å¯†æ–‡ c:$$c=g^m\times r^n  \  mod\  n^2$$å…¶ä¸­ï¼Œr æ˜¯ä¸€ä¸ªéšæœºæ•°ï¼Œä¸” réœ€è¦æ»¡è¶³ä¸ näº’è´¨ã€‚</li>
<li><strong>åŠ æ³•åŒæ€æ€§</strong>ï¼šPaillieråŠ å¯†æ”¯æŒåŠ æ³•åŒæ€æ€§ï¼Œå³å¯¹äºä¸¤ä¸ªåŠ å¯†å€¼ $c_1$å’Œ $c_2$ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ“ä½œè®¡ç®—åŠ å¯†åçš„ç»“æœï¼š$$c_1 \times c_2 \mod n^2 = \text{Enc}(m_1 + m_2)$$è¿™æ ·ï¼Œåœ¨åŠ å¯†åçš„æ•°æ®ä¸Šç›´æ¥è¿›è¡Œä¹˜æ³•æ“ä½œï¼Œè§£å¯†åå³ä¸ºæ˜æ–‡ç›¸åŠ çš„ç»“æœã€‚</li>
<li><strong>è§£å¯†</strong>ï¼šä½¿ç”¨ç§é’¥ Î» è§£å¯†å¯†æ–‡ï¼š$$m = \frac{L(c^\lambda \mod n^2)}{L(g^\lambda \mod n^2)} \mod n$$å…¶ä¸­ï¼Œ$L(x) = \frac{x - 1}{n}$æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å‡½æ•°ã€‚</li>
</ul>
<h6 id="éªŒè¯ï¼š"><a href="#éªŒè¯ï¼š" class="headerlink" title="éªŒè¯ï¼š"></a><strong>éªŒè¯ï¼š</strong></h6><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> phe <span class="keyword">import</span> paillier  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">paillier_homomorphic_addition</span>():  </span><br><span class="line">    <span class="comment"># ç”Ÿæˆ Paillier å¯†é’¥å¯¹  </span></span><br><span class="line">    public_key, private_key = paillier.generate_paillier_keypair()  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># æ˜æ–‡æ•°  </span></span><br><span class="line">    m1 = <span class="number">100</span>  </span><br><span class="line">    m2 = <span class="number">200</span>  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># ä½¿ç”¨å…¬é’¥åŠ å¯†æ˜æ–‡æ•°  </span></span><br><span class="line">    encrypted1 = public_key.encrypt(m1)  </span><br><span class="line">    encrypted2 = public_key.encrypt(m2)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># åŒæ€åŠ æ³•ï¼ˆå¯¹åŠ å¯†çš„æ•°è¿›è¡ŒåŠ æ³•è¿ç®—ï¼‰  </span></span><br><span class="line">    encrypted_sum = encrypted1 + encrypted2  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># ä½¿ç”¨ç§é’¥è§£å¯†åŒæ€åŠ æ³•ç»“æœ  </span></span><br><span class="line">    decrypted_sum = private_key.decrypt(encrypted_sum)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è¾“å‡ºç»“æœ  </span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"Decrypted sum: <span class="subst">{decrypted_sum}</span>"</span>)  <span class="comment"># åº”è¯¥è¾“å‡º 300  </span></span><br><span class="line"><span class="comment"># æ‰§è¡ŒåŒæ€åŠ æ³•  </span></span><br><span class="line">paillier_homomorphic_addition()</span><br></pre></td></tr></tbody></table></figure></div>
<p>![[./Pasted image 20241115232100.png|Pasted image 20241115232100]]</p>
<hr>
<h2 id="2-åŠ æ³•åŒæ€åŠ å¯†ç®—æ³•ä¸å…¸å‹çš„å…¨åŒæ€åŠ å¯†ç®—æ³•ä¹‹é—´æ€§èƒ½æ¯”è¾ƒåˆ†æ"><a href="#2-åŠ æ³•åŒæ€åŠ å¯†ç®—æ³•ä¸å…¸å‹çš„å…¨åŒæ€åŠ å¯†ç®—æ³•ä¹‹é—´æ€§èƒ½æ¯”è¾ƒåˆ†æ" class="headerlink" title="2. åŠ æ³•åŒæ€åŠ å¯†ç®—æ³•ä¸å…¸å‹çš„å…¨åŒæ€åŠ å¯†ç®—æ³•ä¹‹é—´æ€§èƒ½æ¯”è¾ƒåˆ†æ"></a>2. åŠ æ³•åŒæ€åŠ å¯†ç®—æ³•ä¸å…¸å‹çš„å…¨åŒæ€åŠ å¯†ç®—æ³•ä¹‹é—´æ€§èƒ½æ¯”è¾ƒåˆ†æ</h2><p>è¿›è¡Œ åŠ æ³•åŒæ€åŠ å¯†ç®—æ³•ï¼ˆå¦‚ Paillierï¼‰ä¸ <strong>å…¸å‹çš„å…¨åŒæ€åŠ å¯†ç®—æ³•</strong>ï¼ˆå¦‚ BFVã€CKKS ç­‰ï¼‰çš„æ€§èƒ½æ¯”è¾ƒåˆ†æï¼Œæ¶‰åŠå¤šä¸ªæ–¹é¢çš„è€ƒé‡ï¼ŒåŒ…æ‹¬åŠ å¯†/è§£å¯†é€Ÿåº¦ã€åŒæ€è¿ç®—çš„æ•ˆç‡ã€å¯†æ–‡å¤§å°ã€é€‚ç”¨åœºæ™¯ç­‰ã€‚å…¨åŒæ€åŠ å¯†ï¼ˆFHEï¼ŒFully Homomorphic Encryptionï¼‰æ˜¯æ”¯æŒåŠ æ³•å’Œä¹˜æ³•ç­‰å¤šç§åŒæ€æ“ä½œçš„åŠ å¯†æ–¹æ¡ˆï¼Œè€ŒåŠ æ³•åŒæ€åŠ å¯†ï¼ˆå¦‚ Paillierï¼‰åªæ”¯æŒåŠ æ³•æ“ä½œã€‚</p>
<h4 id="2-1-åŠ è§£å¯†é€Ÿåº¦æ¯”è¾ƒåˆ†æ"><a href="#2-1-åŠ è§£å¯†é€Ÿåº¦æ¯”è¾ƒåˆ†æ" class="headerlink" title="2.1 åŠ è§£å¯†é€Ÿåº¦æ¯”è¾ƒåˆ†æ"></a>2.1 åŠ è§£å¯†é€Ÿåº¦æ¯”è¾ƒåˆ†æ</h4><ul>
<li><strong>åŠ æ³•åŒæ€åŠ å¯†ï¼ˆå¦‚ Paillierï¼‰ï¼š</strong><ul>
<li>Paillier åŠ å¯†ç®—æ³•åªæ”¯æŒåŠ æ³•åŒæ€è¿ç®—ï¼Œå› æ­¤åŠ å¯†å’Œè§£å¯†é€Ÿåº¦ç›¸å¯¹è¾ƒå¿«ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤§æ‰¹é‡æ•°æ®æ—¶ï¼Œæ•ˆç‡è¾ƒé«˜ã€‚</li>
<li>åŠ å¯†æ“ä½œé€šå¸¸æ˜¯åŸºäºæŒ‡æ•°è¿ç®—ï¼Œè§£å¯†æ“ä½œç›¸å¯¹è¾ƒç®€å•ï¼Œé€šå¸¸æ¶‰åŠä¸€ä¸ªæ¨¡é€†è¿ç®—ã€‚</li>
<li>ç”±äºåªæ”¯æŒåŠ æ³•ï¼ŒåŒæ€åŠ æ³•æ“ä½œé€šå¸¸æ¯”è¾ƒå¿«é€Ÿï¼Œé€‚åˆå¤„ç†ä¸€äº›å¯¹åŠ æ³•æ¯”è¾ƒå¯†é›†çš„ä»»åŠ¡ï¼ˆå¦‚ç»Ÿè®¡è®¡ç®—ã€éšç§ä¿æŠ¤çš„åŠ æ³•æ“ä½œç­‰ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>å…¨åŒæ€åŠ å¯†ï¼ˆå¦‚ BFVã€CKKSï¼‰ï¼š</strong><ul>
<li>å…¨åŒæ€åŠ å¯†æ”¯æŒåŠ æ³•ã€ä¹˜æ³•ã€ä»¥åŠæ›´å¤šå¤æ‚çš„è¿ç®—ï¼Œå› æ­¤å…¶åŠ å¯†å’Œè§£å¯†çš„è®¡ç®—å¤æ‚åº¦è¾ƒé«˜ã€‚</li>
<li>åœ¨æ”¯æŒå¤šç§åŒæ€è¿ç®—æ—¶ï¼Œè§£å¯†è¿‡ç¨‹å¾€å¾€éœ€è¦å¤šæ¬¡å¯†æ–‡è§£å‹ã€å½’çº¦å’Œè§£å¯†ï¼Œè®¡ç®—è´Ÿæ‹…è¾ƒå¤§ã€‚</li>
<li>ç”±äºå…¨åŒæ€åŠ å¯†æ”¯æŒå¤šç§è¿ç®—ï¼Œå®ƒçš„åŠ å¯†å’Œè§£å¯†æ—¶é—´ä¼šæ˜¾è‘—å¤§äºåŠ æ³•åŒæ€åŠ å¯†ã€‚</li>
</ul>
</li>
</ul>
<h6 id="ä»£ç ï¼ˆä½¿ç”¨pheåº“ç‰ˆï¼‰"><a href="#ä»£ç ï¼ˆä½¿ç”¨pheåº“ç‰ˆï¼‰" class="headerlink" title="ä»£ç ï¼ˆä½¿ç”¨pheåº“ç‰ˆï¼‰"></a>ä»£ç ï¼ˆä½¿ç”¨pheåº“ç‰ˆï¼‰</h6><p>compare.py</p>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time  </span><br><span class="line"><span class="keyword">import</span> phe  </span><br><span class="line"><span class="keyword">import</span> tenseal <span class="keyword">as</span> ts  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># ======================= ä¼˜åŒ–åçš„ Paillier åŠ æ³•åŒæ€åŠ è§£å¯† =======================def paillier_encryption_batch(values):  </span></span><br><span class="line">    <span class="comment"># åˆ›å»º Paillier å¯†é’¥å¯¹  </span></span><br><span class="line">    public_key, private_key = phe.generate_paillier_keypair()  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># æ‰¹é‡åŠ å¯†æ•°æ®  </span></span><br><span class="line">    encrypted_values = [public_key.encrypt(value) <span class="keyword">for</span> value <span class="keyword">in</span> values]  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># åŒæ€åŠ æ³•  </span></span><br><span class="line">    encrypted_sum = encrypted_values[<span class="number">0</span>]  </span><br><span class="line">    <span class="keyword">for</span> enc_value <span class="keyword">in</span> encrypted_values[<span class="number">1</span>:]:  </span><br><span class="line">        encrypted_sum += enc_value  <span class="comment"># æ‰¹é‡åŠ æ³•  </span></span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> encrypted_sum, public_key, private_key  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">paillier_decryption</span>(<span class="params">encrypted_value, private_key</span>):  </span><br><span class="line">    <span class="comment"># è§£å¯†æ•°æ®  </span></span><br><span class="line">    decrypted_value = private_key.decrypt(encrypted_value)  </span><br><span class="line">    <span class="keyword">return</span> decrypted_value  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># ======================= å…¨åŒæ€åŠ è§£å¯†ï¼ˆTenSEAL - CKKSï¼‰ =======================def full_homomorphic_encryption(value1, value2, context):  </span></span><br><span class="line">    <span class="comment"># åˆ›å»º CKKS å‘é‡å¹¶åŠ å¯†  </span></span><br><span class="line">    encrypted_value1 = ts.ckks_vector(context, [value1])  </span><br><span class="line">    encrypted_value2 = ts.ckks_vector(context, [value2])  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># åŒæ€åŠ æ³•  </span></span><br><span class="line">    encrypted_sum = encrypted_value1 + encrypted_value2  </span><br><span class="line">    <span class="keyword">return</span> encrypted_sum  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">full_homomorphic_decryption</span>(<span class="params">encrypted_value, secret_key</span>):  </span><br><span class="line">    <span class="comment"># è§£å¯†æ•°æ®  </span></span><br><span class="line">    decrypted_value = encrypted_value.decrypt(secret_key)  </span><br><span class="line">    <span class="keyword">return</span> decrypted_value[<span class="number">0</span>]  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># ======================= å®éªŒä»£ç ï¼šæ¯”è¾ƒåŠ æ³•åŒæ€å’Œå…¨åŒæ€åŠ è§£å¯†é€Ÿåº¦ =======================# Paillier åŠ æ³•åŒæ€åŠ è§£å¯†ï¼ˆä¼˜åŒ–ç‰ˆï¼‰  </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">paillier_test</span>():  </span><br><span class="line">    <span class="comment"># æµ‹è¯•æ•°æ®  </span></span><br><span class="line">    values = [<span class="number">15</span>, <span class="number">20</span>]  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è®¡æ—¶  </span></span><br><span class="line">    start_time = time.time()  </span><br><span class="line">    encrypted_sum, public_key, private_key = paillier_encryption_batch(values)  </span><br><span class="line">    decrypted_sum = paillier_decryption(encrypted_sum, private_key)  </span><br><span class="line">    end_time = time.time()  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è¾“å‡º Paillier åŠ è§£å¯†ç»“æœ  </span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"Paillier åŠ è§£å¯†æ—¶é—´: <span class="subst">{end_time - start_time}</span> ç§’"</span>)  </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"Paillier è§£å¯†ç»“æœ: <span class="subst">{decrypted_sum}</span>"</span>)  </span><br><span class="line">    <span class="keyword">return</span> end_time - start_time  <span class="comment"># è¿”å›åŠ è§£å¯†æ—¶é—´  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># å…¨åŒæ€åŠ è§£å¯†ï¼ˆTenSEAL - CKKSï¼‰  </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">full_homomorphic_test</span>():  </span><br><span class="line">    <span class="comment"># åˆ›å»º TenSEAL ä¸Šä¸‹æ–‡ï¼Œåˆå§‹åŒ–åŠ å¯†å‚æ•°  </span></span><br><span class="line">    context = ts.context(ts.SCHEME_TYPE.CKKS, poly_modulus_degree=<span class="number">8192</span>, coeff_mod_bit_sizes=[<span class="number">60</span>, <span class="number">40</span>, <span class="number">60</span>])  </span><br><span class="line">    context.global_scale = <span class="number">2</span>**<span class="number">40</span>  <span class="comment"># è®¾ç½® global scale    context.generate_galois_keys()  # ç”Ÿæˆ Galois å¯†é’¥  </span></span><br><span class="line">    secret_key = context.secret_key()  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># æµ‹è¯•æ•°æ®  </span></span><br><span class="line">    value1, value2 = <span class="number">15</span>, <span class="number">20</span>  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è®¡æ—¶  </span></span><br><span class="line">    start_time = time.time()  </span><br><span class="line">    encrypted_sum = full_homomorphic_encryption(value1, value2, context)  </span><br><span class="line">    decrypted_sum = full_homomorphic_decryption(encrypted_sum, secret_key)  </span><br><span class="line">    end_time = time.time()  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è¾“å‡º TenSEAL åŠ è§£å¯†ç»“æœ  </span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"å…¨åŒæ€åŠ è§£å¯†æ—¶é—´: <span class="subst">{end_time - start_time}</span> ç§’"</span>)  </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"å…¨åŒæ€è§£å¯†ç»“æœ: <span class="subst">{decrypted_sum}</span>"</span>)  </span><br><span class="line">    <span class="keyword">return</span> end_time - start_time  <span class="comment"># è¿”å›åŠ è§£å¯†æ—¶é—´  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># ======================= ä¸»ç¨‹åºï¼šæ¯”è¾ƒ Paillier å’Œ TenSEAL çš„æ€§èƒ½ =======================if __name__ == "__main__":  </span></span><br><span class="line">    <span class="comment"># æ¯”è¾ƒåŠ æ³•åŒæ€åŠ è§£å¯†æ—¶é—´ï¼ˆPaillierï¼‰  </span></span><br><span class="line">    paillier_time = paillier_test()  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># æ¯”è¾ƒå…¨åŒæ€åŠ è§£å¯†æ—¶é—´ï¼ˆTenSEALï¼‰  </span></span><br><span class="line">    full_homomorphic_time = full_homomorphic_test()  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è¾“å‡ºå¯¹æ¯”ç»“æœ  </span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"\nå®éªŒç»“æœï¼š"</span>)  </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"Paillier åŠ æ³•åŒæ€åŠ è§£å¯†æ—¶é—´: <span class="subst">{paillier_time}</span> ç§’"</span>)  </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"å…¨åŒæ€åŠ è§£å¯†æ—¶é—´ (TenSEAL): <span class="subst">{full_homomorphic_time}</span> ç§’"</span>)</span><br></pre></td></tr></tbody></table></figure></div>

<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241118154833.png"></p>
<h6 id="ä»£ç ï¼ˆgmpy2ï¼‰"><a href="#ä»£ç ï¼ˆgmpy2ï¼‰" class="headerlink" title="ä»£ç ï¼ˆgmpy2ï¼‰"></a>ä»£ç ï¼ˆgmpy2ï¼‰</h6><p>compare2.py<br>è¿™ä¸ªç‰ˆæœ¬ä½¿ç”¨gmpy2åº“è‡ªå®šä¹‰å®ç°paillierï¼Œç›¸æ¯”äºä¸Šä¸ªç‰ˆæœ¬ä½¿ç”¨pheåº“æ ‡å‡†çš„paillierå®ç°ï¼ŒåŠ è§£å¯†é€Ÿåº¦å¿«äº†è®¸å¤š<br>åŸå› ï¼š</p>
<ul>
<li><ul>
<li><strong><code>gmpy2</code> çš„ä½¿ç”¨</strong>ï¼šæ‰‹åŠ¨å®ç°ä¸­ä½¿ç”¨ <code>gmpy2</code> æ¥å¤„ç†å¤§æ•´æ•°è¿ç®—ï¼Œè¿™ä¸ªåº“åœ¨æ€§èƒ½ä¸Šè¿œè¿œä¼˜äº Python çš„é»˜è®¤æ•´æ•°è¿ç®—ï¼Œå› ä¸ºå®ƒåº•å±‚ä½¿ç”¨äº† GMP åº“ï¼ˆä¸€ä¸ªé«˜æ€§èƒ½çš„å¤šç²¾åº¦ç®—æœ¯åº“ï¼‰ï¼Œä¸“é—¨ç”¨äºå¤§æ•°è¿ç®—ã€‚è€Œ <code>phe</code> åº“é€šå¸¸ä½¿ç”¨ Python åŸç”Ÿçš„å¤§æ•´æ•°å¯¹è±¡ï¼Œè¿ç®—æ•ˆç‡è¾ƒä½ã€‚</li>
</ul>
</li>
<li><p><strong>éšæœºæ•°ç”Ÿæˆä¼˜åŒ–</strong>ï¼šä½¿ç”¨ <code>random.SystemRandom()</code> æä¾›ç³»ç»Ÿçº§çš„éšæœºæ•°ç”Ÿæˆï¼Œç»“åˆ <code>gmpy2.next_prime()</code> æ¥è¿…é€Ÿæ‰¾åˆ°åˆé€‚çš„å¤§ç´ æ•°ï¼Œè¿™å‡å°‘äº†å†—ä½™è®¡ç®—ï¼Œæå‡äº†å¯†é’¥ç”Ÿæˆæ•ˆç‡ã€‚</p>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@staticmethod</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_get_prime_over</span>(<span class="params">N</span>):</span><br><span class="line">    rand_func = random.SystemRandom()</span><br><span class="line">    r = gmpy2.mpz(rand_func.getrandbits(N))</span><br><span class="line">    r = gmpy2.bit_set(r, N - <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">int</span>(gmpy2.next_prime(r))</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div>
</li>
<li><p><code>gmpy2.powmod()</code> æ˜¯ç›´æ¥åœ¨æ•´æ•°å±‚é¢è¿›è¡Œå¿«é€Ÿå¹‚è¿ç®—å’Œå–æ¨¡æ“ä½œï¼Œè¿™åœ¨åŠ å¯†è¿‡ç¨‹ä¸­çš„è®¡ç®— <code>g^m % n^2</code> å’Œ <code>r^n % n^2</code> éå¸¸é«˜æ•ˆã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<code>phe</code> åº“çš„å®ç°å¯èƒ½ä¼šåŒ…å«é¢å¤–çš„ç±»å‹æ£€æŸ¥å’Œæ›´å¤æ‚çš„é€»è¾‘ï¼Œè¿™ä¼šå¢åŠ è®¡ç®—æ—¶é—´ã€‚</p>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">encrypt</span>(<span class="params">self, m</span>):</span><br><span class="line">    r = random.randint(<span class="number">1</span>, self.public_key.n - <span class="number">1</span>)</span><br><span class="line">    cipher_text = gmpy2.mod(</span><br><span class="line">        gmpy2.powmod(self.public_key.g, m, self.n_square) * gmpy2.powmod(r, self.public_key.n, self.n_square),</span><br><span class="line">        self.n_square)</span><br><span class="line">    cipher_text = CryptoNumber(cipher_text, self.n_square)</span><br><span class="line">    <span class="keyword">return</span> cipher_text</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div></li>
</ul>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> time  </span><br><span class="line"><span class="keyword">import</span> tenseal <span class="keyword">as</span> ts  </span><br><span class="line"><span class="keyword">import</span> random  </span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple  </span><br><span class="line"><span class="keyword">import</span> gmpy2  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># ======================= Paillier å¯†é’¥ç”Ÿæˆ =======================class PaillierKeyGenerator:  </span></span><br><span class="line"><span class="meta">    @staticmethod  </span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_get_prime_over</span>(<span class="params">N</span>):  </span><br><span class="line">        rand_func = random.SystemRandom()  </span><br><span class="line">        r = gmpy2.mpz(rand_func.getrandbits(N))  </span><br><span class="line">        r = gmpy2.bit_set(r, N - <span class="number">1</span>)  </span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">int</span>(gmpy2.next_prime(r))  </span><br><span class="line">  </span><br><span class="line"><span class="meta">    @staticmethod  </span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_generate_p_q</span>(<span class="params">key_size</span>):  </span><br><span class="line">        p = q = <span class="literal">None</span>  </span><br><span class="line">        n_len = <span class="number">0</span>  </span><br><span class="line">        <span class="keyword">while</span> n_len != key_size:  </span><br><span class="line">            p = PaillierKeyGenerator._get_prime_over(key_size // <span class="number">2</span>)  </span><br><span class="line">            q = p  </span><br><span class="line">            <span class="keyword">while</span> q == p:  </span><br><span class="line">                q = PaillierKeyGenerator._get_prime_over(key_size // <span class="number">2</span>)  </span><br><span class="line">            n = p * q  </span><br><span class="line">            n_len = n.bit_length()  </span><br><span class="line">        <span class="keyword">return</span> p, q  </span><br><span class="line">  </span><br><span class="line"><span class="meta">    @staticmethod  </span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">generate_keypair</span>(<span class="params">key_size</span>):  </span><br><span class="line">        p, q = PaillierKeyGenerator._generate_p_q(key_size)  </span><br><span class="line">        n = p * q  </span><br><span class="line">        lam = gmpy2.lcm(p - <span class="number">1</span>, q - <span class="number">1</span>)  </span><br><span class="line">  </span><br><span class="line">        n_square = <span class="built_in">pow</span>(n, <span class="number">2</span>)  </span><br><span class="line">        g = n + random.randint(n, n_square - <span class="number">1</span>)  </span><br><span class="line">        fn_L = <span class="keyword">lambda</span> x, n: (x - <span class="number">1</span>) // n  </span><br><span class="line">        mu = gmpy2.invert(fn_L(gmpy2.powmod(g, lam, n_square), n), n)  </span><br><span class="line">        <span class="keyword">while</span> gmpy2.gcd(g, n_square) != <span class="number">1</span>:  </span><br><span class="line">            g = n + random.randint(n, n_square - <span class="number">1</span>)  </span><br><span class="line">        PublicKey = namedtuple(<span class="string">"PublicKey"</span>, <span class="string">"n g"</span>)  </span><br><span class="line">        PrivateKey = namedtuple(<span class="string">"PrivateKey"</span>, <span class="string">"public_key lam mu"</span>)  </span><br><span class="line">        public_key = PublicKey(n=n, g=g)  </span><br><span class="line">        private_key = PrivateKey(public_key=public_key, lam=lam, mu=mu)  </span><br><span class="line">        <span class="keyword">return</span> public_key, private_key  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># ======================= Paillier åŠ è§£å¯† =======================class Paillier:  </span></span><br><span class="line">    CIPHER_MODE_ENCRYPT = <span class="number">0</span>  </span><br><span class="line">    CIPHER_MODE_DECRYPT = <span class="number">1</span>  </span><br><span class="line">    cipher = <span class="literal">None</span>  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, cipher_mode, cipher_key</span>):  </span><br><span class="line">        <span class="keyword">if</span> cipher_mode == Paillier.CIPHER_MODE_ENCRYPT:  </span><br><span class="line">            self.public_key = cipher_key  </span><br><span class="line">            self.private_key = <span class="literal">None</span>  </span><br><span class="line">        <span class="keyword">elif</span> cipher_mode == Paillier.CIPHER_MODE_DECRYPT:  </span><br><span class="line">            self.public_key = cipher_key.public_key  </span><br><span class="line">            self.private_key = cipher_key  </span><br><span class="line">        <span class="keyword">else</span>:  </span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">'cipher_mode value must be either CIPHER_MODE_ENCRYPT or CIPHER_MODE_DECRYPT'</span>)  </span><br><span class="line">        self.cipher_mode = cipher_mode  </span><br><span class="line">        self.n_square = <span class="built_in">pow</span>(self.public_key.n, <span class="number">2</span>)  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fn_L</span>(<span class="params">self, x</span>):  </span><br><span class="line">        <span class="keyword">return</span> (x - <span class="number">1</span>) // self.public_key.n  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">encrypt</span>(<span class="params">self, m</span>):  </span><br><span class="line">        r = random.randint(<span class="number">1</span>, self.public_key.n - <span class="number">1</span>)  </span><br><span class="line">        cipher_text = gmpy2.mod(  </span><br><span class="line">            gmpy2.powmod(self.public_key.g, m, self.n_square) * gmpy2.powmod(r, self.public_key.n, self.n_square),  </span><br><span class="line">            self.n_square)  </span><br><span class="line">        cipher_text = CryptoNumber(cipher_text, self.n_square)  </span><br><span class="line">        <span class="keyword">return</span> cipher_text  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">decrypt</span>(<span class="params">self, crypto_number</span>):  </span><br><span class="line">        numerator = self.fn_L(gmpy2.powmod(crypto_number.cipher_text, self.private_key.lam, self.n_square))  </span><br><span class="line">        numerator = gmpy2.mod(numerator * self.private_key.mu, self.public_key.n)  </span><br><span class="line">        <span class="keyword">return</span> numerator  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):  </span><br><span class="line">        <span class="keyword">return</span> Paillier.cipher  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># ======================= åŒæ€è¿ç®— =======================class CryptoNumber:  </span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, cipher_text, n_square</span>):  </span><br><span class="line">        self.cipher_text = cipher_text  </span><br><span class="line">        self.n_square = n_square  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__add__</span>(<span class="params">self, other</span>):  </span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(other, CryptoNumber):  </span><br><span class="line">            sum_ciphertext = gmpy2.mod(self.cipher_text * other.cipher_text, self.n_square)  </span><br><span class="line">            <span class="keyword">return</span> CryptoNumber(sum_ciphertext, self.n_square)  </span><br><span class="line">        <span class="keyword">else</span>:  </span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">'Unsupported operand type(s) for +: "CryptoNumber" and "{}"'</span>.<span class="built_in">format</span>(<span class="built_in">type</span>(other)))  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__mul__</span>(<span class="params">self, other</span>):  </span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(other, CryptoNumber):  </span><br><span class="line">            <span class="keyword">raise</span> NotImplementedError(<span class="string">'Multiplication between two "CryptoNumber" instances is not supported'</span>)  </span><br><span class="line">        <span class="keyword">else</span>:  </span><br><span class="line">            mul_cipher_text = gmpy2.mod(<span class="built_in">pow</span>(self.cipher_text, other), self.n_square)  </span><br><span class="line">            <span class="keyword">return</span> CryptoNumber(mul_cipher_text, self.n_square)  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># ======================= ä¼˜åŒ–åçš„ Paillier åŠ æ³•åŒæ€åŠ è§£å¯† =======================def paillier_encryption_batch(values, public_key):  </span></span><br><span class="line">    paillier = Paillier(Paillier.CIPHER_MODE_ENCRYPT, public_key)  </span><br><span class="line">    <span class="comment"># æ‰¹é‡åŠ å¯†æ•°æ®  </span></span><br><span class="line">    encrypted_values = [paillier.encrypt(value) <span class="keyword">for</span> value <span class="keyword">in</span> values]  </span><br><span class="line">    <span class="keyword">return</span> encrypted_values  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">paillier_homomorphic_addition</span>(<span class="params">encrypted_values</span>):  </span><br><span class="line">    encrypted_sum = encrypted_values[<span class="number">0</span>]  </span><br><span class="line">    <span class="keyword">for</span> enc_value <span class="keyword">in</span> encrypted_values[<span class="number">1</span>:]:  </span><br><span class="line">        encrypted_sum += enc_value  <span class="comment"># åŒæ€åŠ æ³•  </span></span><br><span class="line">    <span class="keyword">return</span> encrypted_sum  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">paillier_decryption</span>(<span class="params">encrypted_value, private_key</span>):  </span><br><span class="line">    paillier = Paillier(Paillier.CIPHER_MODE_DECRYPT, private_key)  </span><br><span class="line">    <span class="comment"># è§£å¯†æ•°æ®  </span></span><br><span class="line">    decrypted_value = paillier.decrypt(encrypted_value)  </span><br><span class="line">    <span class="keyword">return</span> decrypted_value  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">paillier_test</span>(<span class="params">public_key, private_key</span>):  </span><br><span class="line">    <span class="comment"># æµ‹è¯•æ•°æ®  </span></span><br><span class="line">    values = [<span class="number">15</span>, <span class="number">20</span>]  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è®¡æ—¶å¼€å§‹  </span></span><br><span class="line">    start_time = time.time()  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># åŠ å¯†æ•°æ®  </span></span><br><span class="line">    encrypted_values = paillier_encryption_batch(values, public_key)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># åŒæ€åŠ æ³•  </span></span><br><span class="line">    encrypted_sum = paillier_homomorphic_addition(encrypted_values)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è§£å¯†ç»“æœ  </span></span><br><span class="line">    decrypted_sum = paillier_decryption(encrypted_sum, private_key)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è®¡æ—¶ç»“æŸ  </span></span><br><span class="line">    end_time = time.time()  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è¾“å‡ºç»“æœ  </span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"Paillier åŠ è§£å¯†æ—¶é—´: <span class="subst">{end_time - start_time}</span> ç§’"</span>)  </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"Paillier è§£å¯†ç»“æœ: <span class="subst">{decrypted_sum}</span>"</span>)  </span><br><span class="line">    <span class="keyword">return</span> end_time - start_time  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># ======================= å…¨åŒæ€åŠ è§£å¯†ï¼ˆTenSEAL - CKKSï¼‰ =======================def full_homomorphic_encryption(value1, value2, context):  </span></span><br><span class="line">    <span class="comment"># åˆ›å»º CKKS å‘é‡å¹¶åŠ å¯†  </span></span><br><span class="line">    encrypted_value1 = ts.ckks_vector(context, [value1])  </span><br><span class="line">    encrypted_value2 = ts.ckks_vector(context, [value2])  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># åŒæ€åŠ æ³•  </span></span><br><span class="line">    encrypted_sum = encrypted_value1 + encrypted_value2  </span><br><span class="line">    <span class="keyword">return</span> encrypted_sum  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">full_homomorphic_decryption</span>(<span class="params">encrypted_value, secret_key</span>):  </span><br><span class="line">    <span class="comment"># è§£å¯†æ•°æ®  </span></span><br><span class="line">    decrypted_value = encrypted_value.decrypt(secret_key)  </span><br><span class="line">    <span class="keyword">return</span> decrypted_value[<span class="number">0</span>]  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">full_homomorphic_test</span>(<span class="params">context, secret_key</span>):  </span><br><span class="line">    <span class="comment"># æµ‹è¯•æ•°æ®  </span></span><br><span class="line">    value1, value2 = <span class="number">15</span>, <span class="number">20</span>  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è®¡æ—¶å¼€å§‹  </span></span><br><span class="line">    start_time = time.time()  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># åŠ å¯†å’ŒåŒæ€åŠ æ³•  </span></span><br><span class="line">    encrypted_sum = full_homomorphic_encryption(value1, value2, context)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è§£å¯†ç»“æœ  </span></span><br><span class="line">    decrypted_sum = full_homomorphic_decryption(encrypted_sum, secret_key)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è®¡æ—¶ç»“æŸ  </span></span><br><span class="line">    end_time = time.time()  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è¾“å‡ºç»“æœ  </span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"å…¨åŒæ€åŠ è§£å¯†æ—¶é—´: <span class="subst">{end_time - start_time}</span> ç§’"</span>)  </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"å…¨åŒæ€è§£å¯†ç»“æœ: <span class="subst">{decrypted_sum}</span>"</span>)  </span><br><span class="line">    <span class="keyword">return</span> end_time - start_time  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># ======================= ä¸»ç¨‹åºï¼šæ¯”è¾ƒ Paillier å’Œ TenSEAL çš„æ€§èƒ½ =======================if __name__ == "__main__":  </span></span><br><span class="line">    <span class="comment"># ===== Paillier å¯†é’¥ç”Ÿæˆï¼ˆä¸è®¡å…¥æ—¶é—´ï¼‰=====  </span></span><br><span class="line">    public_key, private_key = PaillierKeyGenerator.generate_keypair(<span class="number">1024</span>)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># æ¯”è¾ƒåŠ æ³•åŒæ€åŠ è§£å¯†æ—¶é—´ï¼ˆPaillierï¼‰  </span></span><br><span class="line">    paillier_time = paillier_test(public_key, private_key)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># ===== TenSEAL ä¸Šä¸‹æ–‡å’Œå¯†é’¥ç”Ÿæˆï¼ˆä¸è®¡å…¥æ—¶é—´ï¼‰=====  </span></span><br><span class="line">    context = ts.context(ts.SCHEME_TYPE.CKKS, poly_modulus_degree=<span class="number">8192</span>, coeff_mod_bit_sizes=[<span class="number">60</span>, <span class="number">40</span>, <span class="number">60</span>])  </span><br><span class="line">    context.global_scale = <span class="number">2</span>**<span class="number">40</span>  <span class="comment"># è®¾ç½® global scale    context.generate_galois_keys()  # ç”Ÿæˆ Galois å¯†é’¥  </span></span><br><span class="line">    secret_key = context.secret_key()  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># æ¯”è¾ƒå…¨åŒæ€åŠ è§£å¯†æ—¶é—´ï¼ˆTenSEALï¼‰  </span></span><br><span class="line">    full_homomorphic_time = full_homomorphic_test(context, secret_key)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è¾“å‡ºå¯¹æ¯”ç»“æœ  </span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"\nå®éªŒç»“æœï¼š"</span>)  </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"Paillier åŠ æ³•åŒæ€åŠ è§£å¯†æ—¶é—´: <span class="subst">{paillier_time}</span> ç§’"</span>)  </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f"å…¨åŒæ€åŠ è§£å¯†æ—¶é—´ (TenSEAL): <span class="subst">{full_homomorphic_time}</span> ç§’"</span>)</span><br></pre></td></tr></tbody></table></figure></div>
<p>![[./Pasted image 20241116144236.png|Pasted image 20241116144236]]</p>
<ul>
<li>åˆ†æ<ul>
<li>åŠ è§£å¯†æ—¶é—´<ul>
<li>åœ¨ä¸è®¡å…¥å¯†é’¥ç”Ÿæˆæ—¶é—´çš„æƒ…å†µä¸‹ï¼Œ<strong>Paillier åŠ è§£å¯†çš„æ—¶é—´æ˜¾è‘—å°äºå…¨åŒæ€åŠ å¯†ï¼ˆTenSEALï¼‰çš„åŠ è§£å¯†æ—¶é—´</strong>ã€‚</li>
</ul>
</li>
<li>è§£å¯†ç»“æœ<ul>
<li>åŠ æ³•åŒæ€è§£å¯†ç»“æœæ˜¯ç²¾ç¡®çš„ï¼Œè€Œå…¨åŒæ€çš„è§£å¯†ç»“æœä¸é¢„æœŸç»“æœå­˜åœ¨å¾®å°è¯¯å·®</li>
<li>åŸå› ï¼šTenSEAL ä½¿ç”¨çš„ <strong>CKKS</strong> åŒæ€åŠ å¯†æ–¹æ¡ˆæ˜¯ä¸€ç§è¿‘ä¼¼è®¡ç®—çš„ç®—æ³•ï¼Œä¸»è¦ç”¨äºå¤„ç†æµ®ç‚¹æ•°å’Œæœºå™¨å­¦ä¹ ä¸­çš„è®¡ç®—ã€‚ç”±äºCKKSçš„è®¾è®¡ç‰¹ç‚¹ï¼Œ<strong>åŒæ€è¿ç®—è¿‡ç¨‹ä¸­ä¼šå¼•å…¥å°‘é‡çš„è¯¯å·®</strong>ï¼Œå°¤å…¶æ˜¯åœ¨è¿›è¡Œä¹˜æ³•å’Œå¤æ‚è¿ç®—æ—¶ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè§£å¯†ç»“æœä¸æ˜¯ç²¾ç¡®çš„ <code>35</code>ï¼Œè€Œæ˜¯ä¸€ä¸ªéå¸¸æ¥è¿‘ <code>35</code> çš„æµ®ç‚¹æ•°ã€‚</li>
<li>å¦‚æœéœ€è¦åœ¨ TenSEAL ä¸­å¾—åˆ°æ›´ç²¾ç¡®çš„ç»“æœï¼Œå¯ä»¥å°è¯•è°ƒæ•´åŠ å¯†å‚æ•°ï¼Œä¾‹å¦‚å¢å¤§ <code>global_scale</code>ï¼Œä½†è¿™å¯èƒ½ä¼šå¢åŠ è®¡ç®—æ—¶é—´å’Œå†…å­˜å¼€é”€ã€‚</li>
</ul>
</li>
<li>æ ¹æ®åº”ç”¨éœ€æ±‚é€‰æ‹©åˆé€‚çš„åŠ å¯†æ–¹æ¡ˆã€‚Paillier é€‚ç”¨äºéœ€è¦ç²¾ç¡®è®¡ç®—çš„åœºæ™¯ï¼ŒCKKS æ›´é€‚åˆå¤„ç†æµ®ç‚¹æ•°å’Œéœ€è¦å¤§é‡åŒæ€è¿ç®—çš„æœºå™¨å­¦ä¹ ä»»åŠ¡ã€‚</li>
</ul>
</li>
</ul>
<p> <strong>å¢åŠ åŒæ€è¿ç®—çš„å¤æ‚åº¦</strong><br>åœ¨ TenSEAL ä¸­ï¼Œå¢åŠ æ›´å¤šçš„åŒæ€è¿ç®—ï¼ˆå¦‚åŒæ€ä¹˜æ³•ã€å¹³æ–¹ï¼‰å¯ä»¥å»¶é•¿åŠ è§£å¯†æ—¶é—´ã€‚</p>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">full_homomorphic_encryption</span>(<span class="params">value1, value2, context</span>):</span><br><span class="line">    <span class="comment"># åˆ›å»º CKKS å‘é‡å¹¶åŠ å¯†</span></span><br><span class="line">    encrypted_value1 = ts.ckks_vector(context, [value1])</span><br><span class="line">    encrypted_value2 = ts.ckks_vector(context, [value2])</span><br><span class="line">    <span class="comment"># åŒæ€åŠ æ³•</span></span><br><span class="line">    encrypted_sum = encrypted_value1 + encrypted_value2</span><br><span class="line">    <span class="comment"># å¢åŠ åŒæ€ä¹˜æ³•</span></span><br><span class="line">    encrypted_product = encrypted_sum * encrypted_value1</span><br><span class="line">    <span class="comment"># å¢åŠ åŒæ€å¹³æ–¹</span></span><br><span class="line">    encrypted_result = encrypted_product.square()</span><br><span class="line">    <span class="keyword">return</span> encrypted_result</span><br></pre></td></tr></tbody></table></figure></div>

<p>![[./Pasted image 20241117154800.png|Pasted image 20241117154800]]</p>
<hr>
<h4 id="2-2-å¯†æ–‡å¤§å°çš„æ¯”è¾ƒ"><a href="#2-2-å¯†æ–‡å¤§å°çš„æ¯”è¾ƒ" class="headerlink" title="2.2 å¯†æ–‡å¤§å°çš„æ¯”è¾ƒ"></a>2.2 å¯†æ–‡å¤§å°çš„æ¯”è¾ƒ</h4><h5 id="Paillierï¼ˆåŠ æ³•åŒæ€åŠ å¯†ï¼‰"><a href="#Paillierï¼ˆåŠ æ³•åŒæ€åŠ å¯†ï¼‰" class="headerlink" title="Paillierï¼ˆåŠ æ³•åŒæ€åŠ å¯†ï¼‰"></a><strong>Paillierï¼ˆåŠ æ³•åŒæ€åŠ å¯†ï¼‰</strong></h5><p>Paillier åŠ å¯†æ–¹æ¡ˆæ˜¯ä¸€ç§åŠ æ³•åŒæ€åŠ å¯†æ–¹æ¡ˆï¼Œæ”¯æŒåŠ æ³•æ“ä½œçš„åŒæ€è¿ç®—ã€‚å…¶å¯†æ–‡çš„å¤§å°ä¸»è¦ç”±æ¨¡æ•° nnn å’Œ n2n^2n2 çš„ä½é•¿åº¦å†³å®šã€‚</p>
<ul>
<li><strong>å¯†é’¥ç”Ÿæˆ</strong>ï¼šPaillier çš„å¯†é’¥ç”Ÿæˆä¾èµ–äºä¸¤ä¸ªå¤§ç´ æ•° p å’Œ qï¼Œè®¡ç®—å‡ºæ¨¡æ•° $n = p \times qå’Œ n^2$ï¼Œå…¶å¯†æ–‡çš„å¤§å°å¤§çº¦ä¸º$2 \times \text{bit length of } n$ï¼Œå³å¤§çº¦æ˜¯ $2 \times \text{key size in bits}$ã€‚</li>
<li><strong>å¯†æ–‡å¤§å°</strong>ï¼šé€šå¸¸ï¼ŒPaillier å¯†æ–‡çš„å¤§å°ä¸º 2048 ä½æˆ– 4096 ä½ï¼Œå…·ä½“å–å†³äºå¯†é’¥å¤§å°ã€‚å¯¹äº 1024 ä½çš„å¯†é’¥ï¼Œå¯†æ–‡çš„å¤§å°å¤§çº¦ä¸º 2048 ä½ã€‚<br>  <strong>è®¡ç®—å…¬å¼</strong>ï¼š$$<br>  \text{å¯†æ–‡å¤§å°} \approx 2 \times (\text{key size in bits})$$<br>  å¦‚æœä½¿ç”¨ 2048 ä½çš„å¯†é’¥ï¼Œå¯†æ–‡çš„å¤§å°å¤§çº¦æ˜¯ 4096 ä½ã€‚</li>
</ul>
<h5 id="å…¨åŒæ€åŠ å¯†ï¼ˆå¦‚-BFV-å’Œ-CKKSï¼‰"><a href="#å…¨åŒæ€åŠ å¯†ï¼ˆå¦‚-BFV-å’Œ-CKKSï¼‰" class="headerlink" title="å…¨åŒæ€åŠ å¯†ï¼ˆå¦‚ BFV å’Œ CKKSï¼‰"></a><strong>å…¨åŒæ€åŠ å¯†ï¼ˆå¦‚ BFV å’Œ CKKSï¼‰</strong></h5><h2 id="å…¨åŒæ€åŠ å¯†ï¼ˆFHEï¼‰å…è®¸å¯¹å¯†æ–‡è¿›è¡Œä»»æ„æ•°é‡çš„åŒæ€è¿ç®—ï¼ˆåŒ…æ‹¬åŠ æ³•ã€ä¹˜æ³•ç­‰ï¼‰ã€‚å…¸å‹çš„å…¨åŒæ€åŠ å¯†æ–¹æ¡ˆå¦‚-BFV-å’Œ-CKKSï¼Œå®ƒä»¬çš„å¯†æ–‡å¤§å°é€šå¸¸æ›´å¤§ï¼Œå› ä¸ºå®ƒä»¬æ”¯æŒæ›´å¤æ‚çš„æ“ä½œï¼Œå¹¶ä¸”æ¶‰åŠæ›´å¤šçš„åŠ å¯†å‚æ•°ã€‚-BFV-åŠ å¯†æ–¹æ¡ˆ-å¤šé¡¹å¼è¡¨ç¤ºï¼šBFV-ä½¿ç”¨å¤šé¡¹å¼ç¯è¿›è¡ŒåŠ å¯†ï¼Œå¯†æ–‡åŒ…å«å¤šé¡¹å¼çš„ç³»æ•°ã€‚æ¯ä¸ªç³»æ•°çš„å¤§å°é€šå¸¸æ˜¯ç”±ç³»æ•°æ¨¡æ•°å†³å®šçš„ã€‚-å¯†æ–‡å¤§å°ï¼šBFV-å¯†æ–‡çš„å¤§å°ç”±ä»¥ä¸‹å‡ ä¸ªå‚æ•°å†³å®šï¼š-1-å¤šé¡¹å¼åº¦æ•°ï¼šå¤šé¡¹å¼åº¦æ•°-N-å†³å®šäº†å¯†æ–‡ä¸­çš„å¤šé¡¹å¼çš„é•¿åº¦ã€‚-2-ç³»æ•°æ¨¡æ•°ï¼šç³»æ•°æ¨¡æ•°çš„ä½æ•°å†³å®šäº†æ¯ä¸ªç³»æ•°æ‰€éœ€çš„ä½æ•°ã€‚-å¯¹äº-BFVï¼Œå‡è®¾å¤šé¡¹å¼åº¦æ•°ä¸º-Nï¼Œæ¯ä¸ªç³»æ•°çš„æ¨¡æ•°å¤§å°ä¸ºBï¼Œåˆ™å¯†æ–‡çš„å¤§å°å¤§è‡´ä¸ºï¼š-text-å¯†æ–‡å¤§å°-approx-N-times-text-ä½æ•°-text-ç³»æ•°æ¨¡æ•°-æ¯”å¦‚ï¼Œé€‰æ‹©-N-x3D-8192ï¼Œæ¯ä¸ªç³»æ•°æ¨¡æ•°ä¸º-60-ä½ï¼Œåˆ™å¯†æ–‡å¤§å°å¤§çº¦æ˜¯-8192-times-60-ä½ï¼Œå³çº¦-491-520-ä½ã€‚-CKKS-åŠ å¯†æ–¹æ¡ˆ-å¤šé¡¹å¼è¡¨ç¤ºï¼šCKKS-æ˜¯ä¸€ç§ä¸“é—¨é’ˆå¯¹è¿‘ä¼¼åŒæ€åŠ å¯†è®¾è®¡çš„åŠ å¯†æ–¹æ¡ˆï¼Œæ”¯æŒæµ®ç‚¹æ•°çš„åŠ å¯†ã€‚ä¸-BFV-ç±»ä¼¼ï¼ŒCKKS-ä½¿ç”¨å¤šé¡¹å¼è¡¨ç¤ºï¼Œä½†å®ƒåœ¨åŠ å¯†æ—¶é‡‡ç”¨äº†è¿‘ä¼¼æŠ€æœ¯ã€‚-å¯†æ–‡å¤§å°ï¼šä¸-BFV-ç±»ä¼¼ï¼ŒCKKS-çš„å¯†æ–‡å¤§å°ä¹Ÿç”±å¤šé¡¹å¼åº¦æ•°å’Œç³»æ•°æ¨¡æ•°å¤§å°å†³å®šã€‚-å¯¹äº-CKKSï¼Œå‡è®¾å¤šé¡¹å¼åº¦æ•°ä¸º-NNNï¼Œç³»æ•°æ¨¡æ•°å¤§å°ä¸º-BBBï¼Œåˆ™å¯†æ–‡çš„å¤§å°å¤§è‡´ä¸ºï¼š-text-å¯†æ–‡å¤§å°-approx-N-times-text-ä½æ•°-text-ç³»æ•°æ¨¡æ•°-å¦‚æœé€‰æ‹©-N-x3D-8192ï¼Œæ¯ä¸ªç³»æ•°æ¨¡æ•°ä¸º-60-ä½ï¼Œåˆ™å¯†æ–‡å¤§å°å¤§çº¦æ˜¯-8192-times-60-ä½ï¼Œå³çº¦-491-520-ä½ã€‚"><a href="#å…¨åŒæ€åŠ å¯†ï¼ˆFHEï¼‰å…è®¸å¯¹å¯†æ–‡è¿›è¡Œä»»æ„æ•°é‡çš„åŒæ€è¿ç®—ï¼ˆåŒ…æ‹¬åŠ æ³•ã€ä¹˜æ³•ç­‰ï¼‰ã€‚å…¸å‹çš„å…¨åŒæ€åŠ å¯†æ–¹æ¡ˆå¦‚-BFV-å’Œ-CKKSï¼Œå®ƒä»¬çš„å¯†æ–‡å¤§å°é€šå¸¸æ›´å¤§ï¼Œå› ä¸ºå®ƒä»¬æ”¯æŒæ›´å¤æ‚çš„æ“ä½œï¼Œå¹¶ä¸”æ¶‰åŠæ›´å¤šçš„åŠ å¯†å‚æ•°ã€‚-BFV-åŠ å¯†æ–¹æ¡ˆ-å¤šé¡¹å¼è¡¨ç¤ºï¼šBFV-ä½¿ç”¨å¤šé¡¹å¼ç¯è¿›è¡ŒåŠ å¯†ï¼Œå¯†æ–‡åŒ…å«å¤šé¡¹å¼çš„ç³»æ•°ã€‚æ¯ä¸ªç³»æ•°çš„å¤§å°é€šå¸¸æ˜¯ç”±ç³»æ•°æ¨¡æ•°å†³å®šçš„ã€‚-å¯†æ–‡å¤§å°ï¼šBFV-å¯†æ–‡çš„å¤§å°ç”±ä»¥ä¸‹å‡ ä¸ªå‚æ•°å†³å®šï¼š-1-å¤šé¡¹å¼åº¦æ•°ï¼šå¤šé¡¹å¼åº¦æ•°-N-å†³å®šäº†å¯†æ–‡ä¸­çš„å¤šé¡¹å¼çš„é•¿åº¦ã€‚-2-ç³»æ•°æ¨¡æ•°ï¼šç³»æ•°æ¨¡æ•°çš„ä½æ•°å†³å®šäº†æ¯ä¸ªç³»æ•°æ‰€éœ€çš„ä½æ•°ã€‚-å¯¹äº-BFVï¼Œå‡è®¾å¤šé¡¹å¼åº¦æ•°ä¸º-Nï¼Œæ¯ä¸ªç³»æ•°çš„æ¨¡æ•°å¤§å°ä¸ºBï¼Œåˆ™å¯†æ–‡çš„å¤§å°å¤§è‡´ä¸ºï¼š-text-å¯†æ–‡å¤§å°-approx-N-times-text-ä½æ•°-text-ç³»æ•°æ¨¡æ•°-æ¯”å¦‚ï¼Œé€‰æ‹©-N-x3D-8192ï¼Œæ¯ä¸ªç³»æ•°æ¨¡æ•°ä¸º-60-ä½ï¼Œåˆ™å¯†æ–‡å¤§å°å¤§çº¦æ˜¯-8192-times-60-ä½ï¼Œå³çº¦-491-520-ä½ã€‚-CKKS-åŠ å¯†æ–¹æ¡ˆ-å¤šé¡¹å¼è¡¨ç¤ºï¼šCKKS-æ˜¯ä¸€ç§ä¸“é—¨é’ˆå¯¹è¿‘ä¼¼åŒæ€åŠ å¯†è®¾è®¡çš„åŠ å¯†æ–¹æ¡ˆï¼Œæ”¯æŒæµ®ç‚¹æ•°çš„åŠ å¯†ã€‚ä¸-BFV-ç±»ä¼¼ï¼ŒCKKS-ä½¿ç”¨å¤šé¡¹å¼è¡¨ç¤ºï¼Œä½†å®ƒåœ¨åŠ å¯†æ—¶é‡‡ç”¨äº†è¿‘ä¼¼æŠ€æœ¯ã€‚-å¯†æ–‡å¤§å°ï¼šä¸-BFV-ç±»ä¼¼ï¼ŒCKKS-çš„å¯†æ–‡å¤§å°ä¹Ÿç”±å¤šé¡¹å¼åº¦æ•°å’Œç³»æ•°æ¨¡æ•°å¤§å°å†³å®šã€‚-å¯¹äº-CKKSï¼Œå‡è®¾å¤šé¡¹å¼åº¦æ•°ä¸º-NNNï¼Œç³»æ•°æ¨¡æ•°å¤§å°ä¸º-BBBï¼Œåˆ™å¯†æ–‡çš„å¤§å°å¤§è‡´ä¸ºï¼š-text-å¯†æ–‡å¤§å°-approx-N-times-text-ä½æ•°-text-ç³»æ•°æ¨¡æ•°-å¦‚æœé€‰æ‹©-N-x3D-8192ï¼Œæ¯ä¸ªç³»æ•°æ¨¡æ•°ä¸º-60-ä½ï¼Œåˆ™å¯†æ–‡å¤§å°å¤§çº¦æ˜¯-8192-times-60-ä½ï¼Œå³çº¦-491-520-ä½ã€‚" class="headerlink" title="å…¨åŒæ€åŠ å¯†ï¼ˆFHEï¼‰å…è®¸å¯¹å¯†æ–‡è¿›è¡Œä»»æ„æ•°é‡çš„åŒæ€è¿ç®—ï¼ˆåŒ…æ‹¬åŠ æ³•ã€ä¹˜æ³•ç­‰ï¼‰ã€‚å…¸å‹çš„å…¨åŒæ€åŠ å¯†æ–¹æ¡ˆå¦‚ BFV å’Œ CKKSï¼Œå®ƒä»¬çš„å¯†æ–‡å¤§å°é€šå¸¸æ›´å¤§ï¼Œå› ä¸ºå®ƒä»¬æ”¯æŒæ›´å¤æ‚çš„æ“ä½œï¼Œå¹¶ä¸”æ¶‰åŠæ›´å¤šçš„åŠ å¯†å‚æ•°ã€‚###### BFV åŠ å¯†æ–¹æ¡ˆ- å¤šé¡¹å¼è¡¨ç¤ºï¼šBFV ä½¿ç”¨å¤šé¡¹å¼ç¯è¿›è¡ŒåŠ å¯†ï¼Œå¯†æ–‡åŒ…å«å¤šé¡¹å¼çš„ç³»æ•°ã€‚æ¯ä¸ªç³»æ•°çš„å¤§å°é€šå¸¸æ˜¯ç”±ç³»æ•°æ¨¡æ•°å†³å®šçš„ã€‚- å¯†æ–‡å¤§å°ï¼šBFV å¯†æ–‡çš„å¤§å°ç”±ä»¥ä¸‹å‡ ä¸ªå‚æ•°å†³å®šï¼š    1. å¤šé¡¹å¼åº¦æ•°ï¼šå¤šé¡¹å¼åº¦æ•° N å†³å®šäº†å¯†æ–‡ä¸­çš„å¤šé¡¹å¼çš„é•¿åº¦ã€‚    2. ç³»æ•°æ¨¡æ•°ï¼šç³»æ•°æ¨¡æ•°çš„ä½æ•°å†³å®šäº†æ¯ä¸ªç³»æ•°æ‰€éœ€çš„ä½æ•°ã€‚    å¯¹äº BFVï¼Œå‡è®¾å¤šé¡¹å¼åº¦æ•°ä¸º Nï¼Œæ¯ä¸ªç³»æ•°çš„æ¨¡æ•°å¤§å°ä¸ºBï¼Œåˆ™å¯†æ–‡çš„å¤§å°å¤§è‡´ä¸ºï¼š    $$\text{å¯†æ–‡å¤§å°} \approx N \times \text{ä½æ•°}(\text{ç³»æ•°æ¨¡æ•°})$$    æ¯”å¦‚ï¼Œé€‰æ‹© N = 8192ï¼Œæ¯ä¸ªç³»æ•°æ¨¡æ•°ä¸º 60 ä½ï¼Œåˆ™å¯†æ–‡å¤§å°å¤§çº¦æ˜¯ $8192 \times 60$ä½ï¼Œå³çº¦ 491,520 ä½ã€‚###### CKKS åŠ å¯†æ–¹æ¡ˆ- å¤šé¡¹å¼è¡¨ç¤ºï¼šCKKS æ˜¯ä¸€ç§ä¸“é—¨é’ˆå¯¹è¿‘ä¼¼åŒæ€åŠ å¯†è®¾è®¡çš„åŠ å¯†æ–¹æ¡ˆï¼Œæ”¯æŒæµ®ç‚¹æ•°çš„åŠ å¯†ã€‚ä¸ BFV ç±»ä¼¼ï¼ŒCKKS ä½¿ç”¨å¤šé¡¹å¼è¡¨ç¤ºï¼Œä½†å®ƒåœ¨åŠ å¯†æ—¶é‡‡ç”¨äº†è¿‘ä¼¼æŠ€æœ¯ã€‚- å¯†æ–‡å¤§å°ï¼šä¸ BFV ç±»ä¼¼ï¼ŒCKKS çš„å¯†æ–‡å¤§å°ä¹Ÿç”±å¤šé¡¹å¼åº¦æ•°å’Œç³»æ•°æ¨¡æ•°å¤§å°å†³å®šã€‚    å¯¹äº CKKSï¼Œå‡è®¾å¤šé¡¹å¼åº¦æ•°ä¸º NNNï¼Œç³»æ•°æ¨¡æ•°å¤§å°ä¸º BBBï¼Œåˆ™å¯†æ–‡çš„å¤§å°å¤§è‡´ä¸ºï¼š$$\text{å¯†æ–‡å¤§å°} \approx N \times \text{ä½æ•°}(\text{ç³»æ•°æ¨¡æ•°})$$    å¦‚æœé€‰æ‹© N = 8192ï¼Œæ¯ä¸ªç³»æ•°æ¨¡æ•°ä¸º 60 ä½ï¼Œåˆ™å¯†æ–‡å¤§å°å¤§çº¦æ˜¯ 8192 \times 60 ä½ï¼Œå³çº¦ 491,520 ä½ã€‚
    "></a>å…¨åŒæ€åŠ å¯†ï¼ˆFHEï¼‰å…è®¸å¯¹å¯†æ–‡è¿›è¡Œä»»æ„æ•°é‡çš„åŒæ€è¿ç®—ï¼ˆåŒ…æ‹¬åŠ æ³•ã€ä¹˜æ³•ç­‰ï¼‰ã€‚å…¸å‹çš„å…¨åŒæ€åŠ å¯†æ–¹æ¡ˆå¦‚ BFV å’Œ CKKSï¼Œå®ƒä»¬çš„å¯†æ–‡å¤§å°é€šå¸¸æ›´å¤§ï¼Œå› ä¸ºå®ƒä»¬æ”¯æŒæ›´å¤æ‚çš„æ“ä½œï¼Œå¹¶ä¸”æ¶‰åŠæ›´å¤šçš„åŠ å¯†å‚æ•°ã€‚<br>###### <strong>BFV åŠ å¯†æ–¹æ¡ˆ</strong><br>- <strong>å¤šé¡¹å¼è¡¨ç¤º</strong>ï¼šBFV ä½¿ç”¨å¤šé¡¹å¼ç¯è¿›è¡ŒåŠ å¯†ï¼Œå¯†æ–‡åŒ…å«å¤šé¡¹å¼çš„ç³»æ•°ã€‚æ¯ä¸ªç³»æ•°çš„å¤§å°é€šå¸¸æ˜¯ç”±ç³»æ•°æ¨¡æ•°å†³å®šçš„ã€‚<br>- <strong>å¯†æ–‡å¤§å°</strong>ï¼šBFV å¯†æ–‡çš„å¤§å°ç”±ä»¥ä¸‹å‡ ä¸ªå‚æ•°å†³å®šï¼š<br>    1. <strong>å¤šé¡¹å¼åº¦æ•°</strong>ï¼šå¤šé¡¹å¼åº¦æ•° N å†³å®šäº†å¯†æ–‡ä¸­çš„å¤šé¡¹å¼çš„é•¿åº¦ã€‚<br>    2. <strong>ç³»æ•°æ¨¡æ•°</strong>ï¼šç³»æ•°æ¨¡æ•°çš„ä½æ•°å†³å®šäº†æ¯ä¸ªç³»æ•°æ‰€éœ€çš„ä½æ•°ã€‚<br>    å¯¹äº BFVï¼Œå‡è®¾å¤šé¡¹å¼åº¦æ•°ä¸º Nï¼Œæ¯ä¸ªç³»æ•°çš„æ¨¡æ•°å¤§å°ä¸ºBï¼Œåˆ™å¯†æ–‡çš„å¤§å°å¤§è‡´ä¸ºï¼š<br>    $$\text{å¯†æ–‡å¤§å°} \approx N \times \text{ä½æ•°}(\text{ç³»æ•°æ¨¡æ•°})$$<br><br>    æ¯”å¦‚ï¼Œé€‰æ‹© N = 8192ï¼Œæ¯ä¸ªç³»æ•°æ¨¡æ•°ä¸º 60 ä½ï¼Œåˆ™å¯†æ–‡å¤§å°å¤§çº¦æ˜¯ $8192 \times 60$ä½ï¼Œå³çº¦ 491,520 ä½ã€‚<br>###### <strong>CKKS åŠ å¯†æ–¹æ¡ˆ</strong><br>- <strong>å¤šé¡¹å¼è¡¨ç¤º</strong>ï¼šCKKS æ˜¯ä¸€ç§ä¸“é—¨é’ˆå¯¹è¿‘ä¼¼åŒæ€åŠ å¯†è®¾è®¡çš„åŠ å¯†æ–¹æ¡ˆï¼Œæ”¯æŒæµ®ç‚¹æ•°çš„åŠ å¯†ã€‚ä¸ BFV ç±»ä¼¼ï¼ŒCKKS ä½¿ç”¨å¤šé¡¹å¼è¡¨ç¤ºï¼Œä½†å®ƒåœ¨åŠ å¯†æ—¶é‡‡ç”¨äº†è¿‘ä¼¼æŠ€æœ¯ã€‚<br><br>- <strong>å¯†æ–‡å¤§å°</strong>ï¼šä¸ BFV ç±»ä¼¼ï¼ŒCKKS çš„å¯†æ–‡å¤§å°ä¹Ÿç”±å¤šé¡¹å¼åº¦æ•°å’Œç³»æ•°æ¨¡æ•°å¤§å°å†³å®šã€‚<br><br>    å¯¹äº CKKSï¼Œå‡è®¾å¤šé¡¹å¼åº¦æ•°ä¸º NNNï¼Œç³»æ•°æ¨¡æ•°å¤§å°ä¸º BBBï¼Œåˆ™å¯†æ–‡çš„å¤§å°å¤§è‡´ä¸ºï¼š$$\text{å¯†æ–‡å¤§å°} \approx N \times \text{ä½æ•°}(\text{ç³»æ•°æ¨¡æ•°})$$<br>    å¦‚æœé€‰æ‹© N = 8192ï¼Œæ¯ä¸ªç³»æ•°æ¨¡æ•°ä¸º 60 ä½ï¼Œåˆ™å¯†æ–‡å¤§å°å¤§çº¦æ˜¯ 8192 \times 60 ä½ï¼Œå³çº¦ 491,520 ä½ã€‚
    </h2><table>
<thead>
<tr>
<th>åŠ å¯†æ–¹æ¡ˆ</th>
<th>å¯†æ–‡å¤§å°ï¼ˆå¯†é’¥å¤§å° 1024 ä½ï¼‰</th>
<th>ç‰¹ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Paillier</strong></td>
<td>2048 ä½ï¼ˆå¯†é’¥å¤§å° 1024 ä½ï¼‰</td>
<td>ä»…æ”¯æŒåŠ æ³•åŒæ€ï¼Œé€‚åˆç®€å•çš„åŠ æ³•è¿ç®—</td>
</tr>
<tr>
<td><strong>BFV</strong></td>
<td>491,520 ä½ï¼ˆ8192 å¤šé¡¹å¼åº¦æ•°ï¼Œ60 ä½ç³»æ•°æ¨¡æ•°ï¼‰</td>
<td>æ”¯æŒåŠ æ³•å’Œä¹˜æ³•åŒæ€ï¼Œè®¡ç®—å¤æ‚åº¦è¾ƒé«˜</td>
</tr>
<tr>
<td><strong>CKKS</strong></td>
<td>491,520 ä½ï¼ˆ8192 å¤šé¡¹å¼åº¦æ•°ï¼Œ60 ä½ç³»æ•°æ¨¡æ•°ï¼‰</td>
<td>æ”¯æŒåŠ æ³•å’Œä¹˜æ³•åŒæ€ï¼Œé€‚ç”¨äºè¿‘ä¼¼åŒæ€è®¡ç®—</td>
</tr>
</tbody></table>
<h5 id="ç»“è®ºï¼š"><a href="#ç»“è®ºï¼š" class="headerlink" title="ç»“è®ºï¼š"></a>ç»“è®ºï¼š</h5><ul>
<li><strong>Paillier</strong>ï¼šé€‚ç”¨äºåŠ æ³•åŒæ€ï¼Œå¯†æ–‡ç›¸å¯¹è¾ƒå°ï¼Œé€šå¸¸ä¸º 2048 ä½æˆ– 4096 ä½ï¼Œé€‚åˆå¤„ç†åŠ æ³•æ“ä½œï¼Œä½†ä¸æ”¯æŒä¹˜æ³•ã€‚</li>
<li><strong>BFV/CKKS</strong>ï¼šä½œä¸ºå…¨åŒæ€åŠ å¯†æ–¹æ¡ˆï¼Œå¯†æ–‡å¤§å°æ˜¾è‘—æ›´å¤§ï¼Œé€šå¸¸åœ¨å‡ ç™¾åƒä½ï¼Œé€‚åˆæ‰§è¡Œæ›´å¤æ‚çš„åŠ æ³•å’Œä¹˜æ³•åŒæ€æ“ä½œã€‚</li>
</ul>
<h5 id="å¯†æ–‡å¤§å°çš„å½±å“ï¼š"><a href="#å¯†æ–‡å¤§å°çš„å½±å“ï¼š" class="headerlink" title="å¯†æ–‡å¤§å°çš„å½±å“ï¼š"></a>å¯†æ–‡å¤§å°çš„å½±å“ï¼š</h5><ul>
<li><strong>Paillier</strong>ï¼šå› ä¸ºä»…æ”¯æŒåŠ æ³•åŒæ€ï¼Œå› æ­¤å¯†æ–‡è¾ƒå°ï¼Œé€‚ç”¨äºéšç§ä¿æŠ¤éœ€è¦è¾ƒå°‘è®¡ç®—é‡çš„åœºæ™¯ã€‚</li>
<li><strong>å…¨åŒæ€åŠ å¯†ï¼ˆå¦‚ BFVã€CKKSï¼‰</strong>ï¼šè™½ç„¶å¯†æ–‡æ›´å¤§ï¼Œä½†å®ƒä»¬å¯ä»¥æ‰§è¡Œæ›´åŠ å¤æ‚çš„åŒæ€æ“ä½œï¼ˆåŠ æ³•ã€ä¹˜æ³•ç­‰ï¼‰ï¼Œé€‚ç”¨äºéœ€è¦è¿›è¡Œå¤æ‚è®¡ç®—ï¼ˆå¦‚åŠ å¯†è®¡ç®—ã€éšç§ä¿æŠ¤æœºå™¨å­¦ä¹ ï¼‰çš„åœºæ™¯ã€‚</li>
</ul>
<hr>
<h4 id="2-3-é€‚ç”¨åœºæ™¯"><a href="#2-3-é€‚ç”¨åœºæ™¯" class="headerlink" title="2.3 é€‚ç”¨åœºæ™¯"></a>2.3 é€‚ç”¨åœºæ™¯</h4><h6 id="1-åŠ æ³•åŒæ€åŠ å¯†ï¼ˆAdditive-Homomorphic-Encryptionï¼‰"><a href="#1-åŠ æ³•åŒæ€åŠ å¯†ï¼ˆAdditive-Homomorphic-Encryptionï¼‰" class="headerlink" title="1. åŠ æ³•åŒæ€åŠ å¯†ï¼ˆAdditive Homomorphic Encryptionï¼‰"></a>1. <strong>åŠ æ³•åŒæ€åŠ å¯†ï¼ˆAdditive Homomorphic Encryptionï¼‰</strong></h6><p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>åŠ å¯†æ•°æ®çš„æ±‚å’Œä¸è®¡æ•°</strong>ï¼š<ul>
<li><strong>é‡‘èåˆ†æ</strong>ï¼šåœ¨å¤šä¸ªåŠ å¯†çš„äº¤æ˜“æ•°æ®ï¼ˆå¦‚è´¦æˆ·ä½™é¢ã€æ”¯ä»˜è®°å½•ï¼‰ä¸Šè¿›è¡ŒåŠ æ³•è¿ç®—ï¼Œå¾—åˆ°åŠ å¯†çš„æ€»é¢æˆ–æ€»è®¡æ•°ã€‚ä¾‹å¦‚ï¼Œå¤šä¸ªå…¬å¸æˆ–ä¸ªäººå¯ä»¥å°†è‡ªå·±çš„è´¢åŠ¡æ•°æ®åŠ å¯†åæäº¤ï¼Œè¿›è¡Œåˆå¹¶ã€æ±‡æ€»æˆ–ç»Ÿè®¡ï¼Œè€Œä¸ä¼šæš´éœ²å…·ä½“çš„è´¢åŠ¡æ•°æ®ã€‚</li>
<li><strong>ç”µå­æŠ•ç¥¨</strong>ï¼šç”µå­æŠ•ç¥¨ç³»ç»Ÿå¯ä»¥ä½¿ç”¨åŠ æ³•åŒæ€åŠ å¯†æŠ€æœ¯æ¥å®ç°åŠ å¯†çš„æŠ•ç¥¨ç»Ÿè®¡ï¼Œç¡®ä¿æ¯ä¸ªæŠ•ç¥¨äººçš„éšç§ï¼ŒåŒæ—¶èƒ½å¤Ÿå¯¹æŠ•ç¥¨ç»“æœè¿›è¡Œåˆå¹¶å’Œç»Ÿè®¡ã€‚</li>
<li><strong>ç»Ÿè®¡åˆ†æ</strong>ï¼šè¿›è¡Œæ•°æ®æ±‡æ€»ã€åŠ æƒæ±‚å’Œç­‰æ“ä½œæ—¶ï¼Œé€‚åˆä½¿ç”¨åŠ æ³•åŒæ€åŠ å¯†ã€‚ä¾‹å¦‚ï¼Œæ”¿åºœã€é“¶è¡Œç­‰æœºæ„è¿›è¡ŒåŠ å¯†æ•°æ®çš„ç»Ÿè®¡åˆ†æï¼Œèƒ½å¤Ÿä¿æŒæ•°æ®çš„éšç§ã€‚</li>
<li><strong>åŒ»ç–—å¥åº·æ•°æ®åˆ†æ</strong>ï¼šå¤šä¸ªåŒ»é™¢æˆ–åŒ»ç–—æœºæ„å¯ä»¥ä½¿ç”¨åŠ æ³•åŒæ€åŠ å¯†åˆ†æä¸åŒæ‚£è€…çš„å¥åº·æ•°æ®ï¼Œè¿›è¡ŒåŠ å¯†æ±‡æ€»åˆ†æï¼Œè€Œä¸ä¼šæ³„éœ²æ‚£è€…çš„ä¸ªäººéšç§ã€‚</li>
</ul>
</li>
<li><strong>ç®€å•çš„åŠ æ³•è¿ç®—</strong>ï¼š<ul>
<li>åŠ æ³•åŒæ€åŠ å¯†é€‚ç”¨äºéœ€è¦å¯¹åŠ å¯†æ•°æ®è¿›è¡Œç®€å•çš„åŠ æ³•æ“ä½œçš„åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œåœ¨å¤šä¸ªåŠ å¯†æ•°æ®çš„åŠ æ€»æˆ–åŠ æƒæ±‚å’Œä¸­éå¸¸é«˜æ•ˆã€‚<br> <strong>ä¼˜åŠ¿ï¼š</strong></li>
</ul>
</li>
<li><strong>è®¡ç®—æ•ˆç‡è¾ƒé«˜</strong>ï¼šç›¸å¯¹äºå…¨åŒæ€åŠ å¯†ï¼ŒåŠ æ³•åŒæ€åŠ å¯†çš„è®¡ç®—å¤æ‚åº¦è¾ƒä½ï¼Œå°¤å…¶åœ¨è¿›è¡Œç®€å•çš„åŠ æ³•è¿ç®—æ—¶ï¼Œæ€§èƒ½è¾ƒå¥½ã€‚</li>
<li><strong>å¹¿æ³›åº”ç”¨äºç»Ÿè®¡å’Œæ±‡æ€»åœºæ™¯</strong>ï¼šé€‚ç”¨äºå„ç§æ¶‰åŠåˆå¹¶ã€åŠ æ€»ã€è®¡æ•°ç­‰ç®€å•åŠ æ³•è¿ç®—çš„ä»»åŠ¡ã€‚<br> <strong>å±€é™æ€§ï¼š</strong></li>
<li><strong>åŠŸèƒ½æœ‰é™</strong>ï¼šä»…æ”¯æŒåŠ æ³•æ“ä½œï¼Œæ— æ³•æ‰§è¡Œä¹˜æ³•ã€æ¯”è¾ƒç­‰å…¶ä»–å¤æ‚è¿ç®—ã€‚å› æ­¤ï¼Œè‹¥ä»»åŠ¡æ¶‰åŠå¤æ‚çš„è¿ç®—ï¼Œæ— æ³•ä»…é€šè¿‡åŠ æ³•åŒæ€åŠ å¯†å®Œæˆã€‚</li>
</ul>
<h6 id="2-å…¨åŒæ€åŠ å¯†ï¼ˆFully-Homomorphic-Encryption-FHEï¼‰"><a href="#2-å…¨åŒæ€åŠ å¯†ï¼ˆFully-Homomorphic-Encryption-FHEï¼‰" class="headerlink" title="2. å…¨åŒæ€åŠ å¯†ï¼ˆFully Homomorphic Encryption, FHEï¼‰"></a>2. <strong>å…¨åŒæ€åŠ å¯†ï¼ˆFully Homomorphic Encryption, FHEï¼‰</strong></h6><p> <strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>å¤æ‚çš„åŠ æ³•å’Œä¹˜æ³•è¿ç®—</strong>ï¼š<ul>
<li><strong>å®‰å…¨è®¡ç®—ä¸è”åˆå­¦ä¹ </strong>ï¼šåœ¨å¤šä¸ªå‚ä¸æ–¹ä¹‹é—´è¿›è¡Œè”åˆæœºå™¨å­¦ä¹ ã€æ•°æ®åˆ†æç­‰ä»»åŠ¡æ—¶ï¼Œæ¯ä¸ªå‚ä¸æ–¹çš„æ•°æ®éœ€è¦ä¿æŒç§å¯†ã€‚å…¨åŒæ€åŠ å¯†å¯ä»¥æ”¯æŒå¯¹åŠ å¯†æ•°æ®è¿›è¡Œå¤æ‚çš„è¿ç®—ï¼ˆåŠ æ³•ã€ä¹˜æ³•ã€çŸ©é˜µè¿ç®—ç­‰ï¼‰ï¼Œä»è€Œå®ç°æ•°æ®å…±äº«ä¸éšç§ä¿æŠ¤çš„å¹³è¡¡ã€‚</li>
<li><strong>åŠ å¯†æ•°æ®åº“æŸ¥è¯¢</strong>ï¼šå…¨åŒæ€åŠ å¯†å¯ç”¨äºå¯¹åŠ å¯†æ•°æ®è¿›è¡Œå¤æ‚æŸ¥è¯¢ï¼Œä¾‹å¦‚åŠ å¯†çš„æ•°æ®åº“ä¸­è¿›è¡ŒåŠ æ³•ã€ä¹˜æ³•ã€èšåˆç­‰æ“ä½œï¼Œè¿”å›åŠ å¯†çš„æŸ¥è¯¢ç»“æœã€‚è¿™å¯¹äºåŠ å¯†æ•°æ®åº“çš„éšç§ä¿æŠ¤å’Œåˆè§„æ€§è¦æ±‚è‡³å…³é‡è¦ã€‚</li>
<li><strong>å®‰å…¨å¤šæ–¹è®¡ç®—</strong>ï¼šä¾‹å¦‚ï¼Œåœ¨å»ä¸­å¿ƒåŒ–çš„é‡‘èï¼ˆDeFiï¼‰ç³»ç»Ÿä¸­ï¼Œå¤šä¸ªç‹¬ç«‹çš„å‚ä¸æ–¹å¯ä»¥ç”¨å…¨åŒæ€åŠ å¯†åè®®æ‰§è¡Œè®¡ç®—ï¼ˆå¦‚èµ„äº§è®¡ç®—ã€é£é™©è¯„ä¼°ç­‰ï¼‰ï¼Œä¿è¯æ•°æ®éšç§çš„åŒæ—¶å®Œæˆå¤æ‚çš„è®¡ç®—ä»»åŠ¡ã€‚</li>
<li><strong>ç”Ÿç‰©ä¿¡æ¯å­¦ä¸åŸºå› æ•°æ®åˆ†æ</strong>ï¼šå…¨åŒæ€åŠ å¯†å¯ä»¥ä¿æŠ¤åŸºå› æ•°æ®çš„éšç§ï¼Œåœ¨åŠ å¯†çš„åŸºå› ç»„æ•°æ®ä¸Šè¿›è¡Œè®¡ç®—ï¼Œå¦‚åŸºå› æ¯”å¯¹ã€é—ä¼ ç®—æ³•ç­‰ï¼Œé¿å…æ•æ„Ÿæ•°æ®æ³„æ¼ã€‚</li>
</ul>
</li>
<li><strong>éšç§ä¿æŠ¤çš„æœºå™¨å­¦ä¹ ä¸äººå·¥æ™ºèƒ½</strong>ï¼š<ul>
<li>å…¨åŒæ€åŠ å¯†ä½¿å¾—æœºå™¨å­¦ä¹ å’ŒAIç®—æ³•èƒ½å¤Ÿåœ¨åŠ å¯†æ•°æ®ä¸Šç›´æ¥æ‰§è¡Œï¼Œä¸å¿…è§£å¯†æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨åŠ å¯†æ•°æ®è®­ç»ƒæ¨¡å‹æˆ–åœ¨åŠ å¯†æ•°æ®ä¸Šåšæ¨ç†ï¼Œä¿è¯æ•°æ®éšç§åŒæ—¶è¿›è¡Œæ™ºèƒ½åˆ†æã€‚</li>
</ul>
</li>
<li><strong>åŠ å¯†æ•°æ®çš„å¤æ‚å¤„ç†</strong>ï¼š<ul>
<li><strong>æ™ºèƒ½åˆçº¦</strong>ï¼šåœ¨åŒºå—é“¾æ™ºèƒ½åˆçº¦ä¸­ï¼Œå…¨åŒæ€åŠ å¯†å¯ä»¥ä½¿å¾—åˆçº¦èƒ½å¤Ÿåœ¨åŠ å¯†çŠ¶æ€ä¸‹å¤„ç†æ›´å¤æ‚çš„é€»è¾‘ï¼Œä¾‹å¦‚åŠ å¯†çš„æ•°æ®è®¡ç®—ã€éªŒè¯ç­‰ä»»åŠ¡ã€‚<br><strong>ä¼˜åŠ¿ï¼š</strong></li>
</ul>
</li>
<li><strong>æ”¯æŒå¤æ‚è¿ç®—</strong>ï¼šå…¨åŒæ€åŠ å¯†ä¸ä»…æ”¯æŒåŠ æ³•ï¼Œè¿˜æ”¯æŒä¹˜æ³•åŠå…¶ä»–æ›´å¤æ‚çš„è¿ç®—ï¼Œéå¸¸é€‚åˆæ¶‰åŠå¤æ‚æ•°æ®å¤„ç†çš„åœºæ™¯ã€‚</li>
<li><strong>å¼ºéšç§ä¿æŠ¤</strong>ï¼šå¯ä»¥åœ¨å®Œå…¨ä¸æš´éœ²æ•°æ®çš„æƒ…å†µä¸‹æ‰§è¡Œå¤æ‚è®¡ç®—ï¼Œä¿éšœæ•°æ®çš„éšç§æ€§ã€‚<br> <strong>å±€é™æ€§ï¼š</strong></li>
<li><strong>è®¡ç®—å¼€é”€è¾ƒå¤§</strong>ï¼šå…¨åŒæ€åŠ å¯†çš„è®¡ç®—å’ŒåŠ å¯†å¯†æ–‡çš„å¤§å°ç›¸å¯¹è¾ƒå¤§ï¼Œå› æ­¤æ•ˆç‡è¾ƒä½ï¼Œä¸é€‚åˆå¤„ç†éå¸¸å¤§è§„æ¨¡çš„æ•°æ®æˆ–å®æ—¶æ€§è¦æ±‚è¾ƒé«˜çš„ä»»åŠ¡ã€‚</li>
<li><strong>å®ç°å¤æ‚</strong>ï¼šå…¨åŒæ€åŠ å¯†çš„å®ç°è¾ƒä¸ºå¤æ‚ï¼Œé€šå¸¸éœ€è¦ä¸“é—¨çš„ç¡¬ä»¶æˆ–ä¼˜åŒ–çš„è®¡ç®—ç¯å¢ƒæ¥æå‡æ€§èƒ½ã€‚</li>
</ul>
<hr>
<h3 id="2-4-åŠ æ³•åŒæ€åŠ å¯†-vs-å…¨åŒæ€åŠ å¯†ï¼šå¯¹æ¯”æ€»ç»“"><a href="#2-4-åŠ æ³•åŒæ€åŠ å¯†-vs-å…¨åŒæ€åŠ å¯†ï¼šå¯¹æ¯”æ€»ç»“" class="headerlink" title="2.4 åŠ æ³•åŒæ€åŠ å¯† vs å…¨åŒæ€åŠ å¯†ï¼šå¯¹æ¯”æ€»ç»“"></a>2.4 <strong>åŠ æ³•åŒæ€åŠ å¯† vs å…¨åŒæ€åŠ å¯†ï¼šå¯¹æ¯”æ€»ç»“</strong></h3><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>åŠ æ³•åŒæ€åŠ å¯†</th>
<th>å…¨åŒæ€åŠ å¯†</th>
</tr>
</thead>
<tbody><tr>
<td><strong>æ”¯æŒè¿ç®—ç±»å‹</strong></td>
<td>ä»…æ”¯æŒåŠ æ³•æ“ä½œ</td>
<td>æ”¯æŒåŠ æ³•ã€ä¹˜æ³•ç­‰ä»»æ„è¿ç®—</td>
</tr>
<tr>
<td><strong>è®¡ç®—å¤æ‚åº¦</strong></td>
<td>è¾ƒä½ï¼Œè¿ç®—æ•ˆç‡è¾ƒé«˜</td>
<td>è¾ƒé«˜ï¼Œè¿ç®—æ•ˆç‡ä½</td>
</tr>
<tr>
<td><strong>é€‚ç”¨åœºæ™¯</strong></td>
<td>æ•°æ®æ±‡æ€»ã€ç»Ÿè®¡ã€åŠ æƒæ±‚å’Œã€è®¡æ•°ç­‰ç®€å•åŠ æ³•è¿ç®—</td>
<td>å®‰å…¨è®¡ç®—ã€æœºå™¨å­¦ä¹ ã€å¤æ‚æŸ¥è¯¢ã€åŠ å¯†æ•°æ®åº“ç­‰å¤æ‚è¿ç®—</td>
</tr>
<tr>
<td><strong>éšç§ä¿æŠ¤</strong></td>
<td>ä¿è¯æ•°æ®éšç§ï¼Œä½†åªé™äºåŠ æ³•è®¡ç®—</td>
<td>æ›´å¼ºçš„éšç§ä¿æŠ¤ï¼Œæ”¯æŒå¤æ‚çš„åŠ å¯†æ•°æ®å¤„ç†</td>
</tr>
<tr>
<td><strong>å¯†æ–‡å¤§å°</strong></td>
<td>ç›¸å¯¹è¾ƒå°</td>
<td>ç›¸å¯¹è¾ƒå¤§</td>
</tr>
<tr>
<td><strong>è®¡ç®—èƒ½åŠ›</strong></td>
<td>é«˜æ•ˆä¸”é€‚åˆç®€å•ä»»åŠ¡</td>
<td>é€‚åˆå¤æ‚ä»»åŠ¡ï¼Œä½†å¼€é”€è¾ƒå¤§</td>
</tr>
<tr>
<td><strong>æŠ€æœ¯å¤æ‚åº¦</strong></td>
<td>å®ç°è¾ƒç®€å•</td>
<td>å®ç°å¤æ‚ï¼Œé€šå¸¸éœ€è¦ç‰¹æ®Šä¼˜åŒ–</td>
</tr>
</tbody></table>
<h2 id="3-åŸºäºå®‰å…¨ç­‰çº§çš„å¯†é’¥é•¿åº¦é€‰å–æ–¹æ³•"><a href="#3-åŸºäºå®‰å…¨ç­‰çº§çš„å¯†é’¥é•¿åº¦é€‰å–æ–¹æ³•" class="headerlink" title="3.åŸºäºå®‰å…¨ç­‰çº§çš„å¯†é’¥é•¿åº¦é€‰å–æ–¹æ³•"></a>3.åŸºäºå®‰å…¨ç­‰çº§çš„å¯†é’¥é•¿åº¦é€‰å–æ–¹æ³•</h2><h3 id="3-1-PaillieråŠ å¯†çš„å¯†é’¥é•¿åº¦é€‰å–"><a href="#3-1-PaillieråŠ å¯†çš„å¯†é’¥é•¿åº¦é€‰å–" class="headerlink" title="3.1 PaillieråŠ å¯†çš„å¯†é’¥é•¿åº¦é€‰å–"></a>3.1 <strong>PaillieråŠ å¯†çš„å¯†é’¥é•¿åº¦é€‰å–</strong></h3><p>Paillier åŠ å¯†æ˜¯ä¸€ç§åŠ æ³•åŒæ€åŠ å¯†æ–¹æ¡ˆï¼Œå…¶å®‰å…¨æ€§é€šå¸¸åŸºäºå¤§æ•°åˆ†è§£çš„å›°éš¾æ€§ï¼ˆç‰¹åˆ«æ˜¯æ•´æ•°åˆ†è§£é—®é¢˜ï¼‰ã€‚</p>
<h4 id="PaillieråŠ å¯†çš„å®‰å…¨æ€§åˆ†æ"><a href="#PaillieråŠ å¯†çš„å®‰å…¨æ€§åˆ†æ" class="headerlink" title="PaillieråŠ å¯†çš„å®‰å…¨æ€§åˆ†æ"></a><strong>PaillieråŠ å¯†çš„å®‰å…¨æ€§åˆ†æ</strong></h4><ul>
<li>Paillier åŠ å¯†çš„å®‰å…¨æ€§ä¸»è¦ä¾èµ–äºç”Ÿæˆçš„ä¸¤ä¸ªå¤§ç´ æ•°çš„ä¿å¯†æ€§ã€‚</li>
<li>å¯†é’¥é•¿åº¦çš„é€‰æ‹©é€šå¸¸åŸºäºç›®æ ‡çš„å®‰å…¨ç­‰çº§ï¼ˆä¾‹å¦‚ 128 ä½ã€192 ä½æˆ– 256 ä½çš„å®‰å…¨æ€§ï¼‰ã€‚</li>
</ul>
<h4 id="å¯†é’¥é•¿åº¦çš„é€‰å–æ–¹æ³•"><a href="#å¯†é’¥é•¿åº¦çš„é€‰å–æ–¹æ³•" class="headerlink" title="å¯†é’¥é•¿åº¦çš„é€‰å–æ–¹æ³•"></a><strong>å¯†é’¥é•¿åº¦çš„é€‰å–æ–¹æ³•</strong></h4><p>PaillieråŠ å¯†çš„å¯†é’¥é•¿åº¦é€šå¸¸æ˜¯é€šè¿‡ä¸¤ä¸ª <strong>ç´ æ•°</strong>ï¼ˆ<code>p</code> å’Œ <code>q</code>ï¼‰çš„ä½æ•°æ¥ç¡®å®šçš„ã€‚å¯†é’¥çš„å¤§å°å¤§è‡´ç­‰äºä¸¤ä¸ªç´ æ•°çš„ä¹˜ç§¯ <code>n = p * q</code> çš„ä½æ•°<br><strong>128ä½å®‰å…¨æ€§ï¼š</strong><br>å¯¹äº <strong>128ä½å®‰å…¨æ€§</strong>ï¼Œé€‰æ‹© <strong>1024ä½</strong>çš„å¯†é’¥é•¿åº¦æ˜¯å¸¸è§çš„åšæ³•ã€‚è¿™æ„å‘³ç€é€‰æ‹©ä¸¤ä¸ª <strong>512ä½</strong>çš„å¤§ç´ æ•° <code>p</code> å’Œ <code>q</code> æ¥ç”Ÿæˆå¯†é’¥ã€‚è¿™ä¸ªé•¿åº¦é€‚åˆä¸€èˆ¬çš„å•†ä¸šåº”ç”¨ï¼Œå¦‚åœ¨çº¿æ”¯ä»˜ã€æ•°æ®åŠ å¯†ç­‰ã€‚<br><strong>192ä½å®‰å…¨æ€§ï¼š</strong><br>å¦‚æœä½ éœ€è¦æ›´é«˜çš„å®‰å…¨æ€§ï¼Œå¯ä»¥é€‰æ‹© <strong>1536ä½</strong>çš„å¯†é’¥é•¿åº¦ï¼Œæ„å‘³ç€æ¯ä¸ªç´ æ•°çš„ä½æ•°å¤§çº¦æ˜¯ <strong>768ä½</strong>ã€‚è¿™ä¸ªé•¿åº¦é€‚ç”¨äºå¯¹å®‰å…¨æ€§è¦æ±‚æ›´é«˜çš„åœºåˆï¼Œå¦‚é‡‘èäº¤æ˜“ã€æœºå¯†æ•°æ®å¤„ç†ç­‰ã€‚<br><strong>256ä½å®‰å…¨æ€§ï¼š</strong><br>å¯¹äº <strong>256ä½å®‰å…¨æ€§</strong>ï¼Œå¯ä»¥é€‰æ‹© <strong>2048ä½</strong>çš„å¯†é’¥é•¿åº¦ï¼Œå³æ¯ä¸ªç´ æ•°çš„ä½æ•°æ˜¯ <strong>1024ä½</strong>ã€‚è¿™ä¸ªé•¿åº¦é€‚ç”¨äºé«˜å®‰å…¨éœ€æ±‚çš„ç¯å¢ƒï¼Œå¦‚å›½å®¶å®‰å…¨ã€å†›äº‹æ•°æ®ä¿æŠ¤ç­‰ã€‚</p>
<h3 id="3-2-å…¨åŒæ€åŠ å¯†ï¼ˆFHEï¼‰åŸºäºBFVã€CKKSçš„å¯†é’¥é•¿åº¦é€‰å–"><a href="#3-2-å…¨åŒæ€åŠ å¯†ï¼ˆFHEï¼‰åŸºäºBFVã€CKKSçš„å¯†é’¥é•¿åº¦é€‰å–" class="headerlink" title="3.2 å…¨åŒæ€åŠ å¯†ï¼ˆFHEï¼‰åŸºäºBFVã€CKKSçš„å¯†é’¥é•¿åº¦é€‰å–"></a>3.2 <strong>å…¨åŒæ€åŠ å¯†ï¼ˆFHEï¼‰åŸºäºBFVã€CKKSçš„å¯†é’¥é•¿åº¦é€‰å–</strong></h3><p>å…¨åŒæ€åŠ å¯†ï¼ˆFHEï¼‰æ–¹æ¡ˆï¼Œå¦‚ <strong>BFV</strong>ï¼ˆBrakerski/Fan-Vikuntanathanï¼‰å’Œ <strong>CKKS</strong>ï¼ˆCheon-Kim-Kim-Songï¼‰ï¼Œå®ƒä»¬çš„å®‰å…¨æ€§ä¾èµ–äºâ€œå­¦ä¹ ä¸è¯¯å·®â€ï¼ˆLWEï¼‰å‡è®¾æˆ–å…¶ä»–æ•°å­¦éš¾é¢˜ã€‚FHEæ–¹æ¡ˆçš„å®‰å…¨æ€§é€šå¸¸é€šè¿‡å¯†é’¥å’Œå‚æ•°çš„å¤§å°æ¥ä¿è¯ã€‚</p>
<h4 id="å¯†é’¥é•¿åº¦é€‰æ‹©çš„å½±å“å› ç´ "><a href="#å¯†é’¥é•¿åº¦é€‰æ‹©çš„å½±å“å› ç´ " class="headerlink" title="å¯†é’¥é•¿åº¦é€‰æ‹©çš„å½±å“å› ç´ "></a><strong>å¯†é’¥é•¿åº¦é€‰æ‹©çš„å½±å“å› ç´ </strong></h4><ul>
<li><strong>å¤šé¡¹å¼åº¦æ•°ï¼ˆPoly Modulus Degreeï¼‰</strong>ï¼š<ul>
<li>å¤šé¡¹å¼åº¦æ•°é€šå¸¸ä»¥2çš„å¹‚æ¬¡æ–¹è¡¨ç¤ºã€‚å¸¸è§çš„åº¦æ•°æœ‰ 1024, 2048, 4096, 8192 ç­‰</li>
<li>è¿™å†³å®šäº†å¯†æ–‡çš„å¤§å°ï¼Œåº¦æ•°è¶Šå¤§ï¼Œå¯†æ–‡è¶Šå¤§ï¼Œè®¡ç®—èƒ½åŠ›è¦æ±‚è¶Šé«˜ã€‚é€šå¸¸ï¼Œé€‰æ‹©æ›´é«˜çš„åº¦æ•°ä»¥æé«˜å®‰å…¨æ€§ï¼Œä½†ä¹Ÿä¼šå¸¦æ¥æ›´é«˜çš„è®¡ç®—æˆæœ¬ã€‚</li>
<li>å¤šé¡¹å¼åº¦æ•°ä¹Ÿä¸åŒæ€æ“ä½œçš„æ•ˆç‡ç›¸å…³ã€‚å¤šé¡¹å¼åº¦æ•°è¶Šå¤§ï¼Œæ”¯æŒçš„åŒæ€æ“ä½œï¼ˆå¦‚åŠ æ³•ã€ä¹˜æ³•ç­‰ï¼‰å°±è¶Šå¤šï¼Œä½†è®¡ç®—å¤æ‚åº¦å’Œå­˜å‚¨éœ€æ±‚ä¹Ÿä¼šå¢åŠ ã€‚</li>
<li>å†³å®šäº†å¤šé¡¹å¼çš„é•¿åº¦ï¼Œå³å‚ä¸è®¡ç®—çš„ç³»æ•°çš„æ•°é‡ã€‚</li>
</ul>
</li>
<li><strong>ç³»æ•°æ¨¡æ•°ï¼ˆCoeff Mod Bit Sizesï¼‰</strong>ï¼š<ul>
<li>å¸¸è§çš„ä½æ•°æœ‰ 60 ä½ã€40 ä½ã€20 ä½ç­‰</li>
<li>è¿™æ˜¯æŒ‡æ¯ä¸ªåŠ å¯†æ•°çš„å¤§å°ï¼Œä½æ•°è¶Šé«˜ï¼Œè¡¨ç¤ºæ¯ä¸ªæ•°å¯ä»¥å­˜å‚¨æ›´å¤§çš„å€¼ï¼Œå› æ­¤ä¹Ÿæé«˜äº†å®‰å…¨æ€§ã€‚</li>
<li>ç³»æ•°æ¨¡æ•°å½±å“åŠ å¯†è¿‡ç¨‹ä¸­æ•°å€¼çš„â€œå™ªå£°â€æ°´å¹³ã€‚å™ªå£°è¿‡å¤§å¯èƒ½ä¼šå¯¼è‡´è§£å¯†é”™è¯¯ï¼Œå› æ­¤ç³»æ•°æ¨¡æ•°çš„é€‰æ‹©å¿…é¡»å¹³è¡¡å®‰å…¨æ€§å’Œå™ªå£°ç®¡ç†ã€‚</li>
<li>å†³å®šäº†æ¯ä¸ªå¤šé¡¹å¼ç³»æ•°çš„å¤§å°å’ŒèŒƒå›´ï¼Œé€šå¸¸éœ€è¦å¤§äºå¤šé¡¹å¼çš„å¤§å°ã€‚</li>
</ul>
</li>
</ul>
<h4 id="BFVåŠ å¯†çš„å¯†é’¥é•¿åº¦é€‰å–"><a href="#BFVåŠ å¯†çš„å¯†é’¥é•¿åº¦é€‰å–" class="headerlink" title="BFVåŠ å¯†çš„å¯†é’¥é•¿åº¦é€‰å–"></a><strong>BFVåŠ å¯†çš„å¯†é’¥é•¿åº¦é€‰å–</strong></h4><p>BFV åŠ å¯†æ–¹æ¡ˆå¹¿æ³›åº”ç”¨äºåŠ å¯†è®¡ç®—å’ŒåŒæ€è¿ç®—ã€‚BFV çš„å®‰å…¨æ€§ä¾èµ–äº <strong>å¤§æ•´æ•°çš„åˆ†è§£é—®é¢˜</strong> å’Œ <strong>å™ªå£°çš„ç§¯ç´¯</strong>ã€‚</p>
<ul>
<li><strong>åŠ å¯†å®‰å…¨æ€§</strong>ï¼šé€‰æ‹© BFV æ—¶ï¼Œå¯†é’¥å¤§å°å’Œå¤šé¡¹å¼çš„åº¦æ•°å†³å®šäº†å®‰å…¨æ€§ç­‰çº§ã€‚</li>
<li><strong>å¯†é’¥é•¿åº¦ä¸å®‰å…¨ç­‰çº§</strong>ï¼š<ul>
<li><strong>128 ä½å®‰å…¨æ€§</strong>ï¼šæ¨èä½¿ç”¨ 2048 ä½æˆ– 3072 ä½çš„å…¬é’¥å’Œå¯†é’¥é•¿åº¦ã€‚</li>
<li><strong>192 ä½å®‰å…¨æ€§</strong>ï¼šé€šå¸¸é€‰æ‹© 4096 ä½æˆ–æ›´é•¿çš„å¯†é’¥ã€‚</li>
<li><strong>256 ä½å®‰å…¨æ€§</strong>ï¼šä½¿ç”¨æ›´é•¿çš„å¯†é’¥ï¼ˆå¦‚ 8192 ä½åŠä»¥ä¸Šï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 id="CKKSåŠ å¯†çš„å¯†é’¥é•¿åº¦é€‰å–"><a href="#CKKSåŠ å¯†çš„å¯†é’¥é•¿åº¦é€‰å–" class="headerlink" title="CKKSåŠ å¯†çš„å¯†é’¥é•¿åº¦é€‰å–"></a><strong>CKKSåŠ å¯†çš„å¯†é’¥é•¿åº¦é€‰å–</strong></h4><p>CKKS æ˜¯é’ˆå¯¹<strong>è¿‘ä¼¼åŒæ€åŠ å¯†</strong>ï¼ˆApproximate Homomorphic Encryption, AHEï¼‰çš„ä¸€ç§æ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚ç”¨äºè¿ç»­æ•°æ®å¦‚æµ®ç‚¹æ•°åŠ å¯†ã€‚å®ƒåŸºäº <strong>LWE</strong>ï¼ˆå­¦ä¹ å¸¦è¯¯å·®ï¼‰å‡è®¾ã€‚</p>
<ul>
<li><strong>åŠ å¯†å®‰å…¨æ€§</strong>ï¼šCKKS åŠ å¯†çš„å®‰å…¨æ€§åŒæ ·ä¾èµ–äºå¤šé¡¹å¼çš„åº¦æ•°å’Œç³»æ•°æ¨¡æ•°ã€‚CKKS çš„å¯†é’¥é€‰æ‹©é€šå¸¸ä¸ <strong>poly_modulus_degree</strong>ï¼ˆå¤šé¡¹å¼åº¦æ•°ï¼‰å’Œ <strong>coeff_mod_bit_sizes</strong>ï¼ˆç³»æ•°æ¨¡æ•°ï¼‰ç›¸å…³ã€‚</li>
<li><strong>å¸¸è§çš„å‚æ•°é€‰æ‹©</strong>ï¼š<ul>
<li><strong>128 ä½å®‰å…¨æ€§</strong>ï¼šå¸¸è§çš„é€‰æ‹©æ˜¯ <strong>poly_modulus_degree = 8192</strong> å’Œ **coeff_mod_bit_sizes = [60, 40, 60]**ã€‚</li>
<li><strong>192 ä½å®‰å…¨æ€§</strong>ï¼šé€šå¸¸é€‰æ‹©æ›´å¤§çš„å¤šé¡¹å¼åº¦æ•°ï¼Œå¦‚ <strong>poly_modulus_degree = 16384</strong> å’Œ **coeff_mod_bit_sizes = [60, 40, 60]**ã€‚</li>
<li><strong>256 ä½å®‰å…¨æ€§</strong>ï¼šå¯èƒ½é€‰æ‹© <strong>poly_modulus_degree = 32768</strong> å’Œ **coeff_mod_bit_sizes = [60, 40, 60]**ã€‚</li>
</ul>
</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªåŸºäºå®‰å…¨ç­‰çº§é€‰æ‹©å¯†é’¥é•¿åº¦çš„æ¨èæ–¹æ³•ï¼š</p>
<table>
<thead>
<tr>
<th>å®‰å…¨ç­‰çº§</th>
<th>å¤šé¡¹å¼åº¦æ•°ï¼ˆpoly_modulus_degreeï¼‰</th>
<th>ç³»æ•°æ¨¡æ•°ï¼ˆcoeff_mod_bit_sizesï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td><strong>128ä½å®‰å…¨æ€§</strong></td>
<td>8192</td>
<td>[60, 40, 60]</td>
</tr>
<tr>
<td><strong>192ä½å®‰å…¨æ€§</strong></td>
<td>16384</td>
<td>[60, 50, 60]</td>
</tr>
<tr>
<td><strong>256ä½å®‰å…¨æ€§</strong></td>
<td>16384</td>
<td>[80, 60, 80]</td>
</tr>
</tbody></table>
<h2 id="4-ç»å…¸é—®é¢˜çš„ç¼–ç¨‹å®ç°"><a href="#4-ç»å…¸é—®é¢˜çš„ç¼–ç¨‹å®ç°" class="headerlink" title="4. ç»å…¸é—®é¢˜çš„ç¼–ç¨‹å®ç°"></a>4. ç»å…¸é—®é¢˜çš„ç¼–ç¨‹å®ç°</h2><div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tenseal <span class="keyword">as</span> ts</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. åˆå§‹åŒ– TenSEAL ä¸Šä¸‹æ–‡</span></span><br><span class="line">context = ts.context(ts.SCHEME_TYPE.CKKS, poly_modulus_degree=<span class="number">8192</span>, coeff_mod_bit_sizes=[<span class="number">60</span>, <span class="number">40</span>, <span class="number">60</span>])</span><br><span class="line">context.generate_galois_keys()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. è®¾ç½® global_scale</span></span><br><span class="line">context.global_scale = <span class="number">2</span>**<span class="number">60</span>  <span class="comment"># è®¾ç½®è¾ƒå¤§çš„ global scaleï¼Œé€šå¸¸ä¸º 2 çš„è¾ƒå¤§æ¬¡å¹‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. æ¨¡æ‹Ÿä¸€äº›å·¥èµ„æ•°æ®</span></span><br><span class="line"><span class="comment"># å‡è®¾æœ‰5ä¸ªå‘˜å·¥çš„å·¥èµ„</span></span><br><span class="line">salaries = [<span class="number">5000</span>, <span class="number">5500</span>, <span class="number">6000</span>, <span class="number">6500</span>, <span class="number">7000</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. å¯¹å·¥èµ„æ•°æ®è¿›è¡ŒåŠ å¯†</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨ TenSEAL çš„ ckks_vector è¿›è¡ŒåŠ å¯†</span></span><br><span class="line">encrypted_salaries = [ts.ckks_vector(context, [salary]) <span class="keyword">for</span> salary <span class="keyword">in</span> salaries]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. è®¡ç®—åŠ å¯†å·¥èµ„çš„æ€»å’Œï¼ˆåŒæ€åŠ æ³•ï¼‰</span></span><br><span class="line">encrypted_sum = encrypted_salaries[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">for</span> encrypted_salary <span class="keyword">in</span> encrypted_salaries[<span class="number">1</span>:]:</span><br><span class="line">    encrypted_sum = encrypted_sum + encrypted_salary</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6. è®¡ç®—æ€»å’Œçš„å¹³å‡å·¥èµ„ï¼ˆè§£å¯†å¾—åˆ°ç»“æœï¼‰</span></span><br><span class="line"><span class="comment"># è®¡ç®—æ€»å’Œä¹‹åé™¤ä»¥å·¥èµ„æ•°é‡</span></span><br><span class="line">decrypted_sum = encrypted_sum.decrypt()</span><br><span class="line">decrypted_average = decrypted_sum[<span class="number">0</span>] / <span class="built_in">len</span>(salaries)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7. è¾“å‡ºç»“æœ</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f"Encrypted total sum of salaries: <span class="subst">{decrypted_sum[<span class="number">0</span>]}</span>"</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f"Encrypted average salary: <span class="subst">{decrypted_average}</span>"</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div>

<p>![[./Pasted image 20241117212240.png|Pasted image 20241117212240]]</p>
]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
  </entry>
  <entry>
    <title>ç¬”è®°è¿ç§»åˆ°åšå®¢çš„å›¾ç‰‡é—®é¢˜æœ€ç»ˆè§£å†³æ–¹æ¡ˆ</title>
    <url>/2025/03/dfeeaecfbe86.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>å“ˆå“ˆå“ˆ<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020250308200727.png"><br>åˆ†ä¸¤ç§æƒ…å†µï¼š</p>
<ol>
<li>åœ¨å­¦ä¹ ä»“åº“é‡Œç¼–è¾‘çš„æ–‡ç« ï¼Œé€šè¿‡obçš„envelopeæ’ä»¶ä¼ åˆ°githubï¼Œç„¶åpullåæ‰§è¡Œè„šæœ¬ï¼Œè„šæœ¬å®ç°ç§»åŠ¨å›¾ç‰‡åŠ ä¿®æ”¹.mdä¸­å›¾ç‰‡å†…é“¾<ul>
<li>åœ¨å­¦ä¹ ä»“åº“é‡Œè¿˜æ˜¯<code>![[]]</code>æ ¼å¼,ä¸”é€‰æ‹©å†…éƒ¨é“¾æ¥ç±»å‹ä¸ºâ€œå°½å¯èƒ½ç®€çŸ­æ¨¡å¼â€ï¼Œ<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020250308210735.png">è¿™ä¸ªè¦å…³æ‰</li>
</ul>
</li>
</ol>
<div class="highlight-container" data-rel="Python"><figure class="iseeu highlight python"><table><tbody><tr><td class="code"><pre><span class="line">	<span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">move_images_and_update_links</span>(<span class="params">posts_dir, images_dir</span>):</span><br><span class="line"></span><br><span class="line"><span class="comment"># éå†_postsæ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰.mdæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(posts_dir):</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> file.endswith(<span class="string">'.md'</span>):</span><br><span class="line"></span><br><span class="line">md_file_path = os.path.join(root, file)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f"æ­£åœ¨å¤„ç†æ–‡ä»¶: <span class="subst">{md_file_path}</span>"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ–‡ä»¶æƒé™ï¼Œç¡®ä¿å®ƒå¯å†™</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.access(md_file_path, os.W_OK):</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f"æ²¡æœ‰å†™æƒé™: <span class="subst">{md_file_path}</span>"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¼€.mdæ–‡ä»¶å¹¶è¯»å–å†…å®¹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(md_file_path, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line"></span><br><span class="line">content = f.read()</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾.mdæ–‡ä»¶ä¸­æ‰€æœ‰çš„å›¾ç‰‡é“¾æ¥ï¼Œå¤„ç† ![[...|...]] æ ¼å¼</span></span><br><span class="line"></span><br><span class="line">new_content = content</span><br><span class="line"></span><br><span class="line">image_links = re.findall(<span class="string">r'!\[\[(.*?)\|.*?\]\]'</span>, content)</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> image_links:</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f"æœªæ‰¾åˆ°å›¾ç‰‡é“¾æ¥: <span class="subst">{md_file_path}</span>"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> image_link <span class="keyword">in</span> image_links:</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§„èŒƒåŒ–è·¯å¾„ï¼Œå»æ‰ './' éƒ¨åˆ†</span></span><br><span class="line"></span><br><span class="line">image_link = os.path.normpath(image_link) <span class="comment"># å»æ‰ './' ç­‰æ— æ•ˆéƒ¨åˆ†</span></span><br><span class="line"></span><br><span class="line">image_name = os.path.basename(image_link)</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—å›¾ç‰‡çš„æºè·¯å¾„</span></span><br><span class="line"></span><br><span class="line">source_image_path = os.path.join(root, image_name)</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœå›¾ç‰‡é“¾æ¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œå°è¯•æ‹¼æ¥å®Œæ•´è·¯å¾„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(source_image_path):</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœå›¾ç‰‡åœ¨å­ç›®å½•ä¸­ï¼Œå°è¯•è°ƒæ•´è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">source_image_path = os.path.join(posts_dir, image_link)</span><br><span class="line"></span><br><span class="line">destination_image_path = os.path.join(images_dir, image_name)</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f"æ£€æŸ¥å›¾ç‰‡è·¯å¾„: <span class="subst">{source_image_path}</span>"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥å›¾ç‰‡æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> os.path.exists(source_image_path):</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f"æ­£åœ¨ç§»åŠ¨å›¾ç‰‡: <span class="subst">{image_name}</span>"</span>)</span><br><span class="line"></span><br><span class="line">shutil.move(source_image_path, destination_image_path)</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨.mdæ–‡ä»¶ä¸­å°†ç©ºæ ¼æ›¿æ¢ä¸º %20</span></span><br><span class="line"></span><br><span class="line">new_link = <span class="string">f'![](../images/<span class="subst">{urllib.parse.quote(image_name)}</span>)'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åªæ›¿æ¢å½“å‰å¤„ç†çš„å›¾ç‰‡é“¾æ¥</span></span><br><span class="line"></span><br><span class="line">new_content = re.sub(<span class="string">r'!\[\['</span> + re.escape(image_link) + <span class="string">r'\|.*?\]\]'</span>, new_link, new_content)</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f"å›¾ç‰‡ä¸å­˜åœ¨: <span class="subst">{source_image_path}</span>"</span>)</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ–‡ä»¶å†…å®¹æ˜¯å¦å®é™…å˜åŒ–</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> new_content != content:</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f"æ–‡ä»¶å†…å®¹å·²æ›´æ”¹ï¼Œä¿å­˜ä¿®æ”¹: <span class="subst">{md_file_path}</span>"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(md_file_path, <span class="string">'w'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line"></span><br><span class="line">f.write(new_content)</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f"æ–‡ä»¶å†…å®¹æœªå˜åŒ–: <span class="subst">{md_file_path}</span>"</span>)</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®_postså’Œimagesæ–‡ä»¶å¤¹è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">posts_dir = <span class="string">'./myblog/source/_posts'</span> <span class="comment"># è¯·æ›¿æ¢ä¸ºä½ å®é™…çš„è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">images_dir = <span class="string">'./myblog/source/images'</span> <span class="comment"># è¯·æ›¿æ¢ä¸ºä½ å®é™…çš„è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">move_images_and_update_links(posts_dir, images_dir)</span><br></pre></td></tr></tbody></table></figure></div>
<ol>
<li>åœ¨åšå®¢ä»“åº“é‡Œç¼–è¾‘çš„æ–‡ç« ï¼Œè¿›è¡Œä»¥ä¸‹è®¾ç½®<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020250308201636.png"></li>
</ol>
]]></content>
      <categories>
        <category>å˜¿å˜¿</category>
      </categories>
  </entry>
  <entry>
    <title>è½¯ä»¶å®‰å…¨ç¬”è®°</title>
    <url>/2025/03/9dcfeb082e77.html</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h4 id="åŸºç¡€æ¦‚å¿µ"><a href="#åŸºç¡€æ¦‚å¿µ" class="headerlink" title="åŸºç¡€æ¦‚å¿µ"></a>åŸºç¡€æ¦‚å¿µ</h4><ul>
<li><p>ç½‘ç»œç©ºé—´å®‰å…¨ä¸»è¦å›´ç»•ç½‘ç»œç©ºé—´ä¸­æ‰€å­˜åœ¨çš„å®‰å…¨é—®é¢˜å¼€å±•ç ”ç©¶</p>
<ul>
<li>ç”µç£è®¾å¤‡</li>
<li>ç”µå­ä¿¡æ¯ç³»ç»Ÿ</li>
<li>ç½‘ç»œ</li>
<li>è¿è¡Œæ•°æ®</li>
<li>ç³»ç»Ÿåº”ç”¨</li>
</ul>
</li>
<li><p>è½¯ä»¶å®‰å…¨èŒƒå›´ï¼šæ“ä½œç³»ç»Ÿã€æ•°æ®åº“ã€åº”ç”¨è½¯ä»¶ç­‰</p>
</li>
<li><p>è½¯ä»¶å®‰å…¨å…³æ³¨è®¡ç®—æœºç¨‹åºæˆ–ç¨‹åºä¸­æ‰€åŒ…å«ä¿¡æ¯çš„å®Œæ•´æ€§ã€æœºå¯†æ€§å’Œå¯ç”¨æ€§ç­‰</p>
</li>
<li><p>è½¯ä»¶å®‰å…¨ç¼ºé™·</p>
<ul>
<li>è½¯ä»¶<strong>æ¼æ´</strong>æ˜¯åŸºæœ¬å½¢æ€ï¼Œ<strong>æ¶æ„ä»£ç </strong>åˆ™æ˜¯å»¶ä¼¸çš„å½¢æ€</li>
</ul>
</li>
<li><p>è½¯ä»¶å®‰å…¨é£é™©</p>
<ul>
<li>è¾“å…¥éªŒè¯ä¸è¡¨ç¤º<ul>
<li>å®‰å…¨é—®é¢˜å¾€å¾€éƒ½æ˜¯ç”±äºå¯¹è¾“å…¥çš„ä¿¡æ¯è¿‡åº¦ä¿¡ä»»é€ æˆçš„</li>
<li>ä¸»è¦é—®é¢˜åŒ…æ‹¬<ul>
<li><p>ç¼“å†²åŒºæº¢å‡º</p>
<ul>
<li>æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼ˆFormat Stringï¼‰ï¼Œå…è®¸æ”»å‡»è€…æ§åˆ¶ä¸€ä¸ªå‡½æ•°çš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œå¯èƒ½ä¼šå¼•èµ·ç¼“å†²åŒºæº¢å‡ºï¼›</li>
<li>éæ³•æŒ‡é’ˆå€¼</li>
<li>æ•´æ•°æº¢å‡º</li>
<li>å­—ç¬¦ä¸²ç»“æŸé”™è¯¯ï¼Œä¾èµ–äºå­—ç¬¦ä¸²ç»ˆæ­¢ç¬¦æœ‰å¯èƒ½é€ æˆç¼“å†²åŒºæº¢å‡ºï¼›</li>
</ul>
</li>
<li><h2 id="å‘½ä»¤æ³¨å…¥-ç›®å½•æ¸¸å†ï¼ˆPath-Traversalï¼‰å…è®¸ç”¨æˆ·é€šè¿‡è¾“å…¥æ¥æ§åˆ¶æ–‡ä»¶ç³»ç»Ÿæ“ä½œä½¿ç”¨çš„è·¯å¾„ï¼Œä¼šä½¿æ”»å‡»è€…æœ‰æœºä¼šè®¿é—®æˆ–ä¿®æ”¹è¢«ä¿æŠ¤çš„ç³»ç»Ÿèµ„æºï¼›-èµ„æºæ³¨å…¥ï¼šå…è®¸ç”¨æˆ·è¾“å…¥æ§åˆ¶èµ„æºIDå¯èƒ½ä¼šä½¿æ”»å‡»è€…è®¿é—®æˆ–ä¿®æ”¹ç³»ç»Ÿä¿æŠ¤çš„èµ„æºï¼›-é…ç½®æ“æ§ï¼Œå…è®¸å¤–éƒ¨æ§åˆ¶ç³»ç»Ÿè®¾ç½®æœ‰å¯èƒ½ä¼šå¯¼è‡´æœåŠ¡å´©æºƒæˆ–åº”ç”¨ç¨‹åºè¿›è¡Œéæ³•æ“ä½œ-SQLæ³¨å…¥ï¼Œå…è®¸ç”¨æˆ·è¾“å…¥æ¥æ„é€ ä¸€ä¸ªåŠ¨æ€çš„SQLè¯·æ±‚ï¼Œå°†æœ‰å¯èƒ½è®©æ”»å‡»è€…æ§åˆ¶SQLè¯­å¥çš„æ„æ€ï¼Œæ‰§è¡Œä»»æ„çš„SQLæŒ‡ä»¤"><a href="#å‘½ä»¤æ³¨å…¥-ç›®å½•æ¸¸å†ï¼ˆPath-Traversalï¼‰å…è®¸ç”¨æˆ·é€šè¿‡è¾“å…¥æ¥æ§åˆ¶æ–‡ä»¶ç³»ç»Ÿæ“ä½œä½¿ç”¨çš„è·¯å¾„ï¼Œä¼šä½¿æ”»å‡»è€…æœ‰æœºä¼šè®¿é—®æˆ–ä¿®æ”¹è¢«ä¿æŠ¤çš„ç³»ç»Ÿèµ„æºï¼›-èµ„æºæ³¨å…¥ï¼šå…è®¸ç”¨æˆ·è¾“å…¥æ§åˆ¶èµ„æºIDå¯èƒ½ä¼šä½¿æ”»å‡»è€…è®¿é—®æˆ–ä¿®æ”¹ç³»ç»Ÿä¿æŠ¤çš„èµ„æºï¼›-é…ç½®æ“æ§ï¼Œå…è®¸å¤–éƒ¨æ§åˆ¶ç³»ç»Ÿè®¾ç½®æœ‰å¯èƒ½ä¼šå¯¼è‡´æœåŠ¡å´©æºƒæˆ–åº”ç”¨ç¨‹åºè¿›è¡Œéæ³•æ“ä½œ-SQLæ³¨å…¥ï¼Œå…è®¸ç”¨æˆ·è¾“å…¥æ¥æ„é€ ä¸€ä¸ªåŠ¨æ€çš„SQLè¯·æ±‚ï¼Œå°†æœ‰å¯èƒ½è®©æ”»å‡»è€…æ§åˆ¶SQLè¯­å¥çš„æ„æ€ï¼Œæ‰§è¡Œä»»æ„çš„SQLæŒ‡ä»¤" class="headerlink" title="å‘½ä»¤æ³¨å…¥  - ç›®å½•æ¸¸å†ï¼ˆPath Traversalï¼‰å…è®¸ç”¨æˆ·é€šè¿‡è¾“å…¥æ¥æ§åˆ¶æ–‡ä»¶ç³»ç»Ÿæ“ä½œä½¿ç”¨çš„è·¯å¾„ï¼Œä¼šä½¿æ”»å‡»è€…æœ‰æœºä¼šè®¿é—®æˆ–ä¿®æ”¹è¢«ä¿æŠ¤çš„ç³»ç»Ÿèµ„æºï¼›  - èµ„æºæ³¨å…¥ï¼šå…è®¸ç”¨æˆ·è¾“å…¥æ§åˆ¶èµ„æºIDå¯èƒ½ä¼šä½¿æ”»å‡»è€…è®¿é—®æˆ–ä¿®æ”¹ç³»ç»Ÿä¿æŠ¤çš„èµ„æºï¼›  - é…ç½®æ“æ§ï¼Œå…è®¸å¤–éƒ¨æ§åˆ¶ç³»ç»Ÿè®¾ç½®æœ‰å¯èƒ½ä¼šå¯¼è‡´æœåŠ¡å´©æºƒæˆ–åº”ç”¨ç¨‹åºè¿›è¡Œéæ³•æ“ä½œ  - SQLæ³¨å…¥ï¼Œå…è®¸ç”¨æˆ·è¾“å…¥æ¥æ„é€ ä¸€ä¸ªåŠ¨æ€çš„SQLè¯·æ±‚ï¼Œå°†æœ‰å¯èƒ½è®©æ”»å‡»è€…æ§åˆ¶SQLè¯­å¥çš„æ„æ€ï¼Œæ‰§è¡Œä»»æ„çš„SQLæŒ‡ä»¤"></a>å‘½ä»¤æ³¨å…¥<br>  - ç›®å½•æ¸¸å†ï¼ˆPath Traversalï¼‰å…è®¸ç”¨æˆ·é€šè¿‡è¾“å…¥æ¥æ§åˆ¶æ–‡ä»¶ç³»ç»Ÿæ“ä½œä½¿ç”¨çš„è·¯å¾„ï¼Œä¼šä½¿æ”»å‡»è€…æœ‰æœºä¼šè®¿é—®æˆ–ä¿®æ”¹è¢«ä¿æŠ¤çš„ç³»ç»Ÿèµ„æºï¼›<br>  - èµ„æºæ³¨å…¥ï¼šå…è®¸ç”¨æˆ·è¾“å…¥æ§åˆ¶èµ„æºIDå¯èƒ½ä¼šä½¿æ”»å‡»è€…è®¿é—®æˆ–ä¿®æ”¹ç³»ç»Ÿä¿æŠ¤çš„èµ„æºï¼›<br>  - é…ç½®æ“æ§ï¼Œå…è®¸å¤–éƒ¨æ§åˆ¶ç³»ç»Ÿè®¾ç½®æœ‰å¯èƒ½ä¼šå¯¼è‡´æœåŠ¡å´©æºƒæˆ–åº”ç”¨ç¨‹åºè¿›è¡Œéæ³•æ“ä½œ<br>  - SQLæ³¨å…¥ï¼Œå…è®¸ç”¨æˆ·è¾“å…¥æ¥æ„é€ ä¸€ä¸ªåŠ¨æ€çš„SQLè¯·æ±‚ï¼Œå°†æœ‰å¯èƒ½è®©æ”»å‡»è€…æ§åˆ¶SQLè¯­å¥çš„æ„æ€ï¼Œæ‰§è¡Œä»»æ„çš„SQLæŒ‡ä»¤</h2></li>
<li><p>è·¨ç«™è„šæœ¬</p>
<ul>
<li>HTTPåº”ç­”æˆªæ–­ï¼ˆHTTP Response Splittingï¼‰åœ¨åœ¨HTTPå“åº”å¤´ä¸­åŒ…å«æœªç»éªŒè¯çš„æ•°æ®å°†å¯èƒ½å¯¼è‡´ç¼“å­˜ä¸­æ¯’ã€è·¨ç«™è„šæœ¬ã€è·¨ç”¨æˆ·æ”»å‡»æˆ–è€…é¡µé¢åŠ«æŒæ”»å‡»</li>
</ul>
</li>
<li><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020240924215124.png"></p>
</li>
</ul>
</li>
</ul>
</li>
<li>APIè¯¯ç”¨<ul>
<li>APIæ˜¯è°ƒç”¨è€…ä¸è¢«è°ƒç”¨è€…ä¹‹é—´çš„ä¸€ä¸ªçº¦å®šï¼Œå¤§å¤šæ•°çš„APIè¯¯ç”¨æ˜¯ç”±äºè°ƒç”¨è€…æ²¡æœ‰ç†è§£çº¦å®šçš„ç›®çš„æ‰€é€ æˆçš„ã€‚</li>
</ul>
</li>
<li>å®‰å…¨ç‰¹å¾</li>
<li>æ—¶é—´ä¸çŠ¶æ€</li>
<li>é”™è¯¯å¤„ç†</li>
<li>ä»£ç è´¨é‡</li>
<li>å°è£…</li>
<li>ç¯å¢ƒ</li>
</ul>
</li>
<li><p>è½¯ä»¶æ¼æ´çš„å±å®³</p>
<ul>
<li>æ— æ³•æ­£å¸¸ä½¿ç”¨</li>
<li>å¼•å‘æ¶æ€§äº‹ä»¶</li>
<li>å…³é”®æ•°æ®ä¸¢å¤±</li>
<li>ç§˜å¯†ä¿¡æ¯æ³„æ¼</li>
<li>è¢«å®‰è£…æœ¨é©¬ç—…æ¯’</li>
</ul>
</li>
<li><p>è½¯ä»¶æ¼æ´å‡ºç°çš„åŸå› </p>
<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241112223417.png"></li>
</ul>
</li>
</ul>
<p>ä¿®æ”¹å…¨å±€åç§»è¡¨<br>Î©</p>
<p>.dotorsåŒº<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241024102451.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241024102726.png"><br>å¯¹äºæ”»å‡»è€…è€Œè¨€ï¼Œè¦†å†™.dtorsåŒºçš„å¥½å¤„åœ¨äºï¼š</p>
<p>â€¢ è¯¥åŒºæ€»æ˜¯å­˜åœ¨å¹¶ä¸”ä¼šæ˜ å°„åˆ°å†…å­˜ä¸­</p>
<p>ç„¶è€Œï¼š</p>
<p>â€¢ .dtorsä»…å­˜åœ¨äºç”¨GCCç¼–è¯‘å’Œé“¾æ¥çš„ç¨‹åºä¸­</p>
<h5 id="è™šå‡½æ•°"><a href="#è™šå‡½æ•°" class="headerlink" title="è™šå‡½æ•°"></a>è™šå‡½æ•°</h5><p>æ­¤æ–¹æ³•åœ¨windowä¸­ä¹Ÿå¯ä½¿ç”¨</p>
<p>æ²¡è™šå‡½æ•°å°±æ²¡VRTR<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241024103442.png"></p>
<p>å¯ä»¥æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p>
<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241024104336.png"></li>
</ul>
<h5 id="4-atexit-on-exit"><a href="#4-atexit-on-exit" class="headerlink" title="4. atexit() on_exit()"></a>4. atexit() on_exit()</h5><h5 id="5-longjmp"><a href="#5-longjmp" class="headerlink" title="5. longjmp()"></a>5. longjmp()</h5><h3 id="ç¼“å†²åŒºæº¢å‡ºåŸºç¡€"><a href="#ç¼“å†²åŒºæº¢å‡ºåŸºç¡€" class="headerlink" title="ç¼“å†²åŒºæº¢å‡ºåŸºç¡€"></a>ç¼“å†²åŒºæº¢å‡ºåŸºç¡€</h3><h4 id="2-1-ç¼“å†²åŒºæº¢å‡ºåŸç†"><a href="#2-1-ç¼“å†²åŒºæº¢å‡ºåŸç†" class="headerlink" title="2.1 ç¼“å†²åŒºæº¢å‡ºåŸç†"></a>2.1 ç¼“å†²åŒºæº¢å‡ºåŸç†</h4><h4 id="2-2-è¿›ç¨‹å†…å­˜ç©ºé—´åˆ†åŒº"><a href="#2-2-è¿›ç¨‹å†…å­˜ç©ºé—´åˆ†åŒº" class="headerlink" title="2.2 è¿›ç¨‹å†…å­˜ç©ºé—´åˆ†åŒº"></a>2.2 è¿›ç¨‹å†…å­˜ç©ºé—´åˆ†åŒº</h4><h5 id="PEæ–‡ä»¶ä¸è™šæ‹Ÿå†…å­˜ä¹‹é—´çš„æ˜ å°„"><a href="#PEæ–‡ä»¶ä¸è™šæ‹Ÿå†…å­˜ä¹‹é—´çš„æ˜ å°„" class="headerlink" title="PEæ–‡ä»¶ä¸è™šæ‹Ÿå†…å­˜ä¹‹é—´çš„æ˜ å°„"></a>PEæ–‡ä»¶ä¸è™šæ‹Ÿå†…å­˜ä¹‹é—´çš„æ˜ å°„</h5><ul>
<li>æ–‡ä»¶åç§»åœ°å€(File Offset)<ul>
<li>æ•°æ®åœ¨PEæ–‡ä»¶ä¸­çš„åœ°å€</li>
<li>æ–‡ä»¶åœ¨ç£ç›˜ä¸Šå­˜æ”¾æ—¶ç›¸å¯¹äºæ–‡ä»¶å¼€å¤´çš„åç§»</li>
<li>æ–‡ä»¶åç§»åœ°å€=RVA-èŠ‚åç§»</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241114101925.png"></li>
</ul>
</li>
<li>è£…è½½åŸºå€Image Base<ul>
<li>PEè£…å…¥å†…å­˜æ—¶çš„åŸºåœ°å€</li>
<li>é»˜è®¤ä¸‹XEæ–‡ä»¶åœ¨å†…å­˜ä¸­çš„åŸºåœ°å€æ˜¯0x00400000</li>
<li>DLLæ–‡ä»¶æ˜¯0x10000000ã€‚</li>
<li>è¿™äº›ä½ç½®å¯ä»¥é€šè¿‡ä¿®æ”¹ç¼–è¯‘é€‰é¡¹æ›´æ”¹ã€‚</li>
</ul>
</li>
<li>è™šæ‹Ÿå†…å­˜åœ°å€Virtual Address,VA<ul>
<li>PEæ–‡ä»¶ä¸­çš„æŒ‡ä»¤è¢«è£…å…¥å†…å­˜åçš„åœ°å€</li>
</ul>
</li>
<li>ç›¸å¯¹è™šæ‹Ÿåœ°å€(Relative Virtual Address,RVA<ul>
<li>å†…å­˜åœ°å€ç›¸å¯¹äºæ˜ å°„åŸºå€çš„åç§»é‡</li>
<li>VA=Image Base +RVA</li>
</ul>
</li>
<li>æ–‡ä»¶åç§»åœ°å€åœ¨è®¡ç®—æ—¶è¦è€ƒè™‘å­˜æ”¾æ–¹å¼çš„ä¸åŒ<ul>
<li>æŒ‰ç…§ç£ç›˜æ•°æ®æ ‡å‡†å­˜æ”¾æ—¶ï¼šPEæ•°æ®èŠ‚çš„å¤§å°æ°¸è¿œæ˜¯0x200çš„æ•´æ•°å€<ul>
<li>ä»¥0x200å­—èŠ‚ä¸ºåŸºæœ¬å•ä½è¿›è¡Œç»„ç»‡ã€‚å½“ä¸€ä¸ªæ•°æ®èŠ‚ä¸è¶³0x200å­—èŠ‚æ—¶ï¼Œä¸è¶³çš„åœ°æ–¹å°†è¢«0x00å¡«å……ï¼›</li>
</ul>
</li>
<li>è£…å…¥å†…å­˜æ—¶ï¼šå°†æŒ‰ç…§å†…å­˜æ•°æ®æ ‡å‡†å­˜æ”¾ï¼Œå¹¶ä»¥0X1000å­—èŠ‚ä¸ºåŸºæœ¬å•ä½è¿›è¡Œç»„ç»‡</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241114100625.png"></li>
<li>è¿™ç§ç”±å­˜å‚¨å•ä½å¼•èµ·çš„èŠ‚åŸºå€å·®å«åšèŠ‚åç§»</li>
</ul>
</li>
</ul>
<h5 id="è¿›ç¨‹ç©ºé—´åŠŸèƒ½åˆ†åŒº"><a href="#è¿›ç¨‹ç©ºé—´åŠŸèƒ½åˆ†åŒº" class="headerlink" title="è¿›ç¨‹ç©ºé—´åŠŸèƒ½åˆ†åŒº"></a>è¿›ç¨‹ç©ºé—´åŠŸèƒ½åˆ†åŒº</h5><ul>
<li>ä»£ç åŒº<ul>
<li>å­˜å‚¨ç€è¢«è£…å…¥æ‰§è¡Œçš„äºŒè¿›åˆ¶æœºå™¨ä»£ç </li>
</ul>
</li>
<li>æ•°æ®åŒº<ul>
<li>å­˜å‚¨å…¨å±€å˜é‡ç­‰</li>
</ul>
</li>
<li>å †åŒº<ul>
<li>åœ¨å †åŒºåŠ¨æ€åœ°è¯·æ±‚ä¸€å®šå¤§å°çš„å†…å­˜ï¼Œå¹¶åœ¨ç”¨å®Œä¹‹åå½’è¿˜ç»™å †åŒº</li>
<li>åŠ¨æ€åˆ†é…å’Œå›æ”¶æ˜¯å †åŒºçš„ç‰¹ç‚¹</li>
</ul>
</li>
<li>æ ˆåŒº<ul>
<li>åŠ¨æ€åœ°å­˜å‚¨å‡½æ•°ä¹‹é—´çš„è°ƒç”¨å…³ç³»</li>
<li>ä¿è¯è¢«è°ƒç”¨å‡½æ•°åœ¨è¿”å›æ—¶æ¢å¤åˆ°çˆ¶å‡½æ•°ä¸­ç»§ç»­æ‰§è¡Œ</li>
</ul>
</li>
</ul>
<h4 id="2-3-ç³»ç»Ÿæ ˆçš„å·¥ä½œåŸç†â€”å†…å­˜çš„ä¸åŒç”¨é€”"><a href="#2-3-ç³»ç»Ÿæ ˆçš„å·¥ä½œåŸç†â€”å†…å­˜çš„ä¸åŒç”¨é€”" class="headerlink" title="2.3 ç³»ç»Ÿæ ˆçš„å·¥ä½œåŸç†â€”å†…å­˜çš„ä¸åŒç”¨é€”"></a>2.3 ç³»ç»Ÿæ ˆçš„å·¥ä½œåŸç†â€”å†…å­˜çš„ä¸åŒç”¨é€”</h4><p>ç¨‹åºä¸­æ‰€ä½¿ç”¨çš„ç¼“å†²åŒºå¯ä»¥æ˜¯å †åŒºã€æ ˆåŒºå’Œå­˜æ”¾é™æ€å˜é‡çš„æ•°æ®åŒºã€‚ç¼“å†²åŒºæº¢å‡ºçš„åˆ©ç”¨æ–¹æ³•å’Œç¼“å†²åŒºåˆ°åº•å±äºä¸Šé¢å“ªä¸ªå†…å­˜åŒºåŸŸå¯†ä¸å¯åˆ†ï¼Œæœ¬è¯¾ä¸»è¦ä»‹ç»åœ¨ç³»ç»Ÿæ ˆå‘ç”Ÿæº¢å‡ºçš„æƒ…å½¢ã€‚</p>
<ul>
<li>å†…å­˜çš„æ ˆåŒºå®é™…ä¸ŠæŒ‡çš„å°±æ˜¯ç³»ç»Ÿæ ˆ<ul>
<li>å¯¹äºç±»ä¼¼ Cè¯­è¨€è¿™æ ·çš„é«˜çº§è¯­è¨€ï¼Œç³»ç»Ÿæ ˆçš„PUSH/POPç­‰å †æ ˆå¹³è¡¡ç»†èŠ‚æ˜¯é€æ˜çš„</li>
<li>ç”¨æ±‡ç¼–è¯­è¨€æ‰éœ€è¦ç›´æ¥å’Œæ ˆæ‰“äº¤é“</li>
</ul>
</li>
<li>æ ˆå­˜å‚¨çš„å†…å®¹<ul>
<li>è°ƒç”¨å‡½æ•°çš„è¿”å›åœ°å€</li>
<li>å‡½æ•°å‚æ•°</li>
<li>å±€éƒ¨ï¼ˆä¸´æ—¶ï¼‰å˜é‡</li>
</ul>
</li>
<li>æ ˆè¢«ä¿®æ”¹çš„æƒ…å†µ<ul>
<li>å‡½æ•°è°ƒç”¨æœŸé—´</li>
<li>å‡½æ•°åˆå§‹åŒ–æœŸé—´</li>
<li>ä»å­ä¾‹ç¨‹è¿”å›æ—¶</li>
</ul>
</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241114110136.png">ä»å†…å­˜é«˜åœ°å€å‘ä½åœ°å€</li>
</ul>
<h4 id="2-4-å‡½æ•°æ ˆå¸§ã€å‡½æ•°è°ƒç”¨åŸç†"><a href="#2-4-å‡½æ•°æ ˆå¸§ã€å‡½æ•°è°ƒç”¨åŸç†" class="headerlink" title="2.4  å‡½æ•°æ ˆå¸§ã€å‡½æ•°è°ƒç”¨åŸç†"></a>2.4  å‡½æ•°æ ˆå¸§ã€å‡½æ•°è°ƒç”¨åŸç†</h4><p>å¸§çš„åœ°å€è¢«å­˜å‚¨åˆ°å¸§æˆ–è€…åŸºå€å¯„å­˜å™¨ä¸­<br>å¸§æŒ‡é’ˆåœ¨æ ˆä¸­æ˜¯ä¸€ä¸ªå®šç‚¹çš„å¼•ç”¨<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202104137.png"><br>å­ç¨‹åºè°ƒç”¨<br>æ‰§è¡Œå‰<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241114115410.png"><br>è¿”å›åœ°å€å³EIP</p>
<ul>
<li><p>è¿›å…¥å‡½æ•°æ—¶ä¼šå‘ç”Ÿçš„ï¼šï¼ˆæ¥ä¸‹æ¥çš„éƒ½æ˜¯è¯¥å‡½æ•°çš„æ ˆå¸§ï¼‰</p>
<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241115141301.png"></li>
<li>push ebpæ˜¯old ebpï¼Œå°†old ebpå­˜åœ¨æ ˆé‡Œ</li>
<li>move ebp,espï¼Œå³ç°åœ¨çš„ebpæ˜¯old esp</li>
<li>å†ä¸ºæ–°çš„å‡½æ•°åˆ†é…ä¸´æ—¶ç©ºé—´<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241115141315.png"></li>
</ul>
</li>
<li><p>å‡½æ•°return()æ—¶ä¼šå‘ç”Ÿçš„</p>
<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241115141356.png"></li>
<li>move esp, ebp: æ¢å¤espæ ˆé¡¶æŒ‡é’ˆä¸ºä¹‹å‰ä¿å­˜çš„old espï¼ŒåŒæ—¶å›æ”¶æ ˆä¸Šçš„å±€éƒ¨å˜é‡</li>
<li>å› ä¸ºä¹‹å‰push ebpäº†ï¼Œpop ebpå³æ¢å¤æ ˆåº•æŒ‡é’ˆï¼ˆpopè¿™ä¸ªå€¼åˆ°EBPå¯„å­˜å™¨ï¼‰</li>
<li>ret ä»æ ˆä¸­å–å‡ºè¿”å›åœ°å€ï¼ˆå³è¿”å›åœ°å€å¼¹ç»™å¯„å­˜å™¨ï¼‰ï¼Œå¹¶jumpåˆ°è¯¥åœ°å€å³è¿”å›ä¹‹å‰çš„ä½ç½®</li>
</ul>
</li>
</ul>
<p>å‡½æ•°æ ˆå¸§(ä»é«˜åœ°å€åˆ°ä½åœ°å€ï¼Œä»å…ˆåœ¨æ ˆé‡Œçš„åˆ°ååœ¨)</p>
<ul>
<li>å‡½æ•°è¿”å›åœ°å€</li>
<li>æ ˆå¸§çŠ¶æ€å€¼ï¼ˆold ebpï¼‰<ul>
<li>old espå¯ä»¥é€šè¿‡å †æ ˆå¹³è¡¡è®¡ç®—çš„åˆ°</li>
<li>ç”¨äºåœ¨æœ¬å¸§è¢«å¼¹å‡ºåæ¢å¤ä¸Šä¸€ä¸ªæ ˆå¸§</li>
</ul>
</li>
<li>å±€éƒ¨å˜é‡<ul>
<li>é€šè¿‡sub espä¸ºå‡½æ•°å±€éƒ¨å˜é‡å¼€è¾Ÿçš„å†…å­˜ç©ºé—´</li>
</ul>
</li>
</ul>
<h6 id="å‡½æ•°è°ƒç”¨çš„æ­¥éª¤"><a href="#å‡½æ•°è°ƒç”¨çš„æ­¥éª¤" class="headerlink" title="å‡½æ•°è°ƒç”¨çš„æ­¥éª¤"></a>å‡½æ•°è°ƒç”¨çš„æ­¥éª¤</h6><ul>
<li>å‚æ•°å…¥æ ˆï¼ˆå‚æ•°ä»å³å‘å·¦ä¸€æ¬¡å‹å…¥ç³»ç»Ÿæ ˆï¼‰</li>
<li>è¿”å›åœ°å€å…¥æ ˆï¼ˆcallæŒ‡ä»¤ï¼‰<ul>
<li>å°†ä¸‹ä¸€è·³æŒ‡ä»¤åœ°å€å…¥æ ˆ</li>
</ul>
</li>
<li>ä»£ç åŒºè·³è½¬ï¼ˆä¿®æ”¹EIPï¼ŒcallæŒ‡ä»¤ï¼‰<ul>
<li>å¤„ç†å™¨ä»å½“å‰ä»£ç åŒºè·³è½¬åˆ°è¢«è°ƒç”¨å‡½æ•°çš„å…¥å£</li>
</ul>
</li>
<li>æ ˆå¸§è°ƒæ•´<ul>
<li>EBPå…¥æ ˆï¼ˆä¿å­˜å½“å‰æ ˆå¸§çŠ¶æ€å€¼ï¼Œä»¥å¤‡åé¢æ¢å¤æœ¬æ ˆå¸§ï¼‰</li>
<li>æ›´æ–°EBPï¼ˆmove ebp,espå°†å½“å‰æ ˆå¸§åˆ‡æ¢åˆ°æ–°æ ˆå¸§</li>
<li>ç»™æ–°æ ˆå¸§åˆ†é…ç©ºé—´ï¼ˆsub espï¼‰<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202114329.png"></li>
</ul>
</li>
</ul>
<h6 id="å‡½æ•°è¿”å›æ­¥éª¤"><a href="#å‡½æ•°è¿”å›æ­¥éª¤" class="headerlink" title="å‡½æ•°è¿”å›æ­¥éª¤"></a>å‡½æ•°è¿”å›æ­¥éª¤</h6><ul>
<li>ä¿å­˜è¿”å›å€¼<ul>
<li>é€šå¸¸ä¿å­˜åœ¨å¯„å­˜å™¨EAX</li>
</ul>
</li>
<li>å¼¹å‡ºå½“å‰æ ˆå¸§ï¼Œæ¢å¤ä¸Šä¸€ä¸ªæ ˆå¸§<ul>
<li>å †æ ˆå¹³è¡¡çš„åŸºç¡€ä¸Šï¼Œç»™ESPåŠ ä¸Šæ ˆå¸§çš„å¤§å°ï¼Œé™ä½æ ˆé¡¶ï¼Œå›æ”¶å½“å‰æ ˆå¸§çš„ç©ºé—´</li>
<li>pop ebpï¼šold ebpå¼¹å‡ºåˆ°EBPå¯„å­˜å™¨ï¼Œæ¢å¤ä¸Šä¸€ä¸ªæ ˆå¸§</li>
<li>ret :å‡½æ•°è¿”å›åœ°å€å¼¹ç»™EIP<ul>
<li>å¹¶æŒ‰è¿”å›åœ°å€jumpå›æ¯å‡½æ•°</li>
</ul>
</li>
</ul>
</li>
<li>ç»§ç»­æ‰§è¡Œ</li>
</ul>
<h6 id="ç¼“å†²åŒºæº¢å‡º"><a href="#ç¼“å†²åŒºæº¢å‡º" class="headerlink" title="ç¼“å†²åŒºæº¢å‡º"></a>ç¼“å†²åŒºæº¢å‡º</h6><p>è¿™æ˜¯å› ä¸ºåœ¨åˆå§‹åŒ–ã€æ‹·è´æˆ–ç§»åŠ¨æ•°æ®æ—¶ï¼ŒCè¯­è¨€å¹¶ä¸è‡ªåŠ¨åœ°æ”¯æŒå†…åœ¨çš„æ•°ç»„è¾¹ç•Œæ£€æŸ¥ã€‚è™½ç„¶è¿™æé«˜äº†è¯­è¨€çš„æ‰§è¡Œæ•ˆç‡ï¼Œä½†å…¶å¸¦æ¥çš„å½±å“åŠåæœå´æ˜¯æ·±è¿œå’Œä¸¥é‡çš„</p>
<ul>
<li>ç¼“å†²åŒºæº¢å‡ºçš„é¢„é˜²<ul>
<li>é™æ€ä¿æŠ¤<ul>
<li>ä¸æ‰§è¡Œä»£ç </li>
<li>ç¼–è¯‘æ—¶åŠ å…¥é™åˆ¶æ¡ä»¶ã€è¿”å›åœ°å€ä¿æŠ¤ã€äºŒè¿›åˆ¶æ”¹å†™æŠ€æœ¯ã€åŸºäºæºç çš„ä»£ç å®¡è®¡</li>
</ul>
</li>
<li>åŠ¨æ€ä¿æŠ¤<ul>
<li>æ‰§è¡Œä»£ç æµ‹è¯•æ˜¯å¦æœ‰æ¼æ´</li>
<li>ä¿æŠ¤ä¸»æœºä¸Šè¿è¡Œçš„ç¨‹åºé˜²æ­¢æ¥è‡ªå¤–éƒ¨çš„ç¼“å†²åŒºæº¢å‡ºæ”»å‡»</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202101303.png"></p>
<h2 id="å­—ç¬¦ä¸²å®‰å…¨"><a href="#å­—ç¬¦ä¸²å®‰å…¨" class="headerlink" title="å­—ç¬¦ä¸²å®‰å…¨"></a>å­—ç¬¦ä¸²å®‰å…¨</h2><p>ä½¿ç”¨Cé£æ ¼çš„å­—ç¬¦ä¸²ç¼–ç¨‹æ˜¯å¾ˆå®¹æ˜“äº§ç”Ÿé”™è¯¯çš„<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206111224.png"></p>
<h3 id="3-1-å¸¸è§å­—ç¬¦ä¸²æ“ä½œé”™è¯¯"><a href="#3-1-å¸¸è§å­—ç¬¦ä¸²æ“ä½œé”™è¯¯" class="headerlink" title="3.1 å¸¸è§å­—ç¬¦ä¸²æ“ä½œé”™è¯¯"></a>3.1 å¸¸è§å­—ç¬¦ä¸²æ“ä½œé”™è¯¯</h3><ul>
<li>æ— ç•Œå­—ç¬¦ä¸²å¤åˆ¶<ul>
<li>ä»ä¸€ä¸ªæ— ç•Œæ•°æ®æºå¤åˆ¶æ•°æ®åˆ°å®šé•¿å­—ç¬¦æ•°ç»„</li>
<li>strcpy()å’Œstrcatï¼ˆï¼‰å‡½æ•°å¤åˆ¶å’Œè¿æ¥å­—ç¬¦ä¹Ÿå®¹æ˜“å‡ºç°é”™è¯¯<ul>
<li>å› ä¸ºæ‰§è¡Œçš„æ˜¯æ— ç•Œå¤åˆ¶</li>
</ul>
</li>
<li>è§£å†³æ–¹æ³•ï¼š<ul>
<li>åŠ¨æ€åˆ†é…å†…å­˜</li>
<li>è®¾ç½®åŸŸå®½<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202152223.png"></li>
</ul>
</li>
</ul>
</li>
<li>ç©ºç»“å°¾é”™è¯¯<ul>
<li>æ•°å­—æŠŠç©ºé—´å æ»¡äº†ï¼Œæ²¡ä½ç½®å†™\0äº†</li>
</ul>
</li>
<li>æˆªæ–­<ul>
<li>ç›®æ ‡å­—ç¬¦æ•°ç»„é•¿åº¦ä¸è¶³ä»¥å®¹çº³ä¸€ä¸ªå­—ç¬¦ä¸²çš„å†…å®¹</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202161257.png"></li>
</ul>
</li>
<li>å·®ä¸€é”™è¯¯<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202161106.png"></li>
</ul>
</li>
<li>æ•°ç»„å†™å…¥è¶Šç•Œ</li>
</ul>
<h3 id="å­—ç¬¦ä¸²æ¼æ´"><a href="#å­—ç¬¦ä¸²æ¼æ´" class="headerlink" title="å­—ç¬¦ä¸²æ¼æ´"></a>å­—ç¬¦ä¸²æ¼æ´</h3><h4 id="ç¼“å†²åŒºæº¢å‡º-1"><a href="#ç¼“å†²åŒºæº¢å‡º-1" class="headerlink" title="ç¼“å†²åŒºæº¢å‡º"></a>ç¼“å†²åŒºæº¢å‡º</h4><p>å½“<strong>å‘</strong>ä¸ºæŸç‰¹å®šæ•°æ®ç»“æ„åˆ†é…çš„<strong>å†…å­˜ç©ºé—´è¾¹ç•Œä¹‹å¤–</strong>å†™å…¥æ•°æ®æ—¶ï¼Œå°±ä¼šå‘ç”Ÿç¼“å†²åŒºæº¢å‡º<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202163220.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202164038.png"></p>
<h4 id="æ ˆç²‰ç¢"><a href="#æ ˆç²‰ç¢" class="headerlink" title="æ ˆç²‰ç¢"></a>æ ˆç²‰ç¢</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202164201.png"></p>
<h4 id="ä»£ç æ³¨å…¥"><a href="#ä»£ç æ³¨å…¥" class="headerlink" title="ä»£ç æ³¨å…¥"></a>ä»£ç æ³¨å…¥</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202171627.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202171707.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202171536.png"></p>
<h4 id="å¼§æ³¨å…¥"><a href="#å¼§æ³¨å…¥" class="headerlink" title="å¼§æ³¨å…¥"></a>å¼§æ³¨å…¥</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202172404.png"><br>æ¼æ´åˆ©ç”¨</p>
<ul>
<li>ç”¨å­˜åœ¨çš„å‡½æ•°åœ°å€è¦†å†™è¿”å›åœ°å€</li>
<li>åˆ›å»ºæ ˆå¸§æ¥é“¾æ¥å‡½æ•°è°ƒç”¨</li>
<li>å†ç°åŸå§‹å¸§è¿”å›çš„ç¨‹åºï¼Œä¸è¿›è¡Œæ£€æµ‹å¹¶æ¢å¤æ‰§è¡Œ</li>
</ul>
<p>å¼§æ³¨å…¥ä¼˜ç‚¹</p>
<ul>
<li>æ”»å‡»è€…å¯ä»¥å°†å¤šä¸ªå‡½æ•°å‚æ•°é“¾åœ¨ä¸€èµ·</li>
<li>ä»£ç æ˜¯é¢„å…ˆå†™å…¥ä»£ç æ®µçš„<ul>
<li>æ²¡æœ‰ä»£ç æ˜¯è¢«æ³¨å…¥çš„</li>
<li>æ‰€ä»¥åŸºäºå†…å­˜æ¨¡å¼çš„ä¿æŠ¤ä¸èƒ½é˜»æ­¢å¼§æ³¨å…¥</li>
<li>ä¸éœ€è¦æ›´å¤§çš„ç¼“å†²åŒºæº¢å‡º</li>
</ul>
</li>
<li>åŸå¸§èƒ½è¢«æ¢å¤ï¼Œè¿™æ ·å¯ä»¥æŠµæŠ—</li>
</ul>
<h3 id="ç¼“è§£æªæ–½"><a href="#ç¼“è§£æªæ–½" class="headerlink" title="ç¼“è§£æªæ–½"></a>ç¼“è§£æªæ–½</h3><ul>
<li>ç¼“è§£æªæ–½åŒ…æ‹¬<ul>
<li>é¢„é˜²</li>
<li>ä¾¦æµ‹ï¼Œå¹¶å®‰å…¨åœ°æ¢å¤ï¼Œä½¿æ¼æ´åˆ©ç”¨çš„ä¼å›¾æ— æ³•å¾—é€</li>
</ul>
</li>
<li>é˜²èŒƒç­–ç•¥<ul>
<li>é™æ€</li>
<li>åŠ¨æ€</li>
</ul>
</li>
</ul>
<h4 id="é™æ€æ–¹æ³•"><a href="#é™æ€æ–¹æ³•" class="headerlink" title="é™æ€æ–¹æ³•"></a>é™æ€æ–¹æ³•</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202184020.png"></p>
<h5 id="è¾“å…¥éªŒè¯"><a href="#è¾“å…¥éªŒè¯" class="headerlink" title="è¾“å…¥éªŒè¯"></a>è¾“å…¥éªŒè¯</h5><p>ç¡®ä¿è¾“å…¥æ•°æ®çš„å¤§å°ä¸è¶…è¿‡å…¶å­˜å‚¨çš„æœ€å°ç¼“å†²åŒº<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202212433.png"></p>
<h5 id="strlcpy-and-strlcat"><a href="#strlcpy-and-strlcat" class="headerlink" title="strlcpy() and strlcat()"></a><strong>strlcpy()</strong> and strlcat()</h5><p>æ›´ä¸å®¹æ˜“å‡ºé”™çš„æ–¹å¼æ¥å¤åˆ¶å’Œé“¾æ¥<br>ä¸¤ä¸ªå‡½æ•°éƒ½<strong>ç¡®ä¿</strong>ç›®æ ‡å­—ç¬¦ä¸²å¯¹æ‰€æœ‰éé›¶é•¿åº¦çš„ç¼“å†²åŒºæ¥è¯´éƒ½æ˜¯<strong>éç©ºç»“å°¾</strong>çš„ã€‚?<br>    ä¿è¯éƒ½æ˜¯\0ç»“å°¾</p>
<ul>
<li><p>strlcpy</p>
<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202213241.png"></li>
<li>&nbsp;ä»<strong>src</strong>å¤åˆ¶ç©ºç»“å°¾çš„å­—ç¬¦ä¸²åˆ°<strong>dst</strong> (ç›´åˆ°<strong>size</strong> å¤§å°çš„å­—ç¬¦)ã€‚</li>
</ul>
</li>
<li><p>strlcat</p>
<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202213312.png"></li>
<li>æŠŠéç©ºç»“å°¾çš„å­—ç¬¦ä¸²<strong>src</strong> è¿æ¥åˆ°<strong>dst</strong>æœ«å°¾ (ä¸è¶…è¿‡<strong>size</strong> çš„å­—ç¬¦éƒ½èƒ½å¤Ÿè¿æ¥åˆ°dstæœ«å°¾)</li>
</ul>
</li>
<li><p>è¯¥æ–¹æ³•å­˜åœ¨çš„é—®é¢˜ï¼š</p>
<ul>
<li>å¯èƒ½å‘ç”Ÿå­—ç¬¦ä¸²æˆªæ–­<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202215426.png"></li>
<li>ä»ç„¶å¯èƒ½ä¼šå¯¼è‡´ç¼“å†²åŒºæº¢å‡º<ul>
<li>æŒ‡å®šçš„ç¼“å†²åŒºå¤§å°æ¯”å®é™…çš„ç¼“å†²åŒºé•¿åº¦é•¿</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="ISO-x2F-IEC-â€œSecurityâ€-TR-24731"><a href="#ISO-x2F-IEC-â€œSecurityâ€-TR-24731" class="headerlink" title="ISO/IEC â€œSecurityâ€ TR 24731"></a>ISO/IEC â€œSecurityâ€ TR 24731</h5><p>ISO/IEC TR 24731 å®šä¹‰æ›´å°‘å‡ºé”™çš„Cæ ‡å‡†å‡½æ•°ç‰ˆæœ¬<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202215805.png"></p>
<ul>
<li>è¯¥æ–¹æ³•ä¼˜ç‚¹<ul>
<li>ä¸äº§ç”Ÿæ— ç»“å°¾çš„å­—ç¬¦ä¸²</li>
<li>ä¸æ„å¤–æˆªæ–­å­—ç¬¦ä¸²</li>
<li>æ”¯æŒç¼–è¯‘æ—¶æ£€æŸ¥</li>
<li>å¤±è´¥æ˜¾ç°</li>
<li>ç»Ÿä¸€çš„å‡½æ•°å‚æ•°å’Œè¿”å›ç±»å‹æ¨¡å¼</li>
</ul>
</li>
<li>ä»¥strcpy_s()ä¸ºä¾‹<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202220221.png"></li>
<li>ä¸­é—´çš„å‚æ•°&nbsp;rsize_tç”¨æ¥ç¡®å®šç›®æ ‡ç¼“å†²åŒºï¼ˆå³s1ï¼‰çš„æœ€å¤§é•¿åº¦</li>
<li>å¦‚æœæºå­—ç¬¦ä¸²ä¸èƒ½å®Œå…¨å¤åˆ¶åˆ°ç›®æ ‡ç¼“å†²åŒºï¼Œæˆ–è€…ç›®æ ‡ç¼“å†²åŒºå‘ç”Ÿæº¢å‡ºï¼Œéƒ½è¿”å›å¤±è´¥</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202221552.png"></li>
</ul>
</li>
<li>è¯¥æ–¹æ³•ç¼ºç‚¹<ul>
<li>ä»èƒ½å‘ç”Ÿç¼“å†²åŒºæº¢å‡º<ul>
<li>å¦‚æ ‡ç¼“å†²åŒºçš„æœ€å¤§é•¿åº¦æ˜¯ä¸è¢«æ­£ç¡®æŒ‡å®š</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="åŠ¨æ€æ–¹æ³•"><a href="#åŠ¨æ€æ–¹æ³•" class="headerlink" title="åŠ¨æ€æ–¹æ³•"></a>åŠ¨æ€æ–¹æ³•</h4><p>åŠ¨æ€åˆ†é…çš„ç¼“å†²åŒºéœ€è¦åŠ¨æ€è°ƒæ•´é¢å¤–çš„å†…å­˜<br>åŠ¨æ€æ–¹æ³•æ›´å¥½ï¼Œè€Œä¸”ä¸ä¸¢å¼ƒå¤šä½™çš„æ•°æ®ã€‚<br>ä¸»è¦ç¼ºç‚¹æ˜¯,å¦‚æœè¾“å…¥è¢«é™åˆ¶ï¼Œåˆ™å¯èƒ½</p>
<ul>
<li>è€—å°½æœºå™¨å†…å­˜</li>
<li>ç»“æœå¯¼è‡´æ‹’ç»æœåŠ¡æ”»å‡»</li>
</ul>
<h5 id="SafeStr"><a href="#SafeStr" class="headerlink" title="SafeStr"></a>SafeStr</h5><p>åœ¨éœ€è¦ç²¾åŠ å­—ç¬¦ä¸²å¤§å°çš„æ“ä½œä¸­ï¼Œé‡æ–°åˆ†é…å†…å­˜å¹¶ç§»åŠ¨å­—ç¬¦ä¸²å†…å®¹<br>å› æ­¤, åœ¨ä½¿ç”¨è¿™ä¸ªåº“çš„æ—¶å€™ï¼Œä¸ä¼šå‘ç”Ÿç¼“å†²åŒºæº¢å‡º<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202225239.png"><br>ä¾‹å­ï¼š<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202225940.png"><br>æœ‰é”™è¯¯å¤„ç†<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241202230022.png"></p>
<h5 id="ç®¡ç†å­—ç¬¦ä¸²"><a href="#ç®¡ç†å­—ç¬¦ä¸²" class="headerlink" title="ç®¡ç†å­—ç¬¦ä¸²"></a>ç®¡ç†å­—ç¬¦ä¸²</h5><ul>
<li>åˆ†é…ç¼“å†²åŒº</li>
<li>å¦‚æœéœ€è¦é¢å¤–çš„å†…å­˜ï¼Œåˆ™é‡æ–°è°ƒæ•´å†…å­˜å¤§å°</li>
<li>ç¼ºç‚¹<ul>
<li>æ— é™åˆ¶åœ°æ¶ˆè€—å†…å­˜ï¼Œå¯èƒ½å¯¼è‡´æ‹’ç»æœåŠ¡æ”»å‡»</li>
<li>æ€§èƒ½å¼€é”€</li>
</ul>
</li>
<li>ä¸¾ä¾‹ï¼š<ul>
<li>ä¸é€æ˜æ•°æ®ç±»å‹<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206110801.png"></li>
<li>é»‘åå•<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206110932.png"></li>
<li>ç™½åå•<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206111008.png"></li>
</ul>
</li>
</ul>
<h5 id="å®éªŒ"><a href="#å®éªŒ" class="headerlink" title="å®éªŒ"></a>å®éªŒ</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206112148.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206112154.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206112204.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206112651.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206113127.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206114120.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206114445.png"></p>
<h2 id="æŒ‡é’ˆå®‰å…¨"><a href="#æŒ‡é’ˆå®‰å…¨" class="headerlink" title="æŒ‡é’ˆå®‰å…¨"></a>æŒ‡é’ˆå®‰å…¨</h2><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><p>æŒ‡é’ˆå®‰å…¨æ˜¯é€šè¿‡ä¿®æ”¹æŒ‡é’ˆå€¼æ¥åˆ©ç”¨ç¨‹åºæ¼æ´çš„æ–¹æ³•çš„ç»Ÿç§°</p>
<ul>
<li>é€šè¿‡<strong>è¦†ç›–å‡½æ•°æŒ‡é’ˆ</strong>å°†ç¨‹åºçš„<strong>æ§åˆ¶æƒè½¬ç§»</strong>åˆ°æ”»å‡»è€…æä¾›çš„å¤–å£³ä»£ç <ul>
<li>ç¼“å†²åŒºè¦†å†™æŒ‡é’ˆæ¡ä»¶ï¼š<ul>
<li>ç¼“å†²åŒºä¸ç›®æ ‡æŒ‡é’ˆå¿…é¡»åˆ†é…åœ¨<strong>åŒä¸€ä¸ªæ®µå†…</strong><ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206133922.png"></li>
</ul>
</li>
<li>&nbsp;<strong>ç¼“å†²åŒºå¿…é¡»ä½äºæ¯”ç›®æ ‡æŒ‡é’ˆæ›´ä½çš„å†…å­˜åœ°å€å¤„</strong><ul>
<li>å› ä¸ºæ˜¯ä»ä½åœ°å€å¾€é«˜åœ°å€å†™å…¥çš„</li>
</ul>
</li>
<li>è¯¥ç¼“å†²åŒºå¿…é¡»æ˜¯ç•Œé™ä¸å……åˆ†çš„ï¼Œå› æ­¤å®¹æ˜“è¢«ç¼“å†²åŒºæº¢å‡ºåˆ©ç”¨</li>
</ul>
</li>
</ul>
</li>
<li>å¯¹è±¡æŒ‡é’ˆä¹Ÿå¯ä»¥è¢«ä¿®æ”¹ï¼Œä»è€Œæ‰§è¡Œä»»æ„ä»£ç <br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206143435.png">å³<br>ç¼“å†²åŒºçš„å®šä¹‰åœ¨ä¸¤ä¸ªå¯¹è±¡çš„å‰é¢ï¼Œå‘ç”Ÿ</li>
</ul>
<h5 id="è¦†ç›–å‡½æ•°æŒ‡é’ˆä¸¾ä¾‹"><a href="#è¦†ç›–å‡½æ•°æŒ‡é’ˆä¸¾ä¾‹" class="headerlink" title="è¦†ç›–å‡½æ•°æŒ‡é’ˆä¸¾ä¾‹"></a>è¦†ç›–å‡½æ•°æŒ‡é’ˆä¸¾ä¾‹</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206134914.png"></p>
<h5 id="è¦†ç›–å¯¹è±¡æŒ‡é’ˆä¸¾ä¾‹"><a href="#è¦†ç›–å¯¹è±¡æŒ‡é’ˆä¸¾ä¾‹" class="headerlink" title="è¦†ç›–å¯¹è±¡æŒ‡é’ˆä¸¾ä¾‹"></a>è¦†ç›–å¯¹è±¡æŒ‡é’ˆä¸¾ä¾‹</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206144724.png"></p>
<h3 id="ä¿®æ”¹æŒ‡ä»¤æŒ‡é’ˆ"><a href="#ä¿®æ”¹æŒ‡ä»¤æŒ‡é’ˆ" class="headerlink" title="ä¿®æ”¹æŒ‡ä»¤æŒ‡é’ˆ"></a>ä¿®æ”¹æŒ‡ä»¤æŒ‡é’ˆ</h3><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206150239.png"></p>
<p>ä¸¾ä¾‹ï¼Œä»€ä¹ˆæ ·çš„èƒ½å¤Ÿè¢«åˆ©ç”¨ï¼šï¼ˆä»€ä¹ˆæƒ…å†µä¸‹èƒ½æ¶æ„æ”¹å˜ICï¼‰<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206152635.png"></p>
<ul>
<li>é™æ€è°ƒç”¨ï¼ˆç›´æ¥è°ƒç”¨ï¼‰æ˜¯ä¸èƒ½çš„<ul>
<li>å› ä¸ºé™æ€è°ƒç”¨æ˜¯æŒ‡ä»¤ä¸­åœ°å€è¢«ç¼–ç ï¼Œå†è®¡ç®—åœ°å€ï¼Œå†æ”¾å…¥ICä¸­</li>
<li>å› æ­¤è¦æ”¹å˜ICï¼Œåªèƒ½æ”¹å˜å…¶æŒ‡ä»¤</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206152703.png"></li>
</ul>
</li>
<li>é€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨å‡½æ•°å¯ä»¥<ul>
<li>å› ä¸ºé€šè¿‡å‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨æ˜¯<strong>é—´æ¥å¼•ç”¨</strong></li>
<li>ICçš„ä¸‹ä¸€ä¸ªå€¼æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­çš„ï¼ˆæŒ‡é’ˆåœ°å€å¤„çš„å†…å­˜çš„å†…å®¹ä½œä¸ºå‡½æ•°çš„åœ°å€ï¼‰å¦‚æœå¯ä»¥ä»»æ„å†™çš„è¯ï¼Œå¾ˆå®¹æ˜“è¢«æ”¹å˜</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206152648.png"><ul>
<li>å¦‚è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¯ä»¥æ”¹å˜478400hå¤„çš„å†…å®¹ï¼Œå³å°†å‡½æ•°åœ°å€æ”¹å˜</li>
</ul>
</li>
<li><strong>é—´æ¥çš„å‡½æ•°å¼•ç”¨</strong>ä¸<strong>æ— æ³•åœ¨ç¼–è¯‘æœŸé—´å†³å®šçš„</strong>å‡½æ•°è°ƒç”¨å¯ä»¥è¢«åˆ©ç”¨ï¼Œä»è€Œä½¿ç¨‹åºçš„æ§åˆ¶æƒè½¬ç§»åˆ°ä»»æ„ä»£ç </li>
</ul>
</li>
</ul>
<h4 id="ä¿®æ”¹æŒ‡ä»¤æŒ‡é’ˆçš„ç›®æ ‡"><a href="#ä¿®æ”¹æŒ‡ä»¤æŒ‡é’ˆçš„ç›®æ ‡" class="headerlink" title="ä¿®æ”¹æŒ‡ä»¤æŒ‡é’ˆçš„ç›®æ ‡"></a>ä¿®æ”¹æŒ‡ä»¤æŒ‡é’ˆçš„ç›®æ ‡</h4><h5 id="å…¨å±€åç§»è¡¨"><a href="#å…¨å±€åç§»è¡¨" class="headerlink" title="å…¨å±€åç§»è¡¨"></a>å…¨å±€åç§»è¡¨</h5><p>åœ¨<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206160958.png">ä¸­çš„æ–‡ä»¶æ ¼å¼ELFï¼Œé»˜è®¤äºŒè¿›åˆ¶æ ¼å¼</p>
<h6 id="GOTç‰¹ç‚¹"><a href="#GOTç‰¹ç‚¹" class="headerlink" title="GOTç‰¹ç‚¹"></a>GOTç‰¹ç‚¹</h6><p>å…¶ä¸­ELFäºŒè¿›åˆ¶æ–‡ä»¶çš„è¿›ç¨‹ç©ºé—´ä¸­æœ‰GOTï¼ŒGlobal Offset Tableï¼Œè¦ä½¿å¾—åŠ¨æ€é“¾æ¥çš„è¿›ç¨‹èƒ½å¤Ÿå·¥ä½œï¼Œå…¶å¿…ä¸å¯å°‘<br>GOTå­˜æ”¾ç»å¯¹åœ°å€<br><strong>GOTå·¥ä½œæµç¨‹</strong></p>
<ul>
<li>GOTå…¥å£é¡¹åŒ…å«è¿è¡Œæ—¶è¿æ¥å™¨RTLï¼ˆruntime linkerï¼‰çš„åœ°å€</li>
<li>ç¨‹åºé¦–æ¬¡è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œç¨‹åºçš„æ§åˆ¶æƒè¢«è½¬ç§»åˆ°RTL</li>
<li>RTLè§£æå‡ºå‡½æ•°åœ°å€ï¼ŒRTLå°†åœ°å€å†™å…¥GOT</li>
<li>æ¥ä¸‹æ¥å°±å¯ä»¥é€šè¿‡GOTä¸­çš„å…¥å£é¡¹ç›´æ¥è°ƒç”¨å‡½æ•°<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206161728.png"></li>
</ul>
<p><strong>GOTç‰¹ç‚¹</strong></p>
<ul>
<li>ELFå¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„GOTå…¥å£é¡¹çš„åœ°å€æ˜¯å›ºå®šçš„<ul>
<li>å¯¹ä»»ä½•å¯æ‰§è¡Œè¿›ç¨‹æ˜ åƒè€Œè¨€GOTå…¥å£é¡¹éƒ½ä½äºç›¸åŒçš„åœ°å€<br>æ‰€ä»¥å¯ä»¥åˆ©ç”¨objdumpå‘½ä»¤æŸ¥çœ‹æŸä¸€ä¸ªå‡½æ•°çš„GOTå…¥å£é¡¹ä½ç½®</li>
</ul>
</li>
<li>è®°å½•çš„æ˜¯åç§»é‡<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206164159.png"></li>
</ul>
</li>
</ul>
<h6 id="å¦‚ä½•åˆ©ç”¨GOT"><a href="#å¦‚ä½•åˆ©ç”¨GOT" class="headerlink" title="å¦‚ä½•åˆ©ç”¨GOT"></a>å¦‚ä½•åˆ©ç”¨GOT</h6><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206164249.png"></p>
<h5 id="dtorsåŒº"><a href="#dtorsåŒº" class="headerlink" title="dtorsåŒº"></a>dtorsåŒº</h5><h6 id="ä»€ä¹ˆæ˜¯dtorsåŒº"><a href="#ä»€ä¹ˆæ˜¯dtorsåŒº" class="headerlink" title="ä»€ä¹ˆæ˜¯dtorsåŒº"></a>ä»€ä¹ˆæ˜¯dtorsåŒº</h6><p>.dtors</p>
<ul>
<li>ä»…å­˜åœ¨äºç”¨GCCç¼–è¯‘å’Œé“¾æ¥çš„ç¨‹åºä¸­</li>
<li>è¯¥åŒºæ€»æ˜¯å­˜åœ¨å¹¶ä¸”ä¼šæ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œé»˜è®¤å±æ€§ä¸ºå¯å†™ï¼Œ<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206165902.png"></li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206165327.png"></li>
<li>ææ„å‡½æ•°å­˜å‚¨äºELFçš„.dtorsåŒº</li>
<li>ææ„å‡½æ•°åœ¨mainæ‰§è¡Œå®Œåè°ƒç”¨ï¼Œè€Œæ„é€ å‡½æ•°åœ¨mainä¹‹å‰è°ƒç”¨<ul>
<li>å› è€Œæ„é€ å‡½æ•°æ²¡æ³•è¢«æ¼æ´ç¨‹åºåˆ©ç”¨</li>
<li>ä¸¾ä¾‹<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206165811.png"></li>
</ul>
</li>
</ul>
<h6 id="å¦‚ä½•åˆ©ç”¨"><a href="#å¦‚ä½•åˆ©ç”¨" class="headerlink" title="å¦‚ä½•åˆ©ç”¨"></a>å¦‚ä½•åˆ©ç”¨</h6><p>ä¼˜ç‚¹ï¼š<br>å¯¹äºæ”»å‡»è€…è€Œè¨€ï¼Œè¦†å†™.dtorsåŒºçš„å¥½å¤„åœ¨äºï¼š è¯¥åŒºæ€»æ˜¯å­˜åœ¨å¹¶ä¸”ä¼šæ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œå¹¶ä¸”æ˜¯å¯å†™çš„</p>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206170143.png"><br>ç¼ºç‚¹ï¼š<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206170201.png"></p>
<h5 id="è™šå‡½æ•°-1"><a href="#è™šå‡½æ•°-1" class="headerlink" title="è™šå‡½æ•°***"></a>è™šå‡½æ•°***</h5><h6 id="ä»€ä¹ˆæ˜¯è™šå‡½æ•°"><a href="#ä»€ä¹ˆæ˜¯è™šå‡½æ•°" class="headerlink" title="ä»€ä¹ˆæ˜¯è™šå‡½æ•°"></a>ä»€ä¹ˆæ˜¯è™šå‡½æ•°</h6><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206170707.png"></p>
<ul>
<li><p>è¿è¡Œæ—¶è§£æå³å‡½æ•°è°ƒç”¨çš„åŠ¨æ€ç»‘å®š</p>
<ul>
<li>è™šå‡½æ•°åªæœ‰é€šè¿‡å¯¹è±¡æŒ‡é’ˆçš„å¼•ç”¨æ‰èƒ½æ˜¾ç¤ºå‡ºå…¶åŠ¨æ€è°ƒç”¨çš„ç‰¹æ€§</li>
</ul>
</li>
<li><p>è™šå‡½æ•°å®ç°</p>
<ul>
<li>æ¯ä¸€ä¸ªå¯¹è±¡å¤´éƒ¨æœ‰è™šæŒ‡é’ˆVPTRï¼ŒVirtual Pointer</li>
<li>è™šæŒ‡é’ˆæŒ‡å‘è™šå‡½æ•°è¡¨VTBLï¼ŒVirtual Function Table</li>
<li>è™šå‡½æ•°è¡¨ä¸­æœ‰å‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘æ¯ä¸ªå‡½æ•°å®ç°<ul>
<li>VTBLæ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆæ•°ç»„</li>
</ul>
</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206171042.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207143302.png"></li>
</ul>
</li>
</ul>
<h6 id="å¦‚ä½•åˆ©ç”¨è™šå‡½æ•°"><a href="#å¦‚ä½•åˆ©ç”¨è™šå‡½æ•°" class="headerlink" title="å¦‚ä½•åˆ©ç”¨è™šå‡½æ•°"></a>å¦‚ä½•åˆ©ç”¨è™šå‡½æ•°</h6><ol>
<li>è¦†å†™è™šæŒ‡é’ˆï¼Œä½¿æŒ‡å‘å…¶ä»–è™šå‡½æ•°è¡¨</li>
<li>è¦†å†™è™šå‡½æ•°è¡¨ä¸­çš„å‡½æ•°æŒ‡é’ˆ<br>æ”»å‡»è€…å¯ä»¥é€šè¿‡ä»»æ„å†…å­˜å†™æˆ–è€…åˆ©ç”¨ç¼“å†²åŒºæº¢å‡ºç›´æ¥å†™å…¥å¯¹è±¡å®ç°è¿™ä¸€æ“ä½œ</li>
</ol>
<h6 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h6><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207143340.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207143432.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207144638.png"></p>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207152249.png"></p>
<h6 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h6><p>ç”±äºè™šè¡¨æŒ‡é’ˆåœ¨å¯¹è±¡å¤´éƒ¨ï¼Œä½äºæˆå‘˜å˜é‡ä¹‹å‰ï¼Œè€Œå¯¹è±¡ä¸­ï¼Œåœ°å€æ˜¯ä»ä½åœ°å€å‘é«˜åœ°å€å¢é•¿çš„ï¼ˆä¸æ ˆç›¸åï¼‰ï¼Œæ‰€ä»¥è™šè¡¨æŒ‡é’ˆåœ¨ä½åœ°å€å¤„ï¼Œæˆå‘˜å˜é‡åœ¨é«˜åœ°å€å¤„</p>
<p>è€Œæº¢å‡ºåˆåªèƒ½æ˜¯ä»ä½åœ°å€å¾€é«˜åœ°å€å†™ï¼Œå› æ­¤éœ€è¦ç›®æ ‡åœ¨å¯å†™å¤„çš„é«˜åœ°å€æ‰è¡Œ<br>æ‰€ä»¥æ²¡æ³•ä½¿ç”¨æ ˆæº¢å‡ºæ¥ä¿®æ”¹è™šè¡¨æŒ‡é’ˆ<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207154202.png"><br>ä½†æ˜¯å¯ä»¥ä½¿ç”¨æº¢å‡ºæ–¹æ³•æ¥è¦†ç›–é‚»æ¥å¯¹è±¡çš„è™šè¡¨<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207154247.png"></p>
<h5 id="atexit-on-exit"><a href="#atexit-on-exit" class="headerlink" title="atexit() on_exit"></a>atexit() on_exit</h5><p>atexitï¼Œè¢«ç§°ä¸ºç™»è®°å‡½æ•°<br>åœ¨ç¨‹åºæ­£å¸¸ç»“æŸåè°ƒç”¨<br>â¼€ä¸ªè¿›ç¨‹å¯ä»¥ç™»è®°è‹¥â¼²ä¸ªä¸ªå‡½æ•°ï¼Œè¿™äº›å‡½æ•°ç”±exit<strong>â¾ƒåŠ¨è°ƒâ½¤</strong>ï¼Œè¿™äº›å‡½æ•°è¢«ç§°ä¸º<strong>ç»ˆâ½Œå¤„ç†å‡½æ•°</strong>ï¼Œ atexitå‡½æ•°å¯ä»¥ç™»è®°è¿™äº›å‡½æ•°ã€‚ exitè°ƒâ½¤ç»ˆâ½Œå¤„ç†å‡½æ•°çš„é¡ºåºå’Œatexitç™»è®°çš„é¡ºåºç›¸å<br>ç™»è®°çš„è¿™äº›åœ¨_exit_funcsé‡ŒÂ·Â·Â·<br>atexit()æ³¨å†Œçš„è¿™äº›å‡½æ•°ä¼šæ˜¾ç¤ºåœ¨__exit_funcs ä½ç½®å¤„çš„å†…å­˜<br>æ¯ä¸ªå‡½æ•°ä¿å­˜åœ¨å››ä¸ªåŒå­—æ„æˆçš„ç»“æ„ä¸­ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªåŒå­—æ˜¯å‡½æ•°çš„å®é™…åœ°å€</p>
<h6 id="åˆ©ç”¨ä¾‹å­"><a href="#åˆ©ç”¨ä¾‹å­" class="headerlink" title="åˆ©ç”¨ä¾‹å­"></a>åˆ©ç”¨ä¾‹å­</h6><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206174323.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206225851.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241206230141.png"></p>
<h5 id="longjmp"><a href="#longjmp" class="headerlink" title="longjmp()"></a>longjmp()</h5><h6 id="ä»€ä¹ˆæ˜¯longjmp"><a href="#ä»€ä¹ˆæ˜¯longjmp" class="headerlink" title="ä»€ä¹ˆæ˜¯longjmp"></a>ä»€ä¹ˆæ˜¯longjmp</h6><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207102823.png">å³è°ƒç”¨longjmpçš„æ—¶å€™ï¼Œä¼šè·³åˆ°setjmpçš„è°ƒç”¨å¤„ï¼Œå¹¶ç»™setjmpä¸€ä¸ªè¿”å›å€¼ï¼Œå³val<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207103022.png"></p>
<p>æ·±ç©¶æ˜¯å¦‚ä½•è·³åˆ°setjmpçš„ï¼šsetjmpå°†å±€éƒ¨ç¯å¢ƒä¿å­˜åœ¨jmp_bufä¸­ï¼Œlongjmpå¯ä»¥æ ¹æ®å…¶æ¢å¤ç¯å¢ƒ</p>
<p>åˆ™å¼•å‡ºæ”»å‡»ç‚¹ï¼šå¦‚ä½•è®©longjmpè·³åˆ°é”™è¯¯çš„åœ°æ–¹</p>
<h6 id="å¦‚ä½•åˆ©ç”¨-1"><a href="#å¦‚ä½•åˆ©ç”¨-1" class="headerlink" title="å¦‚ä½•åˆ©ç”¨"></a>å¦‚ä½•åˆ©ç”¨</h6><ul>
<li>jmp_bufçš„å®ç°ï¼š<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207103543.png"></li>
<li>longjmpå…·ä½“å¦‚ä½•æ¢å¤ç¯å¢ƒ<ul>
<li>å…ˆå°†è¿”å›å€¼å­˜åœ¨eax</li>
<li>å†æ¢å¤ebpä¸esp</li>
<li>å†æ¢å¤PCï¼Œå³å°†ç¨‹åºæ§åˆ¶æƒè½¬ç§»</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207104039.png"></li>
</ul>
</li>
<li>å› æ­¤å¯ä»¥é€šè¿‡ç¼“å†²åŒºæº¢å‡ºï¼Œè¦†å†™ JB_PCå­—æ®µï¼Œåˆ™å¯ä»¥ä½¿ç¨‹åºè·³è½¬åˆ°shellcodeå¤„æ‰§è¡Œ</li>
</ul>
<h5 id="å¼‚å¸¸å¤„ç†"><a href="#å¼‚å¸¸å¤„ç†" class="headerlink" title="å¼‚å¸¸å¤„ç†***"></a>å¼‚å¸¸å¤„ç†***</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207132003.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207132013.png"></p>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207132103.png"></p>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207132233.png"><br>å³SEHé“¾ï¼Œæ¯ä¸ªæ˜¯EXECPTION_REGISTRATIONç»“æ„ï¼Œ<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207132319.png"><br>å…¶ä¸­handleræŒ‡å‘å¼‚å¸¸å¤„ç†å‡½æ•°<br>è€ŒprevæŒ‡å‘ä¸‹ä¸€ä¸ªEXECPTION_REGISTRATIONç»“æ„</p>
<p>è€Œå¼‚å¸¸å¤„ç†ç¨‹åºåœ°å€åœ¨æ ˆçš„é«˜åœ°å€å¤„ï¼Œå±€éƒ¨å˜é‡åœ¨æ ˆçš„è¾ƒä¹‹ä½åœ°å€å¤„ï¼Œå³å¦‚æœ<strong>æ ˆå˜é‡å‘ç”Ÿç¼“å†²åŒºæº¢å‡º</strong>ï¼Œé‚£ä¹ˆ<strong>å¼‚å¸¸å¤„ç†ç¨‹åºåœ°å€å°±å¯ä»¥è¢«è¦†å†™</strong><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207133401.png"></p>
<h6 id="å¦‚ä½•åˆ©ç”¨-2"><a href="#å¦‚ä½•åˆ©ç”¨-2" class="headerlink" title="å¦‚ä½•åˆ©ç”¨"></a>å¦‚ä½•åˆ©ç”¨</h6><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207133422.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207133532.png"></p>
<h3 id="å†…å­˜ä»»æ„å†™æŠ€æœ¯"><a href="#å†…å­˜ä»»æ„å†™æŠ€æœ¯" class="headerlink" title="å†…å­˜ä»»æ„å†™æŠ€æœ¯"></a>å†…å­˜ä»»æ„å†™æŠ€æœ¯</h3><h3 id="ç¼“è§£æªæ–½-1"><a href="#ç¼“è§£æªæ–½-1" class="headerlink" title="ç¼“è§£æªæ–½"></a>ç¼“è§£æªæ–½</h3><p><strong>é˜²æ­¢æŒ‡é’ˆè¯¡è®¡çš„æœ€ä½³æ–¹å¼å°±æ˜¯æ¶ˆé™¤<strong><strong>â€</strong></strong>å…è®¸å†…å­˜è¢«ä¸æ­£ç¡®åœ°è¦†å†™â€****çš„æ¼æ´</strong></p>
<ul>
<li>æ¶ˆé™¤â€œå…è®¸å†…å­˜è¢«ä¸æ­£ç¡®åœ°è¦†å†™â€æ¼æ´<ul>
<li>è¦†å†™å¯¹è±¡æŒ‡é’ˆ</li>
<li>å¸¸è§çš„åŠ¨æ€å†…å­˜ç®¡ç†é”™è¯¯</li>
<li>å­—ç¬¦ä¸²æ ¼å¼åŒ–æ¼æ´</li>
</ul>
</li>
<li>å‡å°‘ç›®æ ‡æš´éœ²<ul>
<li>å†™æˆ–è€…æ‰§è¡Œï¼Œåªå…è®¸ä¸€ä¸ª<ul>
<li>ä½†ä¸èƒ½é˜²æ­¢atexitè¿™æ ·çš„</li>
</ul>
</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207140311.png"></li>
</ul>
</li>
<li>æ ˆæ¢æµ‹ä»ª<ul>
<li>èƒ½ä¿æŠ¤<ul>
<li>ä»…å¯¹é‚£äº›é¢„é€šè¿‡æº¢å‡ºæ ˆç¼“å†²åŒºæ¥è¦†å†™æ ˆæŒ‡é’ˆæˆ–è€…å…¶å®ƒå—ä¿æŠ¤åŒºåŸŸçš„æ¼æ´åˆ©ç”¨æœ‰æ•ˆã€‚</li>
</ul>
</li>
<li>ä¸èƒ½ä¿æŠ¤<ul>
<li>æ ˆæ¢æµ‹ä»ªå¹¶ä¸èƒ½é˜²æ­¢<strong>å¯¹å˜é‡ã€å¯¹è±¡æŒ‡é’ˆæˆ–è€…å‡½æ•°æŒ‡é’ˆ</strong>è¿›è¡Œä¿®æ”¹çš„æ¼æ´åˆ©ç”¨ã€‚</li>
<li>æ ˆæ¢æµ‹ä»ª<strong>ä¸èƒ½é˜»æ­¢åŒ…æ‹¬æ ˆæ®µåœ¨å†…çš„ä»»ä½•ä½ç½®å‘ç”Ÿç¼“å†²åŒºæº¢å‡º</strong>ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>æ ˆæº¢å‡ºæ”»å‡»è¢«ç”¨äºè¦†å†™è¿”å›åœ°å€</strong>ä¸€æ ·ï¼Œ<strong>ç¼“å†²åŒºæº¢å‡ºå¯è¢«ç”¨äºè¦†å†™å¯¹è±¡æŒ‡é’ˆæˆ–å‡½æ•°æŒ‡é’ˆ</strong>ã€‚è¦†å†™å‡½æ•°æŒ‡é’ˆæˆ–å¯¹è±¡æŒ‡é’ˆçš„èƒ½åŠ›å–å†³äºç¼“å†²åŒºæº¢å‡ºå‘ç”Ÿçš„åœ°å€å’Œç›®æ ‡æŒ‡é’ˆä¹‹é—´è·ç¦»çš„è¿œè¿‘ï¼Œä¸è¿‡ä¸€èˆ¬è€Œè¨€ï¼ŒåŒä¸€ä¸ªå†…å­˜æ®µå†…éƒ½å­˜åœ¨è¿™æ ·çš„</p>
<p>Windowså†…å­˜å®‰å…¨æœºåˆ¶ï¼šGSç¼–è¯‘ã€DEPã€Heap cookieã€Safe Unlinkã€ASLRï¼Ÿ</p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207142719.png"></p>
<h2 id="åŠ¨æ€å†…å­˜ç®¡ç†"><a href="#åŠ¨æ€å†…å­˜ç®¡ç†" class="headerlink" title="åŠ¨æ€å†…å­˜ç®¡ç†"></a>åŠ¨æ€å†…å­˜ç®¡ç†</h2><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207155907.png"></p>
<h3 id="åŠ¨æ€å†…å­˜ç®¡ç†å‡½æ•°"><a href="#åŠ¨æ€å†…å­˜ç®¡ç†å‡½æ•°" class="headerlink" title="åŠ¨æ€å†…å­˜ç®¡ç†å‡½æ•°"></a>åŠ¨æ€å†…å­˜ç®¡ç†å‡½æ•°</h3><h4 id="Cæ ‡å‡†å®šä¹‰çš„å†…å­˜åˆ†é…å‡½æ•°ï¼ˆï¼Ÿallocå’Œfreeï¼‰"><a href="#Cæ ‡å‡†å®šä¹‰çš„å†…å­˜åˆ†é…å‡½æ•°ï¼ˆï¼Ÿallocå’Œfreeï¼‰" class="headerlink" title="Cæ ‡å‡†å®šä¹‰çš„å†…å­˜åˆ†é…å‡½æ•°ï¼ˆï¼Ÿallocå’Œfreeï¼‰"></a>Cæ ‡å‡†å®šä¹‰çš„å†…å­˜åˆ†é…å‡½æ•°ï¼ˆï¼Ÿallocå’Œfreeï¼‰</h4><h5 id="calloc"><a href="#calloc" class="headerlink" title="calloc()"></a>calloc()</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207161405.png"><br>æ–°åˆ†é…çš„å†…å®¹æœ‰åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–ä¸º0</p>
<h5 id="malloc"><a href="#malloc" class="headerlink" title="malloc()"></a>malloc()</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207160507.png"></p>
<p>æ–°åˆ†é…çš„å†…å­˜æœªåšåˆå§‹åŒ–</p>
<h5 id="realloc"><a href="#realloc" class="headerlink" title="realloc()"></a>realloc()</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207160802.png"><br>å³æ—§çš„ä¸å˜ï¼Œæ‰©å¤§çš„å†…å­˜ï¼ˆå³æ–°åˆ†é…çš„å†…å­˜ï¼‰æœªåˆå§‹åŒ–</p>
<ul>
<li>è‹¥pä¸ºç©ºæŒ‡é’ˆï¼Œåˆ™ç­‰ä»·ä¸ºmalloc<ul>
<li>è‹¥pä¸æ˜¯ç©ºæŒ‡é’ˆï¼Œåˆ™på¿…é¡»æ˜¯allocè¿”å›çš„æŒ‡å‘å†…å­˜çš„æŒ‡é’ˆ</li>
</ul>
</li>
<li>è‹¥size=0ï¼Œåˆ™ç­‰ä»·äºè°ƒç”¨free(p)</li>
</ul>
<h5 id="free-é‡Šæ”¾å†…å­˜"><a href="#free-é‡Šæ”¾å†…å­˜" class="headerlink" title="free()é‡Šæ”¾å†…å­˜"></a>free()é‡Šæ”¾å†…å­˜</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207160551.png"><br>på¿…é¡»æ˜¯allocçš„è¿”å›æŒ‡é’ˆ<br>ä¸èƒ½é‡Šæ”¾ä¸¤é<br>pä¸ºç©ºæŒ‡é’ˆåˆ™ä¸æ‰§è¡Œä»»ä½•æ“ä½œ</p>
<h4 id="Cppæ ‡å‡†çš„ï¼ˆnewå’Œdeleteï¼‰"><a href="#Cppæ ‡å‡†çš„ï¼ˆnewå’Œdeleteï¼‰" class="headerlink" title="Cppæ ‡å‡†çš„ï¼ˆnewå’Œdeleteï¼‰"></a>Cppæ ‡å‡†çš„ï¼ˆnewå’Œdeleteï¼‰</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207161551.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207161557.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207161618.png"></p>
<ul>
<li>newå…³é”®å­—ä¸mallocå‡½æ•°åŒºåˆ«<ul>
<li>å†…å­˜åˆ†é…å•ä½ä¸åŒ<ul>
<li>newä»¥å…·ä½“ç±»å‹ä¸ºå•ä½è¿›è¡Œå†…å­˜åˆ†é…</li>
<li>mallocä»¥å­—èŠ‚ä¸ºå•ä½è¿›è¡Œå†…å­˜åˆ†é…</li>
</ul>
</li>
<li>æ˜¯å¦åˆå§‹åŒ–ä¸åŒ<ul>
<li>newåœ¨ç”³è¯·å•ä¸ªç±»å‹å˜é‡çš„æ—¶å€™å¯ä»¥è¿›è¡Œåˆå§‹åŒ–</li>
<li>è€Œmallocæ²¡æœ‰å¯¹å†…å­˜åˆå§‹åŒ–</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="å†…å­˜åˆ†é…ç®—æ³•"><a href="#å†…å­˜åˆ†é…ç®—æ³•" class="headerlink" title="å†…å­˜åˆ†é…ç®—æ³•"></a>å†…å­˜åˆ†é…ç®—æ³•</h3><ul>
<li>è¿ç»­åŒ¹é…<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207183322.png"></li>
</ul>
</li>
<li>æœ€å…ˆåŒ¹é…<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207183337.png"></li>
</ul>
</li>
<li>æœ€ä½³åŒ¹é…<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207183356.png"></li>
</ul>
</li>
<li>æœ€ä¼˜åŒ¹é…<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207183429.png"></li>
</ul>
</li>
<li>æœ€å·®åŒ¹é…<ul>
<li>æŒ‘æœ€å¤§çš„ç©ºé—²å—</li>
</ul>
</li>
<li>ä¼™ä¼´ç³»ç»Ÿæ–¹æ³•<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207183911.png"></li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207183925.png"></li>
</ul>
</li>
<li>éš”ç¦»<ul>
<li>ä¿æŒå•ç‹¬çš„å¤§å°ä¸€è‡´çš„å—çš„åˆ—è¡¨</li>
</ul>
</li>
</ul>
<h3 id="å¸¸è§å†…å­˜ç®¡ç†é”™è¯¯"><a href="#å¸¸è§å†…å­˜ç®¡ç†é”™è¯¯" class="headerlink" title="å¸¸è§å†…å­˜ç®¡ç†é”™è¯¯"></a>å¸¸è§å†…å­˜ç®¡ç†é”™è¯¯</h3><h4 id="åˆå§‹åŒ–é”™è¯¯"><a href="#åˆå§‹åŒ–é”™è¯¯" class="headerlink" title="åˆå§‹åŒ–é”™è¯¯"></a>åˆå§‹åŒ–é”™è¯¯</h4><ul>
<li>ç¨‹åºå‘˜<strong>å‡è®¾</strong>malloc()æŠŠåˆ†é…çš„å†…å­˜çš„æ‰€æœ‰ä½åˆå§‹åŒ–ä¸ºé›¶<ul>
<li>å®é™…ä¸Šmallocä¸ä¼šè¿›è¡Œåˆå§‹åŒ–</li>
</ul>
</li>
<li></li>
</ul>
<h4 id="æœªæ£€æŸ¥è¿”å›å€¼"><a href="#æœªæ£€æŸ¥è¿”å›å€¼" class="headerlink" title="æœªæ£€æŸ¥è¿”å›å€¼"></a>æœªæ£€æŸ¥è¿”å›å€¼</h4><p>å†…å­˜æ˜¯æœ‰é™çš„èµ„æºï¼Œå®ƒå¯èƒ½ä¼šè¢«è€—å°½<br>å†…å­˜åˆ†é…å¯èƒ½å¤±è´¥<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207185645.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207185727.png"></p>
<ul>
<li><p>mallocåˆ†é…çš„</p>
<ul>
<li>è‹¥åˆ†é…å¤±è´¥ï¼Œä¼šè¿”å›NULLæŒ‡é’ˆ</li>
<li>å¯ä»¥è¿™æ ·æ£€æŸ¥<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207185811.png"></li>
</ul>
</li>
<li><p>newåˆ†é…çš„</p>
<ul>
<li>è‹¥åˆ†é…å¤±è´¥ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207190017.png"></li>
<li>æ£€æŸ¥ï¼š<ul>
<li>ä¸èƒ½ç›´æ¥ç”¨ifï¼Œå› ä¸ºæœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œifçš„åˆ¤æ–­æ°¸è¿œæ˜¯çœŸå€¼ï¼Œä¾‹å­ï¼š<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207190150.png"></li>
<li>å¯ä»¥ä½¿ç”¨new(nothrow)æ£€æŸ¥ï¼Œè¿™æ ·å¦‚æœåˆ†é…å¤±è´¥ä¼šè¿”å›NULLæŒ‡é’ˆ<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207190308.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="å¼•ç”¨å·²é‡Šæ”¾çš„å†…å­˜"><a href="#å¼•ç”¨å·²é‡Šæ”¾çš„å†…å­˜" class="headerlink" title="å¼•ç”¨å·²é‡Šæ”¾çš„å†…å­˜"></a>å¼•ç”¨å·²é‡Šæ”¾çš„å†…å­˜</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207194114.png"></p>
<h4 id="4-å¤šæ¬¡é‡Šæ”¾å†…å­˜"><a href="#4-å¤šæ¬¡é‡Šæ”¾å†…å­˜" class="headerlink" title="4. å¤šæ¬¡é‡Šæ”¾å†…å­˜"></a>4. å¤šæ¬¡é‡Šæ”¾å†…å­˜</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241207194435.png"></p>
<h4 id="5-ä¸æ­£ç¡®é…å¯¹å†…å­˜ç®¡ç†å‡½æ•°"><a href="#5-ä¸æ­£ç¡®é…å¯¹å†…å­˜ç®¡ç†å‡½æ•°" class="headerlink" title="5. ä¸æ­£ç¡®é…å¯¹å†…å­˜ç®¡ç†å‡½æ•°"></a>5. ä¸æ­£ç¡®é…å¯¹å†…å­˜ç®¡ç†å‡½æ•°</h4><p>åº”è¯¥æ­£ç¡®é…å¯¹<br>new é…å¯¹ delete<br>malloc é…å¯¹ free<br>ä¸æ°å½“çš„é…å¯¹æ˜¯ä¸å¯ç§»æ¤çš„</p>
<h4 id="6-æœªèƒ½åŒºåˆ†æ ‡é‡å’Œæ•°ç»„"><a href="#6-æœªèƒ½åŒºåˆ†æ ‡é‡å’Œæ•°ç»„" class="headerlink" title="6. æœªèƒ½åŒºåˆ†æ ‡é‡å’Œæ•°ç»„"></a>6. æœªèƒ½åŒºåˆ†æ ‡é‡å’Œæ•°ç»„</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241213192938.png"><br>å¦‚ä½¿ç”¨äº†new[] åˆ†é…å°±è¦ç”¨å¯¹åº”çš„delete[] é‡Šæ”¾<br>å¦åˆ™å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œæˆ–è€…æœªå®šä¹‰çš„è¡Œä¸ºå¯¼è‡´å´©æºƒ</p>
<h4 id="7-åˆ†é…å‡½æ•°çš„ä¸å½“ä½¿ç”¨"><a href="#7-åˆ†é…å‡½æ•°çš„ä¸å½“ä½¿ç”¨" class="headerlink" title="7. åˆ†é…å‡½æ•°çš„ä¸å½“ä½¿ç”¨"></a>7. åˆ†é…å‡½æ•°çš„ä¸å½“ä½¿ç”¨</h4><ul>
<li>malloc(0)<ul>
<li>Cè¿è¡Œæ—¶åº“èƒ½è¿”å›ç©ºæŒ‡é’ˆæˆ–è€…ä¼ªåœ°å€</li>
<li>ç©ºæŒ‡é’ˆå³æ²¡åˆ†é…å†…å­˜ï¼Œä¼ªåœ°å€å³ç»™åˆ†é…äº†æŒ‡é’ˆï¼Œä½†è¯¥æŒ‡é’ˆæ˜¯æ— æ•ˆçš„ï¼Œåˆ†é…çš„å†…å­˜ä¸èƒ½ç”¨äºå­˜å‚¨æ•°æ®</li>
<li>æœ€å®‰å…¨å’Œä¾¿æ·çš„è§£å†³æ–¹æ¡ˆæ˜¯ç¡®ä¿æ²¡æœ‰é›¶é•¿åº¦åˆ†é…</li>
</ul>
</li>
<li>alloca()<ul>
<li>å®šä¹‰<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241213194748.png"></li>
</ul>
</li>
<li>åŠŸèƒ½<ul>
<li>åœ¨è°ƒç”¨è€…çš„æ ˆä¸­åˆ†é…å†…å­˜ã€‚<ul>
<li>å³ä½¿ç”¨è¿™ä¸ªå‡½æ•°åˆ†é…çš„å†…å­˜æ˜¯åœ¨æ ˆç©ºé—´çš„</li>
<li>åˆ†é…çš„å†…å­˜çš„ç”Ÿå‘½å‘¨æœŸä¸å‡½æ•°è°ƒç”¨çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ç›¸åŒçš„</li>
</ul>
</li>
<li>åœ¨ â€œè°ƒç”¨alloca()çš„å‡½æ•°â€œ è¿”å›æ—¶ï¼Œ alloca()åˆ†é…çš„å†…å­˜ä¼šè‡ªåŠ¨é‡Šæ”¾<ul>
<li>å› ä¸ºæ˜¯åœ¨æ ˆä¸­çš„</li>
<li>æ‰€ä»¥æ— éœ€æ‰‹åŠ¨è°ƒç”¨free()é‡Šæ”¾</li>
</ul>
</li>
</ul>
</li>
<li>æ½œåœ¨çš„é—®é¢˜<ul>
<li>é€šå¸¸å®ç°ä¸ºå†…è”å‡½æ•°ï¼Œç›´æ¥å°†ä»£ç æ’å…¥è°ƒç”¨ç‚¹ï¼Œé€šè¿‡æ ˆæŒ‡é’ˆè°ƒæ•´æ¥åˆ†é…å†…å­˜ï¼Œä¸”å†…å­˜åˆ†é…è¿‡ç¨‹éå¸¸ç®€å•ï¼Œå†…è”åŒ–èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”è¿™ç§ä½çº§åˆ«ã€å¿«é€Ÿçš„æ“ä½œ<ul>
<li>ä¸ä¼šè¿”å›ç©ºæŒ‡é’ˆ<ul>
<li>å³ä½¿åˆ†é…é”™è¯¯äº†ï¼Œåªæ˜¯ä¼šå¯¼è‡´æ ˆæº¢å‡ºæˆ–ç¨‹åºå´©æºƒï¼Œç¨‹åºå‘˜æ— æ³•é€šè¿‡ç®€å•çš„è¿”å›å€¼æ£€æŸ¥æ¥åˆ¤æ–­æ˜¯å¦æˆåŠŸåˆ†é…äº†å†…å­˜</li>
</ul>
</li>
</ul>
</li>
<li>åˆ†é…ç©ºé—´æ—¶å€™å¯èƒ½å¯¼è‡´æ ˆæº¢å‡ºï¼ˆè¶…å‡ºæ ˆè¾¹ç•Œï¼‰<ul>
<li>æ ˆç©ºé—´çš„å¤§å°é€šå¸¸æ˜¯æœ‰é™åˆ¶çš„ï¼Œè¿™ä¸ªæ˜¯åœ¨æ ˆç©ºé—´åˆ†é…çš„</li>
</ul>
</li>
<li>ç¨‹åºå‘˜è¯¯ä»¥ä¸ºè¯¥å‡½æ•°è¦é…ä¸Šfreeï¼ˆï¼‰é‡Šæ”¾å†…å­˜<ul>
<li>å¯¼è‡´åŒé‡é‡Šæ”¾</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="dlmalloc"><a href="#dlmalloc" class="headerlink" title="dlmalloc"></a>dlmalloc</h3><h4 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h4><h5 id="å—ç»“æ„"><a href="#å—ç»“æ„" class="headerlink" title="å—ç»“æ„"></a>å—ç»“æ„</h5><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241213201833.png"></p>
<ul>
<li>å—å¼€å§‹çš„4å­—èŠ‚ï¼š<ul>
<li>è‹¥è¯¥å—å‰ä¸€ä¸ªå—ä¸ºç©ºé—²å—ï¼Œåˆ™è¯¥å—å¼€å§‹çš„å››å­—èŠ‚åŒ…å«å‰ä¸€å—çš„å¤§å°ï¼Œprev,previous</li>
<li>è‹¥è¯¥å—å‰ä¸€ä¸ªå—ä¸ºå·²åˆ†é…å—ï¼Œåˆ™åŒ…å«å‰ä¸€å†…å­˜å—ç”¨æˆ·æ•°æ®çš„æœ€åå››ä¸ªå­—èŠ‚</li>
</ul>
</li>
<li>PREV_INUSE<ul>
<li>PREV_INUSEä½è¢«å­˜å‚¨äºå—å¤§å°çš„ä½ä½ä¸­</li>
<li>æ ‡å¿—ä½ï¼Œè‹¥å½“å‰å†…å­˜å—<strong>å‰ä¸€å—å·²åˆ†é…ï¼Œåˆ™ä¸º1</strong></li>
</ul>
</li>
<li>è¿™é‡Œçš„fd to nextæ˜¯å‰å‘æŒ‡é’ˆï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªå†…å­˜å—ï¼Œbd to prevæ˜¯åå‘æŒ‡é’ˆï¼ŒæŒ‡å‘çš„æ˜¯å‰ä¸€ä¸ªå†…å­˜å—</li>
</ul>
<h5 id="ç©ºé—²å—ç»„ç»‡æ–¹å¼"><a href="#ç©ºé—²å—ç»„ç»‡æ–¹å¼" class="headerlink" title="ç©ºé—²å—ç»„ç»‡æ–¹å¼"></a>ç©ºé—²å—ç»„ç»‡æ–¹å¼</h5><ul>
<li>ç©ºé—²å—è¢«ç»„ç»‡æˆç­<ul>
<li>æ¯ä¸ªâ€œç­â€é‡Œå­˜æ”¾çš„æ˜¯<strong>å·®ä¸å¤šå¤§å°</strong>çš„ç©ºé—²å—</li>
<li>æ¯ä¸ªç­éƒ½æœ‰ä¸€ä¸ªâ€œå¤´ç´¢å¼•â€ head elementï¼ŒæŒ‡å‘æ¯ä¸ªâ€œç­â€çš„ä½ç½®ã€‚å®ƒå¸®åŠ© dlmalloc å¿«é€Ÿæ‰¾åˆ°åˆé€‚çš„å†…å­˜å—ï¼Œé¿å…æµªè´¹æ—¶é—´éå†æ‰€æœ‰å†…å­˜å—ã€‚</li>
<li>ç¼“å­˜æ¡†<ul>
<li>ç”¨äºå­˜æ”¾æœ€è¿‘åˆšåˆšé‡Šæ”¾çš„ç©ºé—²å—ã€‚</li>
<li>åˆ©ç”¨å±€éƒ¨æ€§åŸç†ï¼Œæœ€è¿‘é‡Šæ”¾çš„å—å¾ˆå¯èƒ½ä¼šå¾ˆå¿«è¢«é‡å¤ä½¿ç”¨ã€‚æ‰€ä»¥ï¼Œdlmalloc ä¼šæŠŠè¿™äº›å—æ”¾åœ¨ç¼“å­˜ç­é‡Œï¼Œæ–¹ä¾¿å¿«é€Ÿåˆ†é…ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241213210405.png"></p>
<h4 id="è§£é“¾æ“ä½œunlink"><a href="#è§£é“¾æ“ä½œunlink" class="headerlink" title="è§£é“¾æ“ä½œunlink"></a>è§£é“¾æ“ä½œunlink</h4><h6 id="åŸºç¡€çŸ¥è¯†-1"><a href="#åŸºç¡€çŸ¥è¯†-1" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h6><p><strong>è§£é“¾ï¼ˆunlinkï¼‰</strong> å°±æ˜¯æŒ‡ä»è¿™ä¸ªé“¾è¡¨ä¸­ç§»é™¤æŸä¸ªå†…å­˜å—ï¼Œä»¥ä¾¿åˆå¹¶æˆ–é‡æ–°åˆ†é…ã€‚<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241213211249.png"><br>ä½¿ç”¨åœºåˆ</p>
<ul>
<li>free<ul>
<li>é‡Šæ”¾å†…å­˜å—æ—¶ï¼Œå¯èƒ½éœ€è¦æ£€æŸ¥å¹¶åˆå¹¶ç©ºé—²å—</li>
<li>å¦‚æœé‡Šæ”¾çš„<strong>å†…å­˜å—å‰åç›¸é‚»çš„å—ä¹Ÿæ˜¯ç©ºé—²</strong>çš„ï¼Œé‚£ä¹ˆé‡Šæ”¾æ“ä½œä¼šå°†è¿™äº›ç›¸é‚»çš„ç©ºé—²å—<strong>åˆå¹¶</strong><ul>
<li>è¿™ä¸ªæ—¶å€™å°±éœ€è¦è§£é“¾æŠ€æœ¯ï¼ŒæŠŠé‚£ä¸ªç©ºé—²å—è§£é“¾ï¼Œåˆå¹¶åå†æ’å›å»</li>
</ul>
</li>
</ul>
</li>
<li>malloc<ul>
<li>è¦ä»ç©ºé—²é“¾è¡¨ä¸­åˆ†é…ä¸€ä¸ªå†…å­˜å—æ—¶ï¼Œ<strong>dlmalloc</strong> ä¼šä½¿ç”¨è§£é“¾æ“ä½œå°†è¯¥ç©ºé—²å—ä»é“¾è¡¨ä¸­å–å‡ºã€‚</li>
</ul>
</li>
</ul>
<h6 id="å¦‚ä½•åˆ©ç”¨-3"><a href="#å¦‚ä½•åˆ©ç”¨-3" class="headerlink" title="å¦‚ä½•åˆ©ç”¨"></a>å¦‚ä½•åˆ©ç”¨</h6><p>è¦è®©dlmallocè¯¯ä»¥ä¸ºç¬¬äºŒå—å†…å­˜æ˜¯æœªåˆ†é…çš„ï¼Œfree()æ‰ä¼šunlink()å®æ¥åˆå¹¶è‡ªå·±å’Œä¸‹ä¸€ä¸ªå†…å­˜å—ï¼ˆç›®çš„æ˜¯åˆå¹¶first,secondï¼‰ï¼Ÿ</p>
<ul>
<li><p>å¯ä»¥è®©free()æ‰¾é”™ç¬¬ä¸‰å—çš„åœ°å€ï¼š</p>
<ul>
<li>å°†ç¬¬äºŒå—å†…å­˜çš„èµ·å§‹ä½ç½®åŠ ä¸Šå…¶å¤§å°ï¼Œå¾—åˆ°ç¬¬ä¸‰å—çš„åœ°å€</li>
<li>å› æ­¤å¯ä»¥é€šè¿‡è¦†ç›–ç¬¬äºŒå—å†…å­˜ä¸­<ul>
<li>ä¸Šä¸€å—å†…å­˜å¤§å°ï¼Œå››å­—èŠ‚<ul>
<li>ä¾‹å¦‚ï¼Œç¬¬äºŒå—å†…å­˜å¤§å°è¢«ä¿®æ”¹ä¸º-4</li>
<li>å› æ­¤ä¼šå»é‚£æ‰¾ç¬¬ä¸‰å—ï¼Œä¼šä½¿dlmallocæ‰€æ‰¾åˆ°çš„PREV_INUSEæ ‡å¿—ä½ä¸ºç©ºï¼Œæ‰€ä»¥ä»¥ä¸ºsecondä¸ºæœªåˆ†é…çš„ï¼Œå¯¼è‡´freeï¼ˆfirstï¼‰è°ƒç”¨unlinkå®æ¥åˆå¹¶firstå’Œsecond</li>
</ul>
</li>
<li>sizeï¼ˆè‡ªå·±è¿™å—ï¼‰å››å­—èŠ‚</li>
<li>å‰å‘ã€åå‘æŒ‡é’ˆ</li>
</ul>
</li>
</ul>
</li>
<li><p>æ‰¾é”™ç¬¬ä¸‰å—çš„ç›®çš„æ˜¯è®©freeï¼ˆfirstï¼‰ä»¥ä¸ºsecondæœªåˆ†é…ï¼Œä»è€Œä½¿freeï¼ˆï¼‰è°ƒç”¨unlinkå®ï¼Œä»è€Œå®ç°<strong>ä»»æ„åœ°å€å¤„å†™å…¥4å­—èŠ‚æ•°æ®</strong></p>
<ul>
<li>è°ƒç”¨unlinkå®çš„ç›®çš„æ˜¯è¦å®ç°ä»»æ„å†™å…¥</li>
<li>å³ï¼Œå› ä¸ºè¦†å†™äº†ç¬¬äºŒå—çš„fdå’ŒbkæŒ‡é’ˆï¼Œå¯ä»¥å®ç°å‘è¿™ä¿©çš„åœ°å€å†™å…¥<ul>
<li>unlink()å®å°†æ”»å‡»è€…æä¾›çš„4ä¸ªå­—èŠ‚çš„æ•°æ®å†™åˆ°åŒæ ·æ˜¯ç”±æ”»å‡»è€…æŒ‡å®šçš„4ä¸ªå­—èŠ‚çš„åœ°å€å¤„</li>
</ul>
</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217151846.png">æ”»å‡»è€…å¯èƒ½ä¼šæä¾›æ ˆä¸­æŒ‡ä»¤æŒ‡é’ˆçš„åœ°å€ï¼Œå°†å…¶è¦†å†™ä¸ºæ¶æ„ä»£ç çš„åœ°å€</li>
</ul>
</li>
<li><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217152303.png"></p>
</li>
<li><p>è¯¥åˆ©ç”¨æ–¹å¼å›°éš¾ä¹‹å¤„åœ¨äºç²¾ç¡®ç¡®å®šç¬¬ä¸€å—å†…å­˜çš„å¤§å°</p>
<ul>
<li>æ”»å‡»è€…å¯ä»¥ä»dlmallocä¸­å¤åˆ¶request2size(req, nb)å®çš„ä»£ç åˆ°å…¶åˆ©ç”¨ä»£ç ä¸­<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217154041.png"></li>
</ul>
</li>
</ul>
<h4 id="FrontlinkæŠ€æœ¯"><a href="#FrontlinkæŠ€æœ¯" class="headerlink" title="FrontlinkæŠ€æœ¯"></a>FrontlinkæŠ€æœ¯</h4><p>å½“ä¸€å—å†…å­˜è¢«é‡Šæ”¾æ—¶ï¼Œå®ƒå¿…é¡»è¢«æ­£ç¡®åœ°é“¾æ¥è¿›åŒé“¾è¡¨ä¸­ï¼Œåœ¨dlmallocçš„æŸäº›ç‰ˆæœ¬ä¸­ï¼Œæ­¤é¡¹æ“ä½œæ˜¯ç”±frontlink ()ä»£ç æ®µå®Œæˆçš„</p>
<h6 id="åŸºç¡€çŸ¥è¯†-2"><a href="#åŸºç¡€çŸ¥è¯†-2" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h6><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217161416.png"><br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217161408.png"></p>
<h6 id="å¦‚ä½•åˆ©ç”¨-4"><a href="#å¦‚ä½•åˆ©ç”¨-4" class="headerlink" title="å¦‚ä½•åˆ©ç”¨"></a>å¦‚ä½•åˆ©ç”¨</h6><ul>
<li><p>shellcodeçš„æœ€å4ä¸ªå­—èŠ‚å°±æ˜¯è·³è½¬åˆ°shellcodeå…¶ä»–éƒ¨åˆ†çš„è·³è½¬æŒ‡ä»¤</p>
<ul>
<li>è¿™4ä¸ªå­—èŠ‚è¦æ˜¯firstå—çš„æœ€å4ä¸ªå­—èŠ‚ï¼Œåœ¨secondå¼€å¤´</li>
</ul>
</li>
<li><p>ä¸ºç¡®ä¿è¯¥æ¡ä»¶èƒ½æ»¡è¶³ï¼Œè¢«æ”»å‡»çš„å†…å­˜å—çš„å­—èŠ‚é•¿åº¦å¿…é¡»æ˜¯<strong>8çš„æ•´æ•°å€-4</strong>â€˜ï¼Ÿ</p>
</li>
<li><p>é€šè¿‡å¯¹fourthå†…å­˜å—æº¢å‡ºåˆ°fifthå—ï¼Œå¹¶è¦†å†™å…¶ä¸­çš„å‰å‘ï¼ˆfd to nextï¼‰æŒ‡é’ˆ<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217163735.png"></p>
<ul>
<li>ä½¿å…¶æŒ‡å‘ä¸€ä¸ªå‡å†…å­˜å—</li>
<li>è¿™ä¸ªå‡å†…å­˜å—çš„åå‘ï¼ˆbk to prevå‡å†…å­˜å—åœ°å€addr+12ï¼‰æŒ‡é’ˆåŒ…å«ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆåœ°å€<ul>
<li>ä¸€ä¸ªåˆé€‚çš„å‡½æ•°æŒ‡é’ˆï¼šå­˜å‚¨äºç¨‹åº.dtorsåŒºä¸­çš„ç¬¬ä¸€ä¸ªææ„å‡½æ•°çš„åœ°å€<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217165536.png">ä»¥é€šè¿‡æ£€æŸ¥å¯æ‰§è¡Œæ˜ åƒè€Œè·å¾—è¿™ä¸ªåœ°å€</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217181549.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217181607.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217181623.png">æ‰€ä»¥å‰é¢å…ˆåˆ©ç”¨äº†firstå—çš„æ— ç•Œå¤åˆ¶ï¼Œå¯¼è‡´secondå—è¢«æ”¹å˜ï¼Œå³å¯ä»¥å®ç°ä»»æ„çš„ä¿¡æ¯è¦†å†™è¿›å‡½æ•°æŒ‡é’ˆï¼ˆæ­¤å¤„ç”¨secondæ¥è¦†ç›–.dtorsåœ°å€ ï¼Œè€Œsecondä¸ºfirstè¦†ç›–ï¼ŒæŒ‡å‘çš„æ˜¯firstä¸­çš„shellcodeï¼‰<br>ç¨‹åºæ­£å¸¸ç»“æŸçš„æ—¶å€™ï¼Œä¼šå»è°ƒç”¨ææ„å‡½æ•°ï¼Œè€Œè¢«shellcodeè¦†ç›–äº†ï¼Œå³ç¨‹åºç»“æŸåä¼šè°ƒç”¨shellcode</p>
<h4 id="åŒé‡é‡Šæ”¾"><a href="#åŒé‡é‡Šæ”¾" class="headerlink" title="åŒé‡é‡Šæ”¾"></a>åŒé‡é‡Šæ”¾</h4><p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217182626.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217182730.png"><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217182744.png"></p>
<p><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241219205103.png">äºŒæ¬¡é‡Šæ”¾firstå†…å­˜åï¼Œå†åˆ†é…ï¼Œå¹¶å‘firsté‡Œå†™å…¥strcpyçš„GOTåœ°å€å’Œseecodeåœ°å€<br>å†æ¬¡mallocçš„æ—¶å€™ï¼Œè¿˜æ˜¯ç›¸åŒçš„firstï¼Œè€Œunlinkå®ä¼šå°†shellcodedçš„åœ°å€å¤åˆ¶åˆ°å…¨å±€åç§»è¡¨ä¸­çš„strcpyçš„åœ°å€å¤„<br>å½“ç¨‹åºè°ƒç”¨strcpyæ—¶ï¼Œå³åœ¨è°ƒç”¨shellcode</p>
<p>shellcodeéœ€è¦å¡«å……å‰é¢çš„12å­—èŠ‚ï¼Œå› ä¸ºè¿™éƒ¨åˆ†è¢«unlinkå®æ‰€è¦†å†™<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241219205546.png"></p>
<p>å†™å…¥åˆ°å·²é‡Šæ”¾å†…å­˜ä¹Ÿæ˜¯å®‰å…¨ç¼ºé™·<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241219212203.png"></p>
<h3 id="RTL-Heap-x2F-å †"><a href="#RTL-Heap-x2F-å †" class="headerlink" title="RTL Heap/å †"></a>RTL Heap/å †</h3><p>RTLï¼Œruntime libraryä½¿ç”¨äº†<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241225150117.png"></p>
<ol>
<li>è™šæ‹Ÿå†…å­˜API<ol>
<li>32ä½åœ°å€</li>
<li>4KBé¡µ</li>
</ol>
</li>
<li>å †å†…å­˜API<ol>
<li>æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªé»˜è®¤å †</li>
<li>å…è®¸ç”¨æˆ·å»ºç«‹å¤šä¸ªåŠ¨æ€å †</li>
</ol>
</li>
<li>å±€éƒ¨å†…å­˜å’Œå…¨å±€å†…å­˜API</li>
<li>CRTå†…å­˜å‡½æ•°</li>
<li>å†…å­˜æ˜ å°„API<ol>
<li>å†…å­˜æ˜ å°„æ–‡ä»¶å…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºå°†å…¶è™šæ‹Ÿåœ°å€ç©ºé—´ä¹‹é—´æ˜ å°„åˆ°ç£ç›˜ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶</li>
</ol>
</li>
</ol>
<h5 id="ä½¿ç”¨çš„æ•°æ®ç»“æ„"><a href="#ä½¿ç”¨çš„æ•°æ®ç»“æ„" class="headerlink" title="ä½¿ç”¨çš„æ•°æ®ç»“æ„"></a>ä½¿ç”¨çš„æ•°æ®ç»“æ„</h5><h6 id="è¿›ç¨‹ç¯å¢ƒå—PEB"><a href="#è¿›ç¨‹ç¯å¢ƒå—PEB" class="headerlink" title="è¿›ç¨‹ç¯å¢ƒå—PEB"></a>è¿›ç¨‹ç¯å¢ƒå—PEB</h6><p>ä½ç½®ï¼š<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241225155509.png"><br>PEBç»™å‡ºå †æ•°æ®ç»“æ„çš„ä¿¡æ¯<br><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241225155554.png"></p>
<h6 id="ç©ºé—²é“¾è¡¨"><a href="#ç©ºé—²é“¾è¡¨" class="headerlink" title="ç©ºé—²é“¾è¡¨"></a>ç©ºé—²é“¾è¡¨</h6><p>æœ‰128ä¸ªåŒå‘é“¾è¡¨çš„æ•°ç»„ï¼Œé“¾è¡¨è¢«RTLå †ç”¨æ¥è·Ÿè¸ªç©ºé—²å†…å­˜å—</p>
<ul>
<li>Freelist[]æ˜¯ä¸ªLIST_ENTRYç»“æ„çš„æ•°ç»„<ul>
<li>æ¯ï¼ä¸ªLIST_ENTRYè¡¨ç¤ºä¸€ä¸ªåŒé“¾è¡¨çš„å¤´éƒ¨ï¼Œç”±ä¸€ä¸ªå‰å‘é“¾æ¥ï¼ˆ flink ï¼‰å’Œä¸€ä¸ªåå‘é“¾æ¥ï¼ˆ blink ï¼‰ç»„æˆ</li>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241225160752.png"></li>
<li>æ¯ä¸ªé“¾è¡¨ä¸­ä»å°åˆ°å¤§å¼€å§‹æ’ï¼Œ</li>
<li>åˆ›å»ºä¸€ä¸ªæ–°å †æ—¶ï¼Œç©ºé—²é“¾è¡¨è¢«åˆå§‹åŒ–ä¸ºç©ºï¼Œå³å‰å‘å’Œåå‘é“¾æ¥éƒ½æŒ‡å‘é“¾è¡¨å¤´</li>
</ul>
</li>
<li><h2 id="åå¤‡ç¼“å­˜é“¾è¡¨"><a href="#åå¤‡ç¼“å­˜é“¾è¡¨" class="headerlink" title="åå¤‡ç¼“å­˜é“¾è¡¨"></a>åå¤‡ç¼“å­˜é“¾è¡¨</h2></li>
</ul>
<h2 id="æ•´æ•°å®‰å…¨"><a href="#æ•´æ•°å®‰å…¨" class="headerlink" title="æ•´æ•°å®‰å…¨"></a>æ•´æ•°å®‰å…¨</h2><h3 id="æ•´æ•°æ•°æ®ç±»å‹"><a href="#æ•´æ•°æ•°æ®ç±»å‹" class="headerlink" title="æ•´æ•°æ•°æ®ç±»å‹"></a>æ•´æ•°æ•°æ®ç±»å‹</h3><ul>
<li>åŸç è¡¨ç¤ºæ–¹æ³•<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217195747.png"></li>
<li>åç è¡¨ç¤ºæ–¹æ³•<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217195819.png"></li>
<li>è¡¥ç è¡¨ç¤ºæ–¹æ³•<img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217195914.png"></li>
<li>å¸¦ç¬¦å·å’Œæ— ç¬¦å·<ul>
<li><img lazyload="" src="/images/loading.svg" data-src="/../images/Pasted%20image%2020241217200044.png"></li>
</ul>
</li>
</ul>
<h3 id="æ•´æ•°çš„è½¬æ¢"><a href="#æ•´æ•°çš„è½¬æ¢" class="headerlink" title="æ•´æ•°çš„è½¬æ¢"></a>æ•´æ•°çš„è½¬æ¢</h3><h3 id="æ•´æ•°çš„æ“ä½œ"><a href="#æ•´æ•°çš„æ“ä½œ" class="headerlink" title="æ•´æ•°çš„æ“ä½œ"></a>æ•´æ•°çš„æ“ä½œ</h3><h3 id="æ•´æ•°çš„æ¼æ´"><a href="#æ•´æ•°çš„æ¼æ´" class="headerlink" title="æ•´æ•°çš„æ¼æ´"></a>æ•´æ•°çš„æ¼æ´</h3>]]></content>
      <categories>
        <category>å­¦ä¹ ç¬”è®°</category>
      </categories>
  </entry>
</search>
